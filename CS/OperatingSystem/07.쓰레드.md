# 07. ì“°ë ˆë“œ

> Threadì— ëŒ€í•´ì„œ í•™ìŠµí•œë‹¤.

[ğŸ Home](https://github.com/batboy118/Study_Note)

[â—€Previous page ](./README.md)

---

<!-- TOC -->

- [1. Thread](#1-thread)
	- [1.1. ì“°ë ˆë“œë€?](#11-ì“°ë ˆë“œë€)
	- [1.2. ë‹¤ì¤‘ ì“°ë ˆë“œ (Multithreads)](#12-ë‹¤ì¤‘-ì“°ë ˆë“œ-multithreads)
	- [1.3. Thread vs Process](#13-thread-vs-process)
		- [1.4. ì˜ˆì œ : ìë°” ì“°ë ˆë“œ](#14-ì˜ˆì œ--ìë°”-ì“°ë ˆë“œ)

<!-- /TOC -->

## 1. Thread

### 1.1. ì“°ë ˆë“œë€?

- ì“°ë ˆë“œë€ í”„ë¡œê·¸ë¨ ë‚´ë¶€ì˜ íë¦„(ë§¥)ì´ë‹¤.

```java
class Test {
    public static void main(String[] args) {
        int n = 0;
        int m = 6;

        System.out.println(n+m);
        while (n < m)
            n++;
        System.out.println("Bye");
    }
}
```

ìœ„ í”„ë¡œê·¸ë¨ì€ ë³€ìˆ˜ ì„ ì–¸ê³¼ ì´ˆê¸°í™” í›„ í•©ì„ ì¶œë ¥í•˜ê³  nì´ më³´ë‹¤ ì»¤ì§ˆë•Œ ê¹Œì§€ nì„ ì¦ê°€ì‹œí‚¤ê³  Byeë¥¼ ì¶œë ¥í•˜ì—¬ ì¢…ë£Œí•˜ëŠ” íë¦„ì„ ê°€ì§„ë‹¤.

### 1.2. ë‹¤ì¤‘ ì“°ë ˆë“œ (Multithreads)

- í•œ í”„ë¡œê·¸ë¨ì— 2ê°œ ì´ìƒì˜ ë§¥ì´ ì¡´ì¬í•˜ëŠ” ê²ƒ

- ë§¥ì´ ë¹ ë¥¸ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ **ìŠ¤ìœ„ì¹­** ëœë‹¤.

  â‡’ ì—¬ëŸ¬ ë§¥ì´ ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì¸ë‹¤. (concurrent )

  > concurrent - ë™ì‹œì— ì¼ì–´ë‚˜ëŠ” ê²ƒ ì²˜ëŸ¼ ë³´ì´ëŠ” ê²ƒ
  >
  > simultaneous - ì‹¤ì œë¡œ ë™ì‹œì— ì¼ì–´ë‚˜ëŠ” ê²ƒ (CPUê°€ ì—¬ëŸ¬ê°œì¸ ìƒí™©)

- ì˜ˆì‹œ
  - Web browser : í™”ë©´ ì¶œë ¥í•˜ëŠ” ì“°ë ˆë“œ + ë°ì´í„° ì½ì–´ì˜¤ëŠ” ì“°ë ˆë“œ
  - Word processor : í™”ë©´ ì¶œë ¥í•˜ëŠ” ì“°ë ˆë“œ + í‚¤ë³´ë“œ ì…ë ¥ ë°›ëŠ” ì“°ë ˆë“œ + ì² ì/ë¬¸ë²• ì˜¤ë¥˜ í™•ì¸ ì“°ë ˆë“œ
  - ìŒì•… ì—°ì£¼ê¸°, ë™ì˜ìƒ í”Œë ˆì´ì–´, IDE, â€¦

### 1.3. Thread vs Process

- ë‹¨ì¼ ì“°ë ˆë“œ (single thread) í”„ë¡œê·¸ë¨
  
- í•œ í”„ë¡œì„¸ìŠ¤ì—ëŠ” ê¸°ë³¸ 1ê°œì˜ ì“°ë ˆë“œ
  
- ë‹¤ì¤‘ ì“°ë ˆë“œ (multi-thread) í”„ë¡œê·¸ë¨

  - í•œ í”„ë¡œì„¸ìŠ¤ì— ì—¬ëŸ¬ ê°œì˜ ì“°ë ˆë“œ

- **í”„ë¡œì„¸ìŠ¤ ë‚´ë¶€ ì“°ë ˆë“œì˜ ìì› ê³µìœ **

  - ê³µìœ  ìì›

    - ë©”ëª¨ë¦¬ : í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ ê³µê°„ ê³µìœ  (`code ì˜ì—­`, `data ì˜ì—­`)
  - í”„ë¡œì„¸ìŠ¤ì˜ ìì› : `file`, `I/O`

  - ë¹„ê³µìœ  ìì›

    - ê°œë³„ì ì¸ PC, SP, registers, stack

      > stack : í•¨ìˆ˜ë¥¼ í˜¸ì¶œ í•  ë•Œ ë¦¬í„´ì–´ë“œë ˆìŠ¤ë‚˜ ìƒíƒœë¥¼ ì €ì¥í•˜ê¸° ë•Œë¬¸ì— ê°œë³„ë¡œ ê´€ë¦¬

- `í”„ë¡œì„¸ìŠ¤ì˜ ìŠ¤ìœ„ì¹­` vs `ì“°ë ˆë“œì˜ ìŠ¤ìœ„ì¹­`

  - ìš”ì¦˜ ì»´í“¨í„°ëŠ” ì“°ë ˆë“œë¥¼ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— í”„ë¡œì„¸ìŠ¤ ë‹¨ìœ„ê°€ ì•„ë‹Œ, **ì“°ë ˆë“œ ë‹¨ìœ„ë¡œ `context switching`ì´ ë°œìƒ**í•¨

    ex) `í”„ë¡œì„¸ìŠ¤ 1,2,3`ì´ ìˆì„ ë•Œ, `í”„ë¡œì„¸ìŠ¤1`ì—ëŠ” `ë‘ê°œì˜ ì“°ë ˆë“œ`, `í”„ë¡œì„¸ìŠ¤ 2`ì—ëŠ” `ì„¸ê°œì˜ ì“°ë ˆë“œ`, `í”„ë¡œì„¸ìŠ¤ 3`ì—ëŠ”` 2ê°œì˜ ì“°ë ˆë“œ`ê°€ ìˆë‹¤ê³  ê°€ì •í•˜ë©´, `í”„ë¡œì„¸ìŠ¤ 1`ì˜ `ì“°ë ˆë“œ1`ì„ ì‹¤í–‰ í›„ `ì“°ë ˆë“œ 2`ë¥¼ ì‹¤í–‰í•˜ê³  `í”„ë¡œì„¸ìŠ¤ 2`ë¡œ ë„˜ì–´ê°€ `í”„ë¡œì„¸ìŠ¤ 2`ì˜ `ì“°ë ˆë“œ 1`ì„ ì‹¤í–‰ í›„ `ì“°ë ˆë“œ 2`ë¥¼ ì‹¤í–‰í•˜ê³ , `ì“°ë ˆë“œ 3`ì„ ì‹¤í–‰ í›„ `í”„ë¡œì„¸ìŠ¤3`ìœ¼ë¡œ ë„˜ì–´ê°€ `ì“°ë ˆë“œ1,2`ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•˜ê³  ë‹¤ì‹œ `í”„ë¡œì„¸ìŠ¤ 1`ì˜ `ì“°ë ˆë“œ 1,2`ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ë°˜ë³µì´ ëœë‹¤.

- í”„ë¡œê·¸ë˜ë°ì„ í•  ë•Œ ì“°ë ˆë“œ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë©€í‹°ì“°ë ˆë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŒ

#### 1.4. ì˜ˆì œ : ìë°” ì“°ë ˆë“œ

- ê¸€ì A ì™€ B ë¥¼ ë™ì‹œì— í™”ë©´ì— ì¶œë ¥í•˜ê¸°
  - ëª¨ë“  í”„ë¡œê·¸ë¨ì€ ì²˜ìŒë¶€í„° 1ê°œì˜ ì“°ë ˆë“œëŠ” ê°–ê³  ìˆë‹¤ (main)
  - 2ê°œì˜ ì“°ë ˆë“œ: main + MyThread

> `public void run()` : í”„ë¡œê·¸ë¨ ë‚´ë¶€ì—ì„œ ìƒˆë¡œìš´ ë§¥ì´ íë¥´ëŠ” ê³³
>
> `void start()` : ì“°ë ˆë“œ ì‹œì‘ ìš”ì²­
>
> `void join()` : ì“°ë ˆë“œê°€ ë§ˆì¹˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¼
>
> `static void sleep()` : ì“°ë ˆë“œ ì ìê¸° (ë”œë ˆì´)

```java
Class Test{
	public	static void main (String[] args){
        MyThread th = new MyThread();
        th.tart();
        while(true){
            System.out.print("A");
            try {
            	Thread.sleep(100);
            }catch (InterruptedException e){}//sleepì„ ì‚¬ìš©í•  ë•Œ InterruptedExceptionì€ ë¬´ì‹œ
        }
    }
}

class MyThread extends Thread {
    public void run(){
        while(true){
            System.out.print("B");
            try {
            	Thread.sleep(100);
            }catch (InterruptedException e){}//sleepì„ ì‚¬ìš©í•  ë•Œ InterruptedExceptionì€ ë¬´ì‹œ
    	}
    }
}
```

- ê¸°ë³¸ì ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì€ main ì“°ë ˆë“œë¥¼ ê°€ì§€ê³  ìˆë‹¤. (ë³´í†µ main ë¬¸)
- ìœ„ ì½”ë“œì—ì„œëŠ” main ì“°ë ˆë“œì—ì„œ `A`ë¥¼ ì°ê³  MyTreadì—ì„œ `B`ë¥¼ ì°ëŠ” ë‹¤ì¤‘ ì“°ë ˆìŠ¤ì´ë‹¤.



