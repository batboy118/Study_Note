# 12.백트래킹_backtracking

>해를 찾는 도중 절대로 해가 될 수 없는 경우라면, 끝까지 탐색하지 않고 되돌아가서 다시 해를 탐색하는 기법이 백트래킹이다.

[🏠Home](https://github.com/batboy118/Study_Note)

[◀Previous page ](./)

---

<!-- TOC -->

- [1. 백트래킹](#1-백트래킹)

<!-- /TOC -->

## 1. 백트래킹

배트래킹은 초기 상태에서 목표 상태로 가는 경로를 탐색하는 기법으로, 여러가지 선택지 중 1가지를 선택하고, 새로운 선택지를 생성하며 이것을 반복하면서 최종 상태에 도달하게 되며 올바른 선택들을 계속하면 결국 목표 상태에 도달하는 기법을 의미한다.

- 백트래킹의 활용
  1. 최적화 문제
  2. 결정 문제
- 활용
  - 결정 문제
    - 미로 찾기 문제 : 미로의 입구에서 출구까지의 경로의 존재 유무를 확인하는 문제
    - 부분 집합의 합 문제 : 원소의 합이 조건에 맞는 부분집합 존재 유무를 확인하는 문제
  - 최적화 문제
    - 미로 찾기 : 미로의 최단 경로를 찾는 문제
    - 부분 집합의 합 문제 : 조건을 만족하는 원소의 개수가 최대인 부분 집합을 찾는 문제
    - n-Queen 문제 : n개의 퀸들이 서로를 공격할 수 없도록 n*n 체스판에 배치하는 모든 경우의 수를 구하는 문제
    - Map coloring 문제 : 
- 백트래킹과 깊이 우선 탐색
  - 백트래킹
    - 어떤 노드에서 출발하는 경로가 해결책으로 이어질 것 같지 않으면 더 이상 그 경로를 따라가지 않음으로써 시도의 횟수를 줄임
    - 가지치기(Prunning) : 불필요한 경로의 조기 차단
    - N!가지의 경우의 수를 가진 문제에 대해 백트레킹에 가하면 일반적으로 경우의 수가 줄어들지만 이 역시 최악의 경우에는 여전히 지수함수 시간을 요하므로 처리 불가능
    - 모든 후보를 검사하지 않는다.
  - 깊이 우선 탐색
    - 모든 경로를 추적하여 모든 후보를 검사함
- 백트래킹 기법
  - 어떤 노드의 유망성을 점검한 후에 유망하지 않다고 결정되면 그 노드의 부모로 되돌아가 다음 자식 노드로 감
  - 어떤 노드를 방문하였을 때 그 노드를 포함한 경로가 해답이 될 수 없으면 그 노드는 유망하지 않다고 함
  - 반대로 해답의 가능성이 잇으면 유망하다고 함
  - 가지치기 : 유망하지 않은 노드가 포함되는 경로는 더 이상 고려하지 않음
- State-space *tree* (상태공간트리)
  - 문제 해결 과정의 중간 상태를 각각 한 노드로 나타낸 트리
  - 백트래키에서 어떠한 중간 상태(노드)가 false인 경우 해당 트리의 자식 노드들은 탐색하지 않는다.(가지치기)

## 2. 예시 문제

### 2.1. n-queens 문제

- 퀸들은 같은 행에 존재할 수 없음
  - 각 퀸에 대해서 행의 위치를 미리 결정하고 열의 위치에 대해서만 고려
- 모든 후보해를 검사하지 않는다.
  - 즉, 어떤 노드가 유효한지 확인하여, 유망하지 않으면 해당 노드를 계속 탐색하지 않고, 다시 돌아가 다른 노드를 탐색하는 방법이다.
  - n-queen 문제에서는 해당 위치에 queen이 올 수 없다면, 해당자리에 퀸이 놓인 상황을 무시하고, 다른 위치에 queen을 놓는다. 이러한 작업을 가지치고라고 부른다.

### 2.2. 부분 집합

- Powerset

- 비트열을 이용하여 부분집합을 구할 수 있다.

  - 배열을 이용해 모든 부분 집합을 구하는 방법

    ```c
    void subset(int bit[], int k, int n)
    {
    	if(k==n)
            print_bit_Array;
        else
            bit[k] = 0;
        	subset(bit, n, k+1);
            bit[k] = 1;
        	subset(bit, n, k+1);
    }
    ```

    - bit 배열이 1이면 포함, 0이면 불포함

### 

