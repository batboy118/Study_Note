# 09. ì§€ì—°ì„± 2

> í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ê³¼ JavaScript ES6+
>
> - ì§€ì—°ì„± 2

[ğŸ Home](https://github.com/batboy118/Study_Note)

[â—€Previous page ](./README.md)

---

<!-- TOC -->

- [1. rangeá„‹á…ª á„‚á…³á„€á…³á†ºá„’á…¡á†« L.range](#1-rangeá„‹á…ª-á„‚á…³á„€á…³á†ºá„’á…¡á†«-lrange)
- [2. rangeá„‹á…ª á„‚á…³á„€á…³á†ºá„’á…¡á†« L.range í…ŒìŠ¤íŠ¸](#2-rangeá„‹á…ª-á„‚á…³á„€á…³á†ºá„’á…¡á†«-lrange-í…ŒìŠ¤íŠ¸)
- [3. take](#3-take)
- [4. L.map](#4-lmap)
- [5. L.filter](#5-lfilter)
- [6. range, map, filter, take, reduce á„Œá…®á†¼á„á…¥á†¸ á„‰á…¡á„‹á…­á†¼](#6-range-map-filter-take-reduce-á„Œá…®á†¼á„á…¥á†¸-á„‰á…¡á„‹á…­á†¼)
- [7. á„‹á…¥á†·á„€á…§á†¨á„’á…¡á†« á„€á…¨á„‰á…¡á†«á„€á…ª á„‚á…³á„€á…³á†ºá„’á…¡á†« á„€á…¨á„‰á…¡á†«á„‹á…´ á„’á…­á„‹á…²á†¯á„‰á…¥á†¼ á„‡á…µá„€á…­](#7-á„‹á…¥á†·á„€á…§á†¨á„’á…¡á†«-á„€á…¨á„‰á…¡á†«á„€á…ª-á„‚á…³á„€á…³á†ºá„’á…¡á†«-á„€á…¨á„‰á…¡á†«á„‹á…´-á„’á…­á„‹á…²á†¯á„‰á…¥á†¼-á„‡á…µá„€á…­)
- [8. map, filter ê³„ì—´ í•¨ìˆ˜ë“¤ì´ ê°€ì§€ëŠ” ê²°í•© ë²•ì¹™](#8-map-filter-ê³„ì—´-í•¨ìˆ˜ë“¤ì´-ê°€ì§€ëŠ”-ê²°í•©-ë²•ì¹™)

<!-- /TOC -->

## 1. ê²°ê³¼ë¥¼ ë§Œë“œëŠ” í•¨ìˆ˜ reduce, take

map, filterì™€ëŠ” ë‹¤ë¥´ê²Œ reduceë‚˜ takeëŠ” ê²°ê³¼ë¥¼ ë§Œë“œëŠ” í•¨ìˆ˜ë¡œ ì§€ì—°ì„±ì„ ê°€ì§€ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ì—°ì‚°ì˜ ì‹œì‘ì„ ì•Œë¦¬ëŠ” í•¨ìˆ˜ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.

## 2. quertStr í•¨ìˆ˜ ë§Œë“¤ê¸°

```js
const queryStr = pipe(
    Object.entries,
    map(([k, v]) => `${k}=${v}`),
    reduce((a, b) => `${a}&${b}`);
);

log(queryStr({limit: 10, offset: 10, type: 'notice'}));
//limit=10&offset=10&type=notice
```

í•˜ì§€ë§Œ, recudeëŒ€ì‹  Arrayí”„ë¡œí† íƒ€ì…ì— ìˆëŠ” joinê³¼ ê°™ì€ í•¨ìˆ˜ê°€ ìˆë‹¤ë©´, ë” ê°€ë…ì„±ì´ ì¢‹ì€ ì½”ë“œë¥¼ ì§¤ ìˆ˜ ìˆë‹¤. ì´í„°ëŸ¬ë¸”ì„ ìœ„í•œ joinì„ ì§ì ‘êµ¬í˜„í•˜ì—¬ ì‚¬ìš©í•´ë³´ì.

```javascript
const join = curry((sep = ',', iter) =>
                   reduce((a, b) => `${a}${sep}${b}`, iter));

const queryStr = pipe(
     Object.entries,
    L.map(([k, v]) => `${k}=${v}`),
    join('&')
);

log(queryStr({limit: 10, offset: 10, type: 'notice'}));
//limit=10&offset=10&type=notice
```

í•˜ì§€ë§Œ, ` Object.entries()`ëŠ” ì˜¤ë¸Œì íŠ¸ì˜ í‚¤ì™€ ë°¸ë¥˜ê°’ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¡œ, ì§€ì—° ê³„ì‚°ë˜ì§€ ì•Šê³ , ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë¦¬í„´í•œë‹¤.

ì´ í•¨ìˆ˜ë¥¼ ì§€ì—° ê³„ì‚°ì´ ë˜ë„ë¡ ìˆ˜ì •í•´ë³´ì.

```js
L.entries = function* (obj) {
    for (const k in obj) yield [k, obj[k]];
};

const queryStr = pipe(
    L.entries,
    L.map(([k, v]) => `${k}=${v}`),
    join('&')
);
```

## 3. take, find

find í•¨ìˆ˜ëŠ” takeë¥¼ ì´ìš©í•˜ì—¬ ê²°ë¡ ì„ ë§Œë“¤ ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì´ë‹¤.

```js
const users = [
    {age: 32},
    {age: 31},
    {age: 37},
    {age: 28},
    {age: 25},
    {age: 32},
    {age: 31},
    {age: 37}
];

const find = (f, iter) => go(
    iter,
    filter(f),
    take(1),
    ([a]) => a
);

log(find(u => u.age < 30, users));
```

ì´í„°ëŸ¬ë¸”ì„ ë„£ì–´ì„œ í•¨ìˆ˜ë¡œ í•„í„°ë¥¼ í•˜ê³ , ê·¸ì¤‘ í•˜ë‚˜ë§Œ ê³¨ë¼ì„œ êµ¬ì¡°ë¶„í•´ë¥¼ í•´ì„œ ìµœì¢… í•˜ë‚˜ì˜ ê°’ë§Œì„ ë¦¬í„´í•˜ëŠ” findí•¨ìˆ˜ë¥¼ ë§Œë“¤ì—ˆë‹¤.

í•˜ì§€ë§Œ, ì‚¬ì‹¤ ëª¨ë“  uersì— ëŒ€í•´ì„œ ëª¨ë‘ filterë¥¼ ì§„í–‰í•  í•„ìš”ê°€ ì—†ë‹¤.

ì§€ì—° ê³„ì‚°ì„ í†µí•´ ì½”ë“œì˜ íš¨ìœ¨ì„ ë†’ì—¬ë³´ì.

```js
const find = (f, iter) => go(
    iter,
    L.filter(f),
    take(1),
    ([a]) => a
);
```

filterì— ì§€ì—°ê³„ì‚°ì„ ì ìš©í•˜ê²Œ ë˜ë©´ ëª¨ë“  ê°’ì„ í™•ì¸í•˜ì§€ ì•Šê³  ì²« ë²ˆì§¸ë¡œ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê°’ë§Œ ì°¾ì•„ì„œ ë¦¬í„´í•´ ì¤„ ìˆ˜ ìˆë‹¤.

ì—¬ê¸°ì— ì»¤ë§ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©ë„ ê°€ëŠ¥í•˜ë‹¤.

```js
const find = curry((f, iter) => go(
    iter,
    L.filter(f),
    take(1),
    ([a]) => a));

log(find(u => u.age < 30)(users));

go(
    users,
    L.map(u => u.age),
    find(n => n < 30),
    log
);
```

## 4. L.map, L.filterë¡œ mapê³¼ filter ë§Œë“¤ê¸°

L.mapì„ ì´ìš©í•´ì„œ mapì„ ë¨¼ì € ë§Œë“¤ì–´ ë³´ê² ë‹¤.

```js
const map = curry((f, iter) => go(
	L.map(f, iter),
    take(Infinity)
));

log(map(a => a + 10, L.range(4)));
//[10, 11, 12, 13]
```

ìœ„ í•¨ìˆ˜ì—ì„œ `(f, iter)`ë¥¼ ê·¸ëŒ€ë¡œ L.mapì—ì„œ ë°›ê³  ìˆê¸° ë•Œë¬¸ì—, ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.

```js
const map = curry(pipe(
    L.map,
    take(Infinity)
));

log(map(a => a + 10, L.range(4)));
//[10, 11, 12, 13]
```

ì´ë²ˆì—ëŠ” L.filterë¥¼ ì´ìš©í•˜ì—¬ filterë¥¼ ë§Œë“¤ì–´ë³´ì.

```js
const filter = curry(pipe(
    L.filter,
    take(Infinity)
));

log(filter(a => a % 2, range(4)));
//[1, 3]
```

ë‘ í•¨ìˆ˜ì—ì„œ take(Infinity)ë¥¼ ì¤‘ë³µìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ ë¦¬íŒ©í† ë§í•  ìˆ˜ ìˆë‹¤.

```js
const takeAll =  take(Infinity);
const map = curry(pipe(L.map, takeAll));
const filter = curry(pipe(L.filter, takeAll));
```

## 5. L.flattenê³¼ flatten

L.flattenì€ ìš”ì†Œê°€ ì´í„°ëŸ¬ë¸”ê³¼ ê°’ìœ¼ë¡œ ì„ì—¬ìˆëŠ” ë°°ì—´ì¼ ë•Œ ë‹¤ í¼ì³ì„œ ì´í„°ë ˆì´í„°ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì´ë‹¤.

```js
const isIterable = a => a && a[Symbol.iterator];

L.flatten = function* (iter) {
    for (const a of iter) {
        if (isIterable(a)) for (const b of a) yield b
        else yield a;
    }
};

var it = L.flatten([[1, 2], 3, 4, [5, 6], [7, 8, 9]]);
console.log([...it]);
//[1,2,3,4,5,6,7,8,9]

console.log(take(3, L.flatten([[1, 2], 3, 4, [5, 6], [7, 8, 9]])));
//[1, 2, 3]
```

ë§Œì•½, ìš”ì†Œê°€ ì´í„°ëŸ¬ë¸”ì´ë¼ë©´ ëª¨ë‘ ë‚˜ì—´í•´ì£¼ë„ë¡ ë˜ì–´ìˆë‹¤.

ì´ì œ L.flattenìœ¼ë¡œ flattenì„ ë§Œë“¤ì–´ë³´ì.

```js
const flatten = pipe(L.flatten, takeAll);
console.log(flatten([[1, 2], 3, 4, [5, 6], [7, 8, 9]]));
//[1,2,3,4,5,6,7,8,9]
```

## 6. yield *, L.deepFlat

yield *ë¥¼ ì‚¬ìš©í•˜ë©´ L.flattenì„ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

`yield *iterable`ì€ `for (const val of iterable) yield val;`ê³¼ ê°™ë‹¤.

```js
//yield * ì‚¬ìš© ì „
L.flatten = function* (iter) {
    for (const a of iter) {
        if (isIterable(a)) for (const b of a) yield b
        else yield a;
    }
};

//yield * ì‚¬ìš© í›„
L.flatten = function* (iter) {
    for (const a of iter) {
        if (isIterable(a)) yield* a;
        else yield a;
    }
};
```

ê·¸ë¦¬ê³ , `L.deepFlat`ì´ë€ í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ê¹Šì€ Iterableì„ ëª¨ë‘ í¼ì¹  ìˆ˜ ìˆë‹¤.

ì•„ë˜ì™€ ê°™ì´ `L.deepFlat`ì„ êµ¬í˜„í•œë‹¤.

```js
L.deepFlat = function* f(iter) {
    for (const a of iter) {
        if (isIterable(a)) yield* f(a);
        else yield a;
    }
};
log([...L.deepFlat([1, [2, [3, 4], [[5]]]])]);
// [1, 2, 3, 4, 5];
```

> ê¸°ëª…í•¨ìˆ˜(ìœ ëª…í•¨ìˆ˜)ë¥¼ ì‚¬ìš©í–ˆë‹¤. ì¦‰, fí•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì¬ê·€ê°€ ëœë‹¤.
>
> [í•¨ìˆ˜í‘œí˜„ì‹](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/function)

## 7. L.flatMap, flatMap

```javascript
L.flatMap = curry(pipe(L.map, L.flatten));
const flatMap = curry(pipe(L.map, flatten));
```

