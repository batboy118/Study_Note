# 97. JS Flow

> ì •ì¬ë‚¨ë‹˜ì˜ JS Flow ê°•ì˜ë¥¼ ì •ë¦¬

[ğŸ Home](https://github.com/batboy118/Study_Note)

[â—€Previous page ](./README.md)

---

<!-- TOC -->

- [1. ë°ì´í„° íƒ€ì…](#1-ë°ì´í„°-íƒ€ì…)
- [2. í•¨ìˆ˜](#2-í•¨ìˆ˜)
	- [2.1. Hoisting (í˜¸ì´ìŠ¤íŒ…)](#21-hoisting-í˜¸ì´ìŠ¤íŒ…)
	- [2.2. í•¨ìˆ˜ ì„ ì–¸ì‹ê³¼ í•¨ìˆ˜ í‘œí˜„ì‹](#22-í•¨ìˆ˜-ì„ ì–¸ì‹ê³¼-í•¨ìˆ˜-í‘œí˜„ì‹)
	- [2.3. í•¨ìˆ˜ ìŠ¤ì½”í”„, ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸](#23-í•¨ìˆ˜-ìŠ¤ì½”í”„-ì‹¤í–‰-ì»¨í…ìŠ¤íŠ¸)
	- [2.4. ë©”ì†Œë“œ(Method)](#24-ë©”ì†Œë“œmethod)
	- [2.5. ì½œë°± í•¨ìˆ˜ (Callback function)](#25-ì½œë°±-í•¨ìˆ˜-callback-function)
- [3. this](#3-this)
	- [3.1 ì „ì—­ê³µê°„ì—ì„œ this](#31-ì „ì—­ê³µê°„ì—ì„œ-this)
	- [3.2. í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ this](#32-í•¨ìˆ˜-ë‚´ë¶€ì—ì„œ-this)
	- [3.3. ë©”ì†Œë“œ í˜¸ì¶œ ì‹œ this](#33-ë©”ì†Œë“œ-í˜¸ì¶œ-ì‹œ-this)
	- [3.4. callback í•¨ìˆ˜ì—ì„œ this](#34-callback-í•¨ìˆ˜ì—ì„œ-this)
	- [3.5. ìƒì„±ìí•¨ìˆ˜ì—ì„œ this](#35-ìƒì„±ìí•¨ìˆ˜ì—ì„œ-this)
- [4. í´ë¡œì €(Closure)](#4-í´ë¡œì €closure)
	- [4.1. í´ë¡œì €ì˜ ì •ì˜](#41-í´ë¡œì €ì˜-ì •ì˜)
	- [4.2. í´ë¡œì €ì˜ í™œìš© : Private member ë§Œë“¤ê¸°](#42-í´ë¡œì €ì˜-í™œìš©--private-member-ë§Œë“¤ê¸°)
- [5. í”„ë¡œí† íƒ€ì… (Prototype)](#5-í”„ë¡œí† íƒ€ì…-prototype)
	- [5.1. prototype, constructor, \proto](#51-prototype-constructor-\proto)
	- [5.2. ë©”ì†Œë“œ ìƒì† ë° ë™ì‘ ì›ë¦¬](#52-ë©”ì†Œë“œ-ìƒì†-ë°-ë™ì‘-ì›ë¦¬)
	- [5.3. Prototype chaining](#53-prototype-chaining)
- [6. í´ë˜ìŠ¤(Class)](#6-í´ë˜ìŠ¤class)
	- [6.1. prototype static ë©”ì†Œë“œ ë° static í”„ë¡œí¼í‹°](#61-prototype-static-ë©”ì†Œë“œ-ë°-static-í”„ë¡œí¼í‹°)
	- [6.2. í´ë˜ìŠ¤ ìƒì† êµ¬í˜„](#62-í´ë˜ìŠ¤-ìƒì†-êµ¬í˜„)

<!-- /TOC -->

## 1. ë°ì´í„° íƒ€ì…

ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë°ì´í„° íƒ€ì…ì€ í¬ê²Œ ë‘ ê°€ì§€ë¡œ êµ¬ë¶„ëœë‹¤.

1. ê¸°ë³¸í˜•(Primitive Type)
   - Number
   - String
   - Boolean
   - null
   - undefined
   - Symbol (ES6ì—ì„œ ì¶”ê°€ë¨)

2. ì°¸ì¡°í˜•(Reference Type)

   - Object
     - Array
     - Function
     - RegExp (ì •ê·œí‘œí˜„ì‹)
     - Set  (ES6ì—ì„œ ì¶”ê°€ë¨)
     - Map  (ES6ì—ì„œ ì¶”ê°€ë¨)
     - WeakSet  (ES6ì—ì„œ ì¶”ê°€ë¨)
     - WeakMap  (ES6ì—ì„œ ì¶”ê°€ë¨)

   > ì°¸ì¡°í˜„ì€ Object(ê°ì²´)ê°€ ìˆê³  ê·¸ í•˜ìœ„ì— ë°°ì—´, í•¨ìˆ˜, ì •ê·œí‘œí˜„ì‹ ë“±ì´ ì¡´ì¬í•œë‹¤.

**ê¸°ë³¸í˜•**ì€ ê°’ì„ ê·¸ëŒ€ë¡œ í• ë‹¹í•˜ëŠ” í˜•íƒœì´ê³ , **ì°¸ì¡°í˜•**ì€ ê°’ì´ ì €ì¥ëœ ì£¼ì†Œê°’ì„ í• ë‹¹ ì¦‰ ì°¸ì¡°ë¥¼ í•˜ëŠ” í˜•íƒœì´ë‹¤.

ì°¸ì¡°í˜• ë°ì´í„° ì•ˆì— ì°¸ì¡°í˜• ë°ì´í„°ê°€ ì¡´ì¬í•˜ëŠ” í˜•íƒœë¥¼ `nested ê°ì²´`ë¼ê³  í•œë‹¤.

## 2. í•¨ìˆ˜

### 2.1. Hoisting (í˜¸ì´ìŠ¤íŒ…)

í˜¸ì´ìŠ¤íŒ…ì€ ì„ ì–¸ê³¼ ê´€ë ¨ëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ íŠ¹ì„±ì´ë‹¤.

ë³€ìˆ˜ì˜ ì„ ì–¸ê³¼ í•¨ìˆ˜ì˜ ì„ ì–¸ì„ ìœ„ë¡œ ëŒì–´ ì˜¬ë¦¬ëŠ” ê²ƒì„ í˜¸ì´ìŠ¤íŒ…ì´ë¼ í•œë‹¤.

```javascript
console.log(a)
console.log(b)
console.log(c)

// f()
// undefined
// undefined

function a(){
    return 'a';
}
var b = function bb(){
    return 'bb';
}
var c = function() {
    return 'c';
}
```

ì´ëŸ¬í•œ ì½”ë“œëŠ” ë‹¤ë¥¸ ì–¸ì–´ë¼ë©´ ì•ì„œ ì„ ì–¸ë˜ì§€ ì•Šì€ ë³€ìˆ˜ë“¤ì€ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ë§Œ, ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ê·¸ë ‡ì§€ ì•Šë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¡œ ì‹¤í–‰í•˜ê²Œ ëœë‹¤.

```js
function a(){
    return 'a';
}
var b;
var c;

console.log(a) // f()
console.log(b) // undefined
console.log(c) // undefined

b = function bb(){
    return 'bb';
}
c = function() {
    return 'c';
}
```

í•¨ìˆ˜ ì„ ì–¸ë¬¸ì¸ aëŠ” í†µì§¸ë¡œ ì˜¬ë¼ê°„ ë°˜ë©´ì—, í•¨ìˆ˜í‘œí˜„ì‹(ë³€ìˆ˜ì— í•¨ìˆ˜ë¥¼ í• ë‹¹í•œ ê²ƒ)ì€ ë³€ìˆ˜ì˜ ì„ ì–¸ë§Œ ìœ„ë¡œ ì˜¬ë¼ê°€ê²Œ ëœë‹¤. ì¦‰, í• ë‹¹ì€ í˜¸ì´ìŠ¤íŒ…ì˜ ëŒ€ìƒì´ ì•„ë‹Œ ì„ ì–¸ë§Œ í˜¸ì´ìŠ¤íŒ…ì˜ ëŒ€ìƒì´ ëœë‹¤.

ì¦‰, ì„ ì–¸ê³¼ í• ë‹¹ì´ ë™ì‹œì— ìˆì„ ê²½ìš° ë¶„ë¦¬ê°€ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì„ ì–¸ë§Œ ìœ„ë¡œê°€ê³ , í• ë‹¹ì€ ê·¸ìë¦¬ì— ë‚¨ì•„ ìˆê²Œ ëœë‹¤.

### 2.2. í•¨ìˆ˜ ì„ ì–¸ì‹ê³¼ í•¨ìˆ˜ í‘œí˜„ì‹

ìœ„ì—ì„œ ë‹¤ë£¨ì—ˆë˜ ì½”ë“œë¥¼ ì‚´í´ë³´ì.

```js
//í•¨ìˆ˜ ì„ ì–¸ë¬¸ (function declartion)
function a(){
    return 'a';
}

//ê¸°ëª…(ìœ ëª…) í•¨ìˆ˜í‘œí˜„ì‹ (named function expression)
var b = function bb(){
    return 'bb';
}

//(ìµëª…) í•¨ìˆ˜í‘œí˜„ì‹ ((unnamed / annonymous) function expression)
var c = function() {
    return 'c';
}
```

ì˜ˆì „ì—ëŠ” ê¸°ëª… í•¨ìˆ˜í‘œí˜„ì‹ì˜ ì´ì ì´ ì»¸ë‹¤. ê·¸ ì´ìœ ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•  ë•Œ ì–´ë–¤ í•¨ìˆ˜ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆëŠ”ì§€ ì½˜ì†”ë¡œ ì¶œë ¥ì´ ë˜ê¸° ë•Œë¬¸ì— ë””ë²„ê¹…ì´ í¸í–ˆë‹¤.

í•˜ì§€ë§Œ, ìµœê·¼ì˜ ë¸Œë¼ìš°ì €ë“¤ì€ í•¨ìˆ˜ëª…ì´ ë¹„ì–´ìˆì„ ê²½ìš° ìë™ìœ¼ë¡œ ë³€ìˆ˜ëª…ì„ í•¨ìˆ˜ì˜ ì´ë¦„ìœ¼ë¡œ í• ë‹¹í•˜ê¸° ë•Œë¬¸ì— ë””ë²„ê¹…ì„ ìœ„í•´ì„œ ê¸°ëª…í•¨ìˆ˜ë¥¼ ì“°ëŠ”ì¼ì´ ê±°ì˜ ì—†ì–´ì¡Œë‹¤.

ìµëª… í•¨ìˆ˜í‘œí˜„ì‹ì´ ì„ ì–¸ë˜ê³  ì •ì˜ë˜ëŠ” ìˆœì„œë¥¼ ì‚´í´ë³´ì.

```js
var c = function() {
    return 'c';
}
```

1. ë³€ìˆ˜ cì„ ì–¸

   ```js
   var c
   ```

2. ìµëª…í•¨ìˆ˜ ì„ ì–¸

   ```js
   function() {
   	return 'c';
   }
   ```

3. **ì„ ì–¸ëœ ìµëª…í•¨ìˆ˜ë¥¼ ë³€ìˆ˜ cì— í• ë‹¹**

**í•¨ìˆ˜ ì„ ì–¸ë¬¸**ê³¼ **í•¨ìˆ˜ í‘œí˜„ì‹**ì˜ ê°€ì¥ í° ì°¨ì´ëŠ” **í• ë‹¹ì˜ ì—¬ë¶€**ì´ë‹¤. í•¨ìˆ˜ í‘œí˜„ì‹ì—ì„œ í• ë‹¹ì´ ì´ë£¨ì–´ì§€ê¸° ë•Œë¬¸ì— ìµëª…í•¨ìˆ˜ëŠ” í˜¸ì´ìŠ¤íŒ… ë˜ì§€ ì•Šê³ , ë³€ìˆ˜ cë§Œ í˜¸ì´ìŠ¤íŒ…ëœë‹¤.

**í•¨ìˆ˜ ì„ ì–¸ë¬¸ì€ í˜¸ì´ìŠ¤íŒ…ë•Œë¬¸ì— í° ë¬¸ì œë¥¼ ë‚³ê¸°ë„í•œë‹¤.**

ì•„ë˜ì˜ ì½”ë“œë¥¼ ì˜ˆë¡œ ë“¤ì–´ë³´ì.

```js
function sum(a, b) {
	return a + ' + ' + b + ' = ' + ( a + b );
}
sum(1, 2); // 3 (ì˜ë„ì¹˜ ì•Šì€ ê²°ê³¼)

/* ì—„ì²­ë‚œ ì¤„ì˜ ì½”ë“œ */

function sum(a, b) {
	return ( a + b );
}
sum(3, 4); // 7
```

ë§Œì•½ ì½”ë“œì˜ ì¤„ì´ ë„ˆë¬´ ë§ì•„ì„œ sumí•¨ìˆ˜ë¥¼ ì¤‘ë³µìœ¼ë¡œ í•¨ìˆ˜ ì„ ì–¸ë¬¸ì„ í†µí•´ ë§Œë“¤ì—ˆë‹¤ê³  ìƒê°í•´ë³´ì.

ë‘ í•¨ìˆ˜ëŠ” ëª¨ë‘ í˜¸ì´ìŠ¤íŒ…ì´ ë˜ì–´ ìœ„ë¡œ ì˜¬ë¼ê°€ì„œ ì„ ì–¸ì´ ë  ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ìºìŠ¤ì¼€ì´ë”© ì›ì¹™ì— ì˜í•´ ë‚˜ì¤‘ì— ì„ ì–¸ëœ í•¨ìˆ˜ê°€ ìµœì¢…ì ìœ¼ë¡œ sumí•¨ìˆ˜ê°€ ë  ê²ƒì´ë‹¤.

ì¦‰, ë¨¼ì € ì„ ì–¸ëœ í•¨ìˆ˜ì˜ ê¸°ëŠ¥ì€ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ ë˜ì–´ë²„ë¦°ë‹¤.

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **í•¨ìˆ˜ ì„ ì–¸ë¬¸ë³´ë‹¤ í•¨ìˆ˜ í‘œí˜„ì‹ì˜ ì‚¬ìš©ì´ ê¶Œì¥ëœë‹¤.** ì•„ë˜ì™€ ê°™ì´ í•¨ìˆ˜ í‘œí˜„ì‹ì„ ì‚¬ìš©í•œë‹¤ë©´ í•´ë‹¹ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤. í•¨ìˆ˜ í‘œí˜„ì‹ì€ ì•ˆì „í•˜ê³  ì˜ˆì¸¡ê°€ëŠ¥í•œ ì†ŒìŠ¤ë¥¼ ë§Œë“œëŠ”ë° ë„ì›€ì„ ì¤€ë‹¤.

```js
var sum = function (a, b) {
	return a + ' + ' + b + ' = ' + ( a + b );
}
sum(1, 2); //  '1 + 2 = 3'

/* ì—„ì²­ë‚œ ì¤„ì˜ ì½”ë“œ */

var sum = function (a, b) {
	return ( a + b );
}
sum(3, 4); // 7
```

> ES6ì—ì„œëŠ” ì´ëŸ¬í•œ ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì´ë‚˜ ì„±ëŠ¥ ìƒì˜ ì´ìœ ë¡œ, functionì´ë¼ëŠ” ë‹¨ì–´ë¥¼ ì“°ì§€ì•Šê³ ë„ í•¨ìˆ˜ë¥¼ ì„ ì–¸ í•  ìˆ˜ ìˆë„ë¡  ì—ë¡œìš° í‘ì…˜ì„ ë§Œë“¤ì—ˆë‹¤.

### 2.3. í•¨ìˆ˜ ìŠ¤ì½”í”„, ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸

- Scope : ìœ íš¨ë²”ìœ„ (ë³€ìˆ˜ì˜ ìœ íš¨ë²”ìœ„)

- Execution context : ì‹¤í–‰ë˜ëŠ” ì½”ë“œ ë©ì–´ë¦¬ (ì¶”ìƒì  ê°œë…)

ë‘˜ì˜ ê°€ì¥ í° ì°¨ì´ì ì€ ì•„ë˜ì™€ ê°™ë‹¤.

- **ìŠ¤ì½”í”„ëŠ” í•¨ìˆ˜ê°€ ì •ì˜ë  ë•Œ ê²½ì •ëœë‹¤.**

- **ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ëŠ” í•¨ìˆ˜ê°€ ìƒí–‰ ë  ë•Œ ìƒì„±ëœë‹¤.**

ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì—ëŠ” Variable Environment(ì‹ë³„ìë¥¼ ìŠ¤ëƒ…ìƒ· ì°ì–´ ë†“ì€ ê²ƒ), í˜¸ì´ìŠ¤íŒ…ëœ ì‹ë³„ì(ì§€ì—­ ë³€ìˆ˜, í•¨ìˆ˜), ìƒìœ„ ì»¨í…ìŠ¤íŠ¸,  this ë°”ì¸ë”©(thisê°€ ë¬´ì—‡ì¸ì§€ ì •í•´ì£¼ëŠ” ê²ƒ) ë“±ì˜ ì •ë³´ê°€ ë‹´ê¸°ê²Œ ëœë‹¤.

![image](https://user-images.githubusercontent.com/53181778/88471592-1ed29900-cf46-11ea-9094-03717cc44f0e.png)

ì½”ë“œë¥¼ ë³´ê³  ë‘˜ì˜ ì°¨ì´ë¥¼ ì•Œì•„ë³´ì.

ì•„ë˜ ì½”ë“œì˜ ê²°ê³¼ë¥¼ ì˜ˆì¸¡í•´ë³´ì.

```js
var a = 1;
function outer() {
    console.log(a);   // 1st

    function inner() {
        console.log(a)   // 2nd
        var a = 3;
    }

    inner();

    console.log(a);  // 3rd
}

outer();
console.log(a);   //4th
```

> ì¶œë ¥ :
>
> 1
>
> undefined
>
> 1
>
> 1

ìœ„ ì½”ë“œë¥¼ ì‚´í´ë³´ì.

ë¨¼ì € ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë  ë•Œ **ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë  ë•Œ this ë°”ì¸ë”©ê³¼ í˜¸ì´ìŠ¤íŒ…ì´ ìƒì„±ë¨ì„ ìœ ì˜**í•˜ë©° ì•„ë˜ ê³¼ì •ì„ ì‚´í´ë³´ì.

0. ì½”ë“œì˜ ì‹œì‘ê³¼ ë™ì‹œì— ì „ì—­ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ë¨¼ì € ìƒì„±ëœë‹¤. [scope : global]

   >  ì „ì—­ ì»¨í…ìŠ¤íŠ¸ ì‹œì‘

   â€‹	`ì „ì—­ ì»¨í…ìŠ¤íŠ¸ì— ëŒ€í•œ í˜¸ì´ìŠ¤íŒ… ì‹œì‘`

   1. ë³€ìˆ˜ a ì„ ì–¸
   2. í•¨ìˆ˜ outer ì„ ì–¸ [scope  : Global > outer]

   â€‹	`ì „ì—­ ì»¨í…ìŠ¤íŠ¸ì— ëŒ€í•œ í˜¸ì´ìŠ¤íŒ… ë`

   3. ë³€ìˆ˜ aì— 1ì„ í• ë‹¹

   4. outer í•¨ìˆ˜ í˜¸ì¶œ => outer ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìƒì„±

      > outer ì»¨í…ìŠ¤íŠ¸ ì‹œì‘

      `outer ì»¨í…ìŠ¤íŠ¸ì— ëŒ€í•œ í˜¸ì´ìŠ¤íŒ… ì‹œì‘`

       	5. í•¨ìˆ˜ inner ì„ ì–¸  [scope  : Global > outer > inner]

      `outer ì»¨í…ìŠ¤íŠ¸ì— ëŒ€í•œ í˜¸ì´ìŠ¤íŒ… ë`

      6. outer scopeì—ì„œ ë¨¼ì € aë¥¼ íƒìƒ‰ì„ í•˜ì§€ë§Œ aê°€ ì—†ê¸° ë•Œë¬¸ì— golobal scopeì—ì„œ aë¥¼ íƒìƒ‰í•œ í›„ 1ì„ ì¶œë ¥

      7. inner í•¨ìˆ˜ í˜¸ì¶œ => inner ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìƒì„±

         > inner ì»¨í…ìŠ¤íŠ¸ ì‹œì‘

         `inner ì»¨í…ìŠ¤íŠ¸ì— ëŒ€í•œ í˜¸ì´ìŠ¤íŒ… ì‹œì‘`

         8. ë³€ìˆ˜ a ì„ ì–¸

         `inner ì»¨í…ìŠ¤íŠ¸ì— ëŒ€í•œ í˜¸ì´ìŠ¤íŒ… ë`

         9. inner scopeì—ì„œ aë¥¼ íƒìƒ‰í•˜ì§€ë§Œ, ì„ ì–¸ë§Œ ì´ë£¨ì–´ì ¸ ìˆëŠ” ìƒíƒœì´ê¸° ë•Œë¬¸ì— undefinedê°€ ì¶œë ¥ëœë‹¤.
         10. inner scopeì˜ aì— 3ì„ í• ë‹¹

         > inner ì»¨í…ìŠ¤íŠ¸ ì¢…ë£Œ

      11. outer scopeì—ì„œ a íƒìƒ‰ -> global scopeì—ì„œ aíƒìƒ‰ -> 1ì¶œë ¥

      > outer ì»¨í…ìŠ¤íŠ¸ ì¢…ë£Œ

   12. global scopeì—ì„œ aíƒìƒ‰ -> 1ì¶œë ¥

   >  ì „ì—­ ì»¨í…ìŠ¤íŠ¸ ì¢…ë£Œ

### 2.4. ë©”ì†Œë“œ(Method)

í•¨ìˆ˜ì²˜ëŸ¼ ìƒê²¼ëŠ”ë° ì•ì— `.`ì´ ë¶™ì–´ ìˆìœ¼ë©´ ë©”ì†Œë“œë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.

í•¨ìˆ˜ì™€ ë©”ì†Œë“œì˜ ì°¨ì´ëŠ” this ë°”ì¸ë”©ì„ ì—¬ë¶€ì´ë‹¤.

`ê°ì²´.ë©”ì†Œë“œ()`ë¥¼ í•˜ê²Œ ë˜ë©´ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë  ë•Œ `this`ëŠ” `ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´`ê°€ ëœë‹¤.

ì•„ë˜ ì½”ë“œë¥¼ ì‚´í´ë³´ì.

```js
var obj = {
	a: 1,
    b: function bb(){
        console.log(this);
        //{a: 1, b: Æ’, c: Æ’}
    },
    c: function(){
        console.log(this.a)
        //1
    }
};
obj.b();
obj.c();

console.dir(obj.b);
//Æ’ bb()
console.dir(obj.c);
//Æ’ c()
```

> console.dirì€ ê°ì²´ë¥¼ ì¶œë ¥í•˜ì—¬ ë¶„ì„í•  ë•Œ ìœ ìš©í•˜ë‹¤. ê°ì²´ì˜ ë©”ì„œë“œë¥¼ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤.

![image](https://user-images.githubusercontent.com/53181778/88449791-c7202900-ce84-11ea-8a03-6461c5a27819.png)

### 2.5. ì½œë°± í•¨ìˆ˜ (Callback function)

ì½œë°± í•¨ìˆ˜ëŠ” callê³¼ backìœ¼ë¡œ ìª¼ê°œì„œ ìƒê°í•˜ë¼ ìˆ˜ ìˆë‹¤.

ë¬´ì–¸ê°€ê°€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ë’¤ ì–¸ì  ê°€ ì–´ë–»ê²Œë“  ë‚˜ì—ê²Œ ëŒë ¤ì¤„ ê²ƒì´ë‹¤. ì¦‰, ì½œë°±í•¨ìˆ˜ì˜ ì œì–´ê¶Œì„ ì–´ë–¤ ëŒ€ìƒì—ê²Œ ë„˜ê²¨ì¤€ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

ì˜ˆì‹œë¥¼ í†µí•´ ì‚´í´ë³´ì.

```js
setInterval(function () {
    console.log('1ì´ˆë§ˆë‹¤ ì‹¤í–‰ë  ê²ë‹ˆë‹¤.');
}, 1000);
```

> setIntervalì€ ì£¼ê¸°í•¨ìˆ˜ë¡œ, ì¼ì •ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ì¸ìë¡œ ë°›ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì¤€ë‹¤.
>
> `setInterval(ì½œë°±í•¨ìˆ˜, ì£¼ê¸°(ms));`
>
> `setInterval`í•¨ìˆ˜ëŠ” ì£¼ê¸°ë§ˆë‹¤ ì½œë°±í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì£¼ëŠ” í•¨ìˆ˜ë¡œ ì •ì˜ë˜ì–´ ìˆë‹¤.

ìœ„ ì½”ë“œëŠ” 1ì´ˆë§ˆë‹¤ ì½œë°±í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ê²ƒì´ë‹¤. ì¦‰ ì½œë°±í•¨ìˆ˜ì˜ ì œì–´ê¶Œì€ SetIntervalì´ ê°€ì ¸ê°€ê²Œ ë˜ê³ , ì‹¤í–‰ê²°ê³¼ë¥¼ ëŒë ¤ì£¼ê²Œ ëœë‹¤.

```js
var cb = function () {
    console.log('1ì´ˆë§ˆë‹¤ ì‹¤í–‰ë  ê²ë‹ˆë‹¤.')
};

setInterval(cb, 1000);
//cbê°€ ì½œë°±í•¨ìˆ˜ê°€ ë˜ëŠ” ê²ƒì´ë‹¤.
```

ë‹¤ë¥¸ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì. (forEach)

```js
var arr = [1, 2, 3, 4, 5];
var entries = [];
arr.forEach(function(v, i) {
    entries.push([i, v, this[i]]);
},[10, 20, 30, 40, 50]);
console.log(entries);
//[[0, 1, 10], [1, 2, 20], [2, 3, 30], [3, 4, 40], [4, 5, 50]]
```

> forEachë¥¼ í†µí•´ arrë°°ì—´ì„ ìˆœíšŒí•˜ë©´ì„œ ì½œë°±í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ìˆë‹¤. ê·¸ë¦¬ê³ , thisëŠ” [10, 20, 30, 40 , 50]ìœ¼ë¡œ í•´ì£¼ë„ë¡ í•˜ê³  ìˆë‹¤.
>
> ì—¬ê¸°ì„œ ì½œë°±í•¨ìˆ˜ëŠ” ì•„ë˜ í•¨ìˆ˜ì´ë‹¤.
>
> indexì™€ valueì™€ thisì˜ ê°’ë“¤ì„ ë°°ì—´ë¡œ ë§Œë“¤ì–´ ì›ì†Œë¡œ ë„£ì–´ì¤€ë‹¤.
>
> ```js
> function(v, i) {
>     entries.push([i, v, this[i]]);
> }
> ```

forEach ë©”ì†Œë“œì— ì²«ë²ˆì§¸ ì¸ìë¡œ ì½œë°±í•¨ìˆ˜ë¥¼ ë„˜ê²¨ì£¼ê³ , ë‘ë²ˆì§¸ ì¸ìë¡œ thisë¡œ ì¸ì‹í•  ëŒ€ìƒ(ìƒëµê°€ëŠ¥)ì„ ë„£ì–´ì¤€ë‹¤.

forEachë¥¼ ì§ì ‘ êµ¬í˜„í•´ë³´ë©´ ì´ëŸ° í˜•íƒœê°€ ë  ê²ƒì´ë‹¤.

```js
Array.prototype.forEach = function(callback, thisArg) {
    var self = thisArg || this;
    for(var i = 0; i < this.length; i++){
        callback.call(self, this[i], i, this);
    }
}
```

> selfë¼ëŠ” ë³€ìˆ˜ì—ëŠ” thisArgì˜ ê°’ì´ ìˆìœ¼ë©´ í•´ë‹¹ ë°°ì—´ì„ ë„£ê³ , ì—†ë‹¤ë©´, ForEachë¥¼ í˜¸ì¶œí•œ ë°°ì—´(this)ì„ ë„£ëŠ”ë‹¤.
>
> callbackí•¨ìˆ˜ë¥¼ callì´ë¼ëŠ” ë©”ì„œë“œë¥¼ í†µí•´ í˜¸ì¶œí•˜ëŠ”ë°, í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë•Œ `this ë°”ì¸ë”©ì„ self`ë¡œ í•˜ê²Œë˜ê³ , `this, this[i], i`ëŠ” ì¸ìë¡œ ì „ë‹¬ëœë‹¤.

ìœ„ í•¨ìˆ˜ë¥¼ ë³´ê²Œëœë‹¤ë©´ ì½œë°±ì„ ì–´ë–¤ íƒ€ì´ë°ì— ì–´ë–¤ í˜•íƒœë¡œ ì •ì˜í•˜ê³ , ë§¤ê°œë³€ìˆ˜ë¡œ ì–´ë–¤ ìˆœì„œë¡œ ì „ë‹¬í• ì§€ ì •í•´ì£¼ëŠ” ê²ƒê¹Œì§€ ì „ì ìœ¼ë¡œ `forEachë¼ëŠ” ë©”ì„œë“œê°€ ê²°ì •`í•œë‹¤. ì¦‰, forEachê°€ ì •í•´ë†“ì€ ê·œì¹™ì„ ë”°ë¥´ê²Œ ëœë‹¤.

ë‹¤ë¥¸ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì. (DOMê°ì²´ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬)

```js
document.body,innterHTML = '<div id="a">abc</div>';
function cbFunc(x){
    console.log(this, x);
}

document.getElementById('a').addEventListener('click', cbFunc);

//ì¶œë ¥
//this : <div id="a">abc</div>
//x : MouseEvent ê°ì²´
```

> idê°€ aì¸ ê°ì²´ë¥¼ í´ë¦­í•˜ë©´, ì½œë°±í•¨ìˆ˜(cbFunc)ê°€ ì‹¤í–‰ì´ ëœë‹¤.

ë”°ë¡œ this ë°”ì¸ë”©ì„ í•´ì£¼ì§€ ì•Šì•˜ì§€ë§Œ, addEventListener ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ this ë°”ì¸ë”©ì„ í•´ì¤€ ê²ƒì´ë‹¤. ê·¸ë¦¬ê³ , xë„ ë§ˆì°¬ê°€ì§€ë¡œ addEventListener ì—ì„œ ìë™ìœ¼ë¡œ ë§ˆìš°ìŠ¤ì´ë²¤íŠ¸ ê°ì²´ë¥¼ ë‹´ì•„ì¤€ ê²ƒì´ë‹¤.

- ì½œë°±í•¨ìˆ˜ì˜ íŠ¹ì„±
  - ë‹¤ë¥¸ í•¨ìˆ˜(A)ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ì½œë°± í•¨ìˆ˜(B)ë¥¼ ì „ë‹¬í•˜ë©´, Aê°€ Bì˜ ì œì–´ê¶Œì„ ê°–ê²Œ ëœë‹¤.
  - (íŠ¹ë³„í•œ ìš”ì²­(bind)ê°€ ì—†ëŠ” í•œ) Aì— ë¯¸ë¦¬ ì •í•´ì§„ ë°©ì‹ì— ë”°ë¼ Bë¥¼ í˜¸ì¶œí•œë‹¤.
    - thisì— ë¬´ì—‡ì„ ë°”ì¸ë”© í•  ì§€,
    - ë§¤ê°œë³€ìˆ˜ëŠ” ì–´ë–¤ ê°’ë“¤ì„ ì–´ë–¤ ìˆœì„œë¡œ ê°€ì§€ëŠ”ì§€
    - ì–´ë–¤ íƒ€ì´ë°ì— ì½œë°±ì„ í˜¸ì¶œí• ì§€

- **ì£¼ì˜í•  ì **

  callback í•¨ìˆ˜ëŠ” `í•¨ìˆ˜`ì´ë‹¤!. (`ë©”ì†Œë“œ`ê°€ ì•„ë‹ˆë‹¤!)

  ```js
  var arr = [1, 2, 3];
  var obj = {
      vals: [1, 2, 3],
      logValues: function(v, i){
          if(this.vals){
              console.log(this.vals, v, i);
          } else {
              console.log(this, v, i);
          }
      }
  };

  obj.logValues(1, 2);
  // [1, 2, 3] 1 2
  arr.forEach(obj.logValues);
  // window {} 1 0
  // window {} 2 1
  // window {} 3 2
  ```

  - obj.logValues(1, 2); ëŠ” this.valsê°€ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— `console.log(this.vals, v, i);` ë¥¼ ì˜ ì¶œë ¥í–ˆë‹¤.
  - ë‹¤ë§Œ, `arr.forEach(obj.logValues);` ì—ì„œëŠ” forEachë¡œ logValues ë©”ì†Œë“œê°€ ì•„ë‹Œ ë§¤ì¹­ëœ í•¨ìˆ˜ë§Œ ì „ë‹¬ ëœ ê²ƒì´ê¸° ë•Œë¬¸ì—, thisì—ëŠ” window ê°ì²´ê°€ ìˆê²Œ ë˜ì–´ `console.log(this, v, i);` ì½”ë“œê°€ ì‹¤í–‰ëœë‹¤.

## 3. this

this ë°”ì¸ë”©ì€ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ê°€ í™œì„±í™” ë  ë•Œ ëœë‹¤. (ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ì£¼ì²´ != this ì„ì„ ì£¼ì˜)

ì—¬ëŸ¬ ìƒí™©ì—ì„œ thisê°€ ë¬´ì—‡ì„ ê°€ë¥´í‚¤ëŠ”ì§€ ì‚´í´ë³´ì.

- ì „ì—­ê³µê°„ì—ì„œ
  - ì „ì—­ ê°ì²´ : `window` ë˜ëŠ” `global`
- í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ
  - ê¸°ë³¸ì ìœ¼ë¡œ ì „ì—­ ê°ì²´ : `window` ë˜ëŠ” `global`
- ë©”ì†Œë“œ í˜¸ì¶œì‹œ
  - ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ì£¼ì²´
- callbackì—ì„œ
  - ê¸°ë³¸ì ìœ¼ë¡œëŠ” í•¨ìˆ˜ë‚´ë¶€ì—ì„œì™€ ë™ì¼
- ìƒì„±ì í•¨ìˆ˜ì—ì„œ
  - ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.

### 3.1 ì „ì—­ê³µê°„ì—ì„œ this

ì „ì—­ê³µê°„ì—ì„œ thisëŠ” ì „ì—­ ê°ì²´ë¥¼ ì˜ë¯¸í•œë‹¤.

ì¦‰, ë¸Œë¼ìš°ì € consoleì—ì„œëŠ” `window`ê°ì²´ê°€ ë˜ê³ , node.jsì—ì„œëŠ” `global` ê°ì²´ê°€ ëœë‹¤.

### 3.2. í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ this

**ê¸°ë³¸ì ìœ¼ë¡œ** í•¨ìˆ˜ë‚´ë¶€ì—ì„œ thisë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ì „ì—­ ê°ì²´ë¥¼ ì˜ë¯¸í•˜ê²Œ ëœë‹¤.

```js
function a(){
    console.log(this);
}
a();
//ì „ì—­ê°ì²´ ì¶œë ¥

function b(){
    function c(){
        console.log(this);
    }
    c
}
b();
//ì „ì—­ê°ì²´ ì¶œë ¥

var d = {
    e: function (){
        function f(){
            console.log(this);
        }
        f();
    }
}
d.e();
//ì „ì—­ê°ì²´ ì¶œë ¥ (dê°€ ì¶œë ¥ë˜ì§€ ì•ŠëŠ” ê²ƒì— ìœ ì˜!)
//ì‹¤ì œ ì¶œë ¥ë˜ëŠ” ë¶€ë¶„ì€ f(); í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤.
```

> ìœ„ ì½”ë“œì˜ ëª¨ë“  thisëŠ” ì „ì—­ê°ì²´ì´ë‹¤.

### 3.3. ë©”ì†Œë“œ í˜¸ì¶œ ì‹œ this

```js
var a = {
    b: function(){
        console.log(this);
    }
}
a.b();
//aê°ì²´ê°€ ì¶œë ¥ëœë‹¤.

var a = {
    b: {
        c: function(){
            console.log(this);
        }
    }
}
a.b.c();
//bê°ì²´ê°€ ì¶œë ¥ëœë‹¤.
```

> ë©”ì†Œë“œëª… ë°”ë¡œ ì•ì—ìˆëŠ” ê°ì²´ê°€ thisê°€ ëœë‹¤.

**ì•ì„œ ì„¤ëª…í•¨ í•¨ìˆ˜ëŠ” `ì „ì—­ê°ì²´`ì˜ ë©”ì†Œë“œ ë¼ê³  ìƒê°í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.** ì¦‰, ì•ì— ì•„ë¬´ê²ƒë„ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ë¼ë©´ ì „ì—­ê°ì²´ì˜ ë©”ì†Œë“œë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. window.í•¨ìˆ˜() ì—ì„œ window.ì´ ìƒëµë˜ì—ˆë‹¤ê³  ìƒê°í•˜ì. (ë˜ëŠ” global.)

- ë‚´ë¶€í•¨ìˆ˜ì—ì„œì˜ ìš°íšŒë²•

  ```js
  var a = 10;
  var obj = {
      a: 20,
      b: function(){
          console.log(this.a); //20

          function c(){
              console.log(this.a); //10
          }
          c();
      }
  }
  obj.b();
  ```

  ë§Œì•½ ìœ„ ì½”ë“œì—ì„œ function cì—ì„œ obj.aë¥¼ í‘œí˜„í•˜ê³  ì‹¶ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? ë³€ìˆ˜ë¥¼ ì„ ì–¸í•´ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

  ```js
  var a = 10;
  var obj = {
      a: 20,
      b: function(){
          var self = this;
          console.log(this.a); //20

          function c(){
              console.log(self.a); //20
          }
          c();
      }
  }
  obj.b();
  ```

  selfë¼ëŠ” ë³€ìˆ˜ì— thisë¥¼ ë‹´ì•„ obj.aë¥¼ cí•¨ìˆ˜ì—ì„œë„ í‘œí˜„ í•  ìˆ˜ ìˆë‹¤.

### 3.4. callback í•¨ìˆ˜ì—ì„œ this

ê¸°ë³¸ì ìœ¼ë¡œëŠ” **í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ**ì™€ ë™ì¼í•˜ë‹¤.

ê·¸ì „ì— ë¨¼ì € call, apply, bindë¥¼ ì‚´í´ë³´ì.

```js
function a(x, y, z){
    console.log(this, x, y, z);
}
var b = {
    c: 'eee';
};

a.call(b, 1, 2, 3);

a.apply(b, [1, 2, 3]);

var c = a.bind(b);
c(1, 2, 3);

var d = a.bind(b, 1, 2);
d(3);
```

ì¶œë ¥ì€ 4ê°€ì§€ì˜ ê²½ìš°ê°€ ëª¨ë‘ ë™ì¼í•˜ë‹¤.

ê°ê°ì˜ api ë¬¸ì„œë¥¼ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

`func.call(thisArg[, arg1,[, arg2[, ...] ] ])`

`func.apply(thisArg, [argsArray])`

`func.bind(thisArg[, arg1,[, arg2[, ...] ] ])`

- thisArg : ëª¨ë‘ ê°€ì§€ê³  ìˆëŠ” ì¸ìë¡œ, funcê°€ ì‹¤í–‰ë  ë•Œ thisë¥¼ thisArgë¡œ ë°”ì¸ë”© ë˜ë„ë¡ ëª…ì‹œí•œë‹¤.

- callì€ ë‘ ë²ˆì§¸ ì¸ìë¶€í„° ë¬´í•œì˜ ì¸ìë¥¼ ì¤„ ìˆ˜ ìˆë‹¤.
- applyëŠ” ë‘ ë²ˆì§¸ ì¸ìì— ë°°ì—´í•˜ë‚˜ë¥¼ ì¤€ë‹¤.
- callê³¼ applyëŠ” ì¦‰ì‹œ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
- bindëŠ” ì¦‰ì‹œ í˜¸ì¶œë˜ì§€ ì•Šê³ , ì¸ìê°€ ì €ì¥ëœ ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜í•œë‹¤. (currying)

ì´ì œ ë‹¤ì‹œ ì½œë°±í•¨ìˆ˜ë¡œ ëŒì•„ê°€ì„œ thisë¥¼ ì‚´í´ë³´ì.

```js
var callback = function() {
	console.dir(this);
}
var obj = {
    a: 1,
    b: function(cb) {
        cb();
    }
};
obj.b(callback);
```

- objì˜ bë©”ì„œë“œëŠ” ì½œë°±í•¨ìˆ˜ë¥¼ ë°›ì•„ ê·¸ëŒ€ë¡œ ì‹¤í–‰í•˜ëŠ” ë©”ì„œë“œì´ë‹¤.
- ìœ„ì˜ ê²½ìš° thisëŠ” ì „ì—­ê°ì²´ê°€ ë  ê²ƒì´ë‹¤. ì´ê²ƒì´ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œì˜ thisì™€ ê¸°ë³¸ì ìœ¼ë¡œ ê°™ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

ë§Œì•½ call,apply,bindë¡œ ì½œë°±í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ thisë¥¼ ë‹¤ë¥¸ê²ƒìœ¼ë¡œ ëª…ì‹œí•œë‹¤ë©´ ì–˜ê¸°ê°€ ë‹¬ë¼ì§„ë‹¤.

```js
var callback = function() {
	console.dir(this);
}
var obj = {
    a: 1,
    b: function(cb) {
        cb.call(this);
    }
};
obj.b(callback);
```

- ìœ„ì—ì„œ thisëŠ” objê°ì²´ê°€ ëœë‹¤.

setTimeoutì˜ ê²½ìš° thisë¥¼ ë³„ë„ë¡œ ë°”ì¸ë”©í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì— ì•„ë˜ì˜ ê²½ìš° thisëŠ” ì „ì—­ê°ì²´ì— í•´ë‹¹í•œë‹¤.

```js
var callback = function() {
	console.dir(this);
};
var obj = {
	a: 1
};
setTimeout(callback, 100);
```

ë§Œì•½, thisë¥¼ objë¡œ ë°”ê¾¸ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ë°”ê¾¸ì–´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```js
var callback = function() {
	console.dir(this);
};
var obj = {
	a: 1
};
setTimeout(callback.bind(obj), 100);
```

thisë¥¼ objë¡œ ë°”ì¸ë”©í•œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ ì¸ìë¡œ ì „ë‹¬í•´ ì¤€ ê²ƒì´ë‹¤.

ë˜í•œ ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.

```js
document.body,innterHTML = '<div id="a">abc</div>';

function cbFunc(x){
    console.log(this, x);
}

var obj = {a: 1}

document.getElementById('a').addEventListener('click', cbFunc.bind(obj));

//ì¶œë ¥
//this : {a: 1}
//x : MouseEvent ê°ì²´
```

ì½œë°±í•¨ìˆ˜ì˜ thisë¥¼ ì •ë¦¬ë¥¼ í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

- ê¸°ë³¸ì ìœ¼ë¡œ í•¨ìˆ˜ì˜ thisì™€ ê°™ë‹¤.
- ì œì–´ê¶Œì„ ê°€ì§„ í•¨ìˆ˜ê°€ callbackì˜ thisë¥¼ ëª…ì‹œí•œ ê²½ìš° ê·¸ì— ë”°ë¥¸ë‹¤.
- ê°œë°œìê°€ thisë¥¼ ë°”ì¸ë”©í•œ ì±„ë¡œ callbackì„ ë„˜ê¸°ë©´ ê·¸ì— ë”°ë¥¸ë‹¤.

### 3.5. ìƒì„±ìí•¨ìˆ˜ì—ì„œ this

ìƒì„±ìí•¨ìˆ˜ë¡œ ìƒì„±ëœ ê°ì²´ì—ì„œì˜ thisëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.

```js
function Person(n, a){
	this.name = n;
	this.age = a;
}
var gomugom =  new Person('ê³ ë¬´ê³°', 30);
console.log(gomugom);
```

## 4. í´ë¡œì €(Closure)

### 4.1. í´ë¡œì €ì˜ ì •ì˜

í´ë¡œì €ëŠ” í•¨ìˆ˜ì™€ í•¨ìˆ˜ì˜ **ì„ ì–¸**ë  ë‹¹ì‹œì˜ í™˜ê²½ ì •ë³´ì˜ ì¡°í•©ì´ë‹¤.

> lexical environment : ì„ ì–¸ ë‹¹ì‹œì˜ í™˜ê²½ì— ëŒ€í•œ ì €ë³´ë¥¼ ë‹´ëŠ” ê°ì²´(êµ¬ì„± í™˜ê²½)

ì„ ì–¸ë  ë‹¹ì‹œ í™˜ê²½ì •ë³´ëŠ” Scopeì™€ ë°€ì ‘í•˜ê²Œ ê´€ë ¨ì´ ìˆë‹¤.

scopeëŠ” ë³€ìˆ˜ì˜ ìœ íš¨ë²”ìœ„ì´ê³ , í´ë¡œì €ëŠ” ê·¸ ìœ íš¨ë²”ìœ„ë¡œ ì¸í•œ ìƒíƒœë¡œ ë³´ë©´ëœë‹¤.

í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ìƒì„±í•œ ë°ì´í„°ì™€ ê·¸ ìœ íš¨ë²”ìœ„ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” íŠ¹ìˆ˜í•œ `í˜„ìƒ/ìƒíƒœ`ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.

closure : íì‡„ì„±, ë‹«í˜€ìˆìŒ => í´ë¡œì €ì—ì„œ ë‚´ë¶€ì˜ ì •ë³´ë¥¼ ë°–ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì€ `return`ì„ ì´ìš©í•˜ëŠ” ê²ƒ ë¿ì´ë‹¤.

í´ë¡œì €ì—ì„œ í•¨ìˆ˜ë¥¼ ë¦¬í„´í•œë‹¤ê³  í•´ë„, ë°˜í™˜ëœ í•¨ìˆ˜ì—ì„œëŠ” scope ë° lexical environments(ì§€ì—­ ë³€ìˆ˜, ìƒìœ„ ì»¨í…ìŠ¤íŠ¸ ì°¸ì¡°)ëŠ” ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤.

![image](https://user-images.githubusercontent.com/53181778/88472583-5a259580-cf4f-11ea-8abb-1b21fe987b08.png)

ì»¨í…ìŠ¤íŠ¸ Aì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ aë¥¼ ì°¸ì¡°í•˜ëŠ” ë‚´ë¶€ë³€ìˆ˜ Bë¥¼ Aì˜ ì™¸ë¶€ë¡œ ì „ë‹¬í•  ê²½ìš° Aê°€ ì¢…ë£Œëœ ì´í›„ì—ë„ aê°€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ” í˜„ìƒì„ í´ë¡œì €ë¼ í•œë‹¤.

![image](https://user-images.githubusercontent.com/53181778/88472652-4464a000-cf50-11ea-9ddb-57538b8ec0e2.png)

- **ì§€ì—­ë³€ìˆ˜ê°€ í•¨ìˆ˜ ì¢…ë£Œ í›„ì—ë„ ì‚¬ë¼ì§€ì§€ ì•Šê²Œ í•  ìˆ˜ ìˆë‹¤.**



í´ë¡œì €ë¥¼ ì˜ í™œìš©í•˜ë©´, ì•„ë˜ì˜ ì´ì ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.

1. ì ‘ê·¼ ê¶Œí•œ ì œì–´
2. ì§€ì—­ë³€ìˆ˜ ë³´í˜¸
3. ë°ì´í„° ë³´ì¡´ ë° í™œìš©

ì˜ˆì‹œë¡œ ì ‘ê·¼ ê¶Œí•œ ì œì–´ì™€ ì§€ì—­ë³€ìˆ˜ ë³´í˜¸ë¥¼ ì‚´í´ë³´ì.

```js
function a() {
    var x = 1;
    function b() {
        console.log(x);
    };
    b();
}
a();
console.log(x); // ì—ëŸ¬
```

- í•¨ìˆ˜ aì˜ ë‚´ë¶€ì— ë˜ ë‹¤ë¥¸ ìŠ¤ì½”í”„ í•¨ìˆ˜ bê°€ ì„ ì–¸ë˜ì–´ ìˆë‹¤.
- xë³€ìˆ˜ì— ëŒ€í•´ì„œ aì™€ b í•¨ìˆ˜ì˜ ìŠ¤ì½”í”„ì—ì„œëŠ” ì ‘ê·¼í•  ìˆ˜ ìˆì§€ë§Œ, aì˜ ì™¸ë¶€ì—ì„œëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.

ìœ„ ì˜ˆì œë¥¼ ì¡°ê¸ˆ ìˆ˜ì •í•˜ë©´ ë°ì´í„° ë³´ì¡´ ë° í™œìš©ì— ì“°ì¼ ìˆ˜ ìˆë‹¤.

```js
function a() {
    var x = 1;
    return function b() {
        console.log(x);
    };
}
var c = a();
c();
```

- aì—ì„œ bí•¨ìˆ˜ë¥¼ ë°˜í™˜í–ˆê³ ,  cì— í• ë‹¹í•´ ì£¼ì—ˆë‹¤.
- cë¼ëŠ” ë³€ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ì™¸ë¶€ì—ì„œë„ xì˜ ê°’ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.
- í•˜ì§€ë§Œ, ì™¸ë¶€ì—ì„œ xì˜ ê°’ì„ ë³€ê²½í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.

ìœ„ ì½”ë“œì— ì ‘ê·¼ ê¶Œí•œì„ ì œì–´í•˜ê¸°ìœ„í•´ getterì™€ setterë¥¼ ë§Œë“¤ì–´ë³´ì.

```js
function a() {
    var _x = 1;
    return {
        get x() { return _x; },
        set x(v) { _x = v; }
    };
}
var c = a();
c.x = 10;
console.log(c.x) //10
```

- ì´ì œ ì™¸ë¶€ì—ì„œ c.xì˜ ê°’ì— ì ‘ê·¼ í•  ìˆ˜ ìˆë‹¤.

###  4.2. í´ë¡œì €ì˜ í™œìš© : Private member ë§Œë“¤ê¸°

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ëŠ” íƒœìƒì ìœ¼ë¡œ private ë³€ìˆ˜ë¥¼ ì œê³µí•˜ì§€ ì•Šì§€ë§Œ, í´ë¡œì €ë¥¼ ì´ìš©í•˜ì—¬ í‰ë‚´ë¥¼ ë‚¼ ìˆ˜ ìˆë‹¤.

Private memberë¥¼ ë§Œë“¤ëŠ” ê²ƒì€ ì™¸ë¶€ë¡œë¶€í„°ì˜ ì ‘ê·¼ì„ ì œí•œí•˜ê¸°ë„ í•˜ì§€ë§Œ ì „ì—­ìŠ¤ì½”í”„ì˜ ë³€ìˆ˜ë¥¼ ìµœì†Œí™”í•˜ëŠ”ë° ë„ì›€ì´ ë˜ê¸°ë„í•œë‹¤.

ê²Œì„ì„ ë§Œë“¤ì–´ë³´ì.

- ìë™ì°¨ ê²Œì„
  - ì°¨ëŸ‰ë³„ë¡œ ì—°ë£ŒëŸ‰ ë° ì—°ë¹„ëŠ” ëœë¤
  - ìœ ì €ë³„ë¡œ ì°¨ëŸ‰ í•˜ë‚˜ì”© ê³ ë¥´ë©´ ê²Œì„ ì‹œì‘
  - ê° ìœ ì €ëŠ” ìì‹ ì˜ í„´ì— ì£¼ì‚¬ìœ„ë¥¼ êµ´ë ¤ ëœë¤í•˜ê²Œ ë‚˜ì˜¨ ìˆ«ìë§Œí¼ ì´ë™
  - ë§Œì•½ ì—°ë£Œê°€ ë¶€ì¡±í•˜ë©´ ì´ë™ ë¶ˆê°€
  - ê°€ì¥ ë©€ë¦¬ ê°„ ì‚¬ëŒì´ ìŠ¹ë¦¬

```js
var car = {
    fuel: 10,  //ì—°ë£Œ (l)
    power: 2,  //ì—°ë¹„ (km/l)
    total: 0,
    run: function(km){
        var wasteFuel = km / this.power;
        if(this.fule < wasteFuel) {
            console.log('ì´ë™ ë¶ˆê°€');
            return;
        }
        this.fuel -= wasteFuel;
        this.total += km;
    }
};
```

í•˜ì§€ë§Œ ì´ë ‡ê²Œ ëœë‹¤ë©´ ì™¸ë¶€ì—ì„œ car.powerë‚˜ car.fuleì— ì ‘ê·¼ì´ ê°€ëŠ¥í•´ì„œ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

ì¡°ê¸ˆë” ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ì„œ ë©¤ë²„ë¥¼ ë³´í˜¸í•  í•„ìš”ê°€ ìˆë‹¤.

```js
var createCar = function(f, p){
    var fuel= f;  //ì—°ë£Œ (l)
    var power= p;  //ì—°ë¹„ (km/l)
    var total= 0;
    return {
        run: function(km){
            var wasteFuel = km / power;
            if(fule < wasteFuel) {
                console.log('ì´ë™ ë¶ˆê°€');
                return;
            }
            fuel -= wasteFuel;
            total += km;
        }
    }
};

var car = createCar(10, 2);
```

ì´ëŸ°ì‹ìœ¼ë¡œ runì´ë¼ëŠ” ë©”ì„œë“œë§Œ ì™¸ë¶€ë¡œ ë…¸ì¶œì‹œí‚¤ê²Œ ë˜ë©´ ì‚¬ìš©ìê°€ ì„ì˜ë¡œ ê°’ì„ ë³€ê²½í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•´ì§„ë‹¤.

1. í•¨ìˆ˜ì—ì„œ **ì§€ì—­ë³€ìˆ˜ ë° ë‚´ë¶€í•¨ìˆ˜ ë“±ì„ ìƒì„±**í•œë‹¤.

2. **ì™¸ë¶€ì— ë…¸ì¶œì‹œí‚¤ê³ ì í•˜ëŠ” ë©¤ë²„ë“¤ë¡œ êµ¬ì„±ëœ ê°ì²´ë¥¼ return** í•œë‹¤.

   => returní•œ ê°ì²´ì— í¬í•¨ë˜ì§€ ì•Šì€ ë©¤ë²„ë“¤ì€ privateí•˜ë‹¤.

   => returní•œ ê°ì²´ì— í¬í•¨ëœ ë©¤ë²„ë“¤ì€ publicí•˜ë‹¤.

> í´ë¡œì €ëŠ” ê°ì²´ì§€í–¥ ë¿ë§Œ ì•„ë‹ˆë¼, í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì˜ ì»¤ë§ì—ë„ ê°œë…ì´ í™œìš©ëœë‹¤.

## 5. í”„ë¡œí† íƒ€ì… (Prototype)

### 5.1. prototype, constructor, \__proto__

ìƒì„±ì í•¨ìˆ˜(constructor)ê°€ ìˆì„ ë•Œ, new ì—°ì‚°ìë¥¼ í†µí•´ instanceë¥¼ ë§Œë“ ë‹¤.

ì´ë•Œ, ìƒì„±ì í•¨ìˆ˜(constructor)ì˜ prototypeì´ë¼ëŠ” propertyê°€ instanceì˜ \__proto__ë¼ëŠ” propertyì— ì „ë‹¬ëœë‹¤.

ì¦‰, ìƒì„±ì í•¨ìˆ˜ì˜ prototypeê³¼ ì¸ìŠ¤í„´ìŠ¤ì˜ \__proto__ëŠ” ê°™ì€ ê°ì²´ë¥¼ ì°¸ì¡°í•œë‹¤.

![image](https://user-images.githubusercontent.com/53181778/88458171-18510c80-cec7-11ea-8baf-9542bdb6d065.png)

ê·¸ëŸ°ë°, \__proto__ëŠ” ë‚´ë¶€ propertyì— ì ‘ê·¼í•  ë•Œ ìƒëµì´ ê°€ëŠ¥í•´ì„œ, ì•„ë˜ì²˜ëŸ¼ ë™ì‘í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ ë³´ì¸ë‹¤.

![image](https://user-images.githubusercontent.com/53181778/88458222-809fee00-cec7-11ea-9eab-d55c9c212bc4.png)

êµ¬ì²´ì ì¸ ì˜ˆì‹œë¡œ ì‚´í´ë³´ì.

`[1, 2, 3]`ì´ë¼ëŠ” ë°°ì—´ì„ ìƒì„±í•˜ë©´, ì´ê²ƒì€ **Array ìƒì„±ì í•¨ìˆ˜**ë¡œ ë§Œë“¤ì–´ì§„ ì¸ìŠ¤í„´ìŠ¤ê°€ ëœë‹¤.

Arrayì—ëŠ” from(), isArray(), of(), arguments, length, name, **prototype** ë“±ì˜ í”„ë¡œí¼í‹°ê°€ ì¡´ì¬í•œë‹¤. `console.dir(Array)`

ì´ ì¤‘ prototypeì´ë¼ëŠ” í”„ë¡œí¼í‹°ê°€, `[1, 2, 3]`ì¸ìŠ¤í„´ìŠ¤ì˜ \__proto__ í”„ë¡œí¼í‹°ì— ì—°ê²°ë˜ì–´ ìˆë‹¤.

ê·¸ë¦¬ê³  protorype í”„ë¡œí¼í‹°ëŠ” object(ê°ì²´)ë¡œ ì—¬ëŸ¬ê°€ì§€ ë©”ì„œë“œë“¤(constructor, concat, filter, forEach, map, push,  pop ë“±)ì´ ë‹´ê²¨ ìˆë‹¤.

ì•„ë˜ ë˜ ë‹¤ë¥¸ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì.

constructorëŠ” ëª¨ë“£ ìƒì„±ìí•¨ìˆ˜ì˜ prototypeì— ì¡´ì¬(ì¦‰, \__proto__ í”„ë¡œí¼í‹°ì—ë„ ì¡´ì¬)í•˜ëŠ” ë©”ì„œë“œë¡œ, ë™ì¼í•œ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

```js
function Person(n, a){
	this.name = n;
    this.age = a;
}

var gomu = new Person('ê³ ë¬´ê³°', 30);

var gomuClone1 = new gomu.__proto__.constructor('ê³ ë¬´ê³°_í´ë¡ 1', 10);
var gomuClone2 = new gomu.constructor('ê³ ë¬´ê³°_í´ë¡ 2', 20);

var gomuProto = new Object.getPrototype(gomu);

var gomuClone3 = new gomuProto.constructor('ê³ ë¬´ê³°_í´ë¡ 3', 30);
var gomuClone4 = new Person.protype.constructor('ê³ ë¬´ê³°_í´ë¡ 4', 40);
```

- í”„ë¡œí† íƒ€ì…(í”„ë¡œí† ) ì ‘ê·¼ ë°©ë²• 4ê°€ì§€

  `[instance]` <= `gomu.ë©”ì„œë“œ`

  `[instance].__proto__` <= `gomu.__proto__.ë©”ì„œë“œ`

  `Object.getPrototype(instance) ` <= `Object.getPrototype(gomu).ë©”ì„œë“œ`

  `[CONSTRUCTOR].prototype`<= `Person.prototype.ë©”ì„œë“œ`

- ìƒì„±ì í•¨ìˆ˜ ì ‘ê·¼ ë°©ë²• 5ê°€ì§€

  `[CONSTRUCTOR]`

  `[CONSTRUCTOR].prototype.constructor`

  `[instance].__proto__.constructor`

  `[instance].constructor`

  `Object.getPrototype(instance).constructor `

### 5.2. ë©”ì†Œë“œ ìƒì† ë° ë™ì‘ ì›ë¦¬

ì•„ë˜ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì•˜ë‹¤. í•˜ì§€ë§Œ, gomuì™€ iuì— ë™ì¼í•œ í•¨ìˆ˜ë¥¼ ë‘ë²ˆ ì‘ì„±í•´ì£¼ì—ˆë‹¤.

```js
function Person(n, a){
	this.name = n;
    this.age = a;
}

var gomu = new Person('ê³ ë¬´ê³°', 30);
var iu = new Person('ì•„ì´ìœ ', 25);

gomu.setOlder = function() {
    this.age += 1;
}

gomu.getAge = function() {
    return this.age;
}

iu.setOlder = function() {
    this.age += 1;
}

iu.getAge = function() {
    return this.age;
}
```

ë™ì¼í•œ í•¨ìˆ˜ì˜ ì¤‘ë³µ ì‘ì„±ì„ í”¼í•˜ê¸° ìœ„í•´ í”„ë¡œí† íƒ€ì…ì„ ì‚¬ìš©í•´ë³´ì. (ì•„ë˜ëŠ” ì™„ë³€í•œ ì½”ë“œê°€ ì•„ë‹ˆë‹¤.)

```js
function Person(n, a){
	this.name = n;
    this.age = a;
}

Person.prototype.setOlder = function() {
    this.age += 1;
}

Person.prototype.getAge = function() {
    return this.age;
}

var gomu = new Person('ê³ ë¬´ê³°', 30);
var iu = new Person('ì•„ì´ìœ ', 25);
```

- `gomu.__proto__.getAge();`ë¥¼ í•´ë³´ë©´ NaNì„ ë¦¬í„´í•  ê²ƒì´ë‹¤. ê·¸ ì´ìœ ê°€ ë¬´ì—‡ì¼ê¹Œ? ë°”ë¡œ thisê°€ `gomu`ê°€ ì•„ë‹Œ`gomu.__proto__`ë¡œ ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

- `__proto__`ë¥¼ ìƒëµ í•  ìˆ˜ ìˆëŠ”ë°, `gomu.getAge();`ë¡œ í˜¸ì¶œí•˜ë©´ ì œëŒ€ë¡œ 30ì´ ë¦¬í„´ì´ ëœë‹¤. (thisê°€ gomuë¡œ ë°”ì¸ë”© ë˜ê¸° ë•Œë¬¸ì—)

- ë§Œì•½, `Person.prototype.age = 100;` ë¡œ ë˜ì–´ìˆì—ˆë‹¤ë©´, `gomu.__proto__.getAge();`ì—ì„œ 100ì´ ë¦¬í„´ë˜ì—ˆì„ ê²ƒì´ë‹¤.

### 5.3. Prototype chaining

ì–´ë–¤ ìƒì„±ì í•¨ìˆ˜ì˜ prototypeì´ Objectë¼ëŠ” ê²ƒì€ ê³§, Object ìƒì„±ì í•¨ìˆ˜ì— new ì—°ì‚°ìë¡œ ì¸í•´ prototypeì´ ë§Œë“¤ì–´ ì¡Œë‹¤ëŠ” ê²ƒì´ê³ , Objectì˜ prototypeë¥¼ í”„ë¡œí† íƒ€ì…ê°ì²´ì˜ \_\_proto\_\_ë¡œ ìƒì†ë°›ê²Œ ëœë‹¤. ì•„ë˜ ê·¸ë¦¼ì—ì„œ ë¹¨ê°„ìƒ‰ ì„ (\__proto__)ìœ¼ë¡œ ì—°ê²°ë˜ëŠ” ê²ƒì„ **í”„ë¡œí† íƒ€ì… ì²´ì´ë‹**ì´ë¼ í•œë‹¤.

![image](https://user-images.githubusercontent.com/53181778/88459172-41c16680-cece-11ea-8664-cfe5282c7ea9.png)

prototypeì€ ëª¨ë‘ ê°ì²´ì´ê¸° ë•Œë¬¸ì—, ëª¨ë“  ë°ì´í„° íƒ€ì…ì€ ì•„ë˜ì™€ ê°™ì€ í˜•íƒœë¥¼ ë”°ë¥´ê²Œ ëœë‹¤.

ìˆ«ìë‚˜ ë¬¸ì ë¦¬í„°ëŸ´ ìì²´ëŠ” ê°ì²´ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— `__proto__`í”„ë¡œí¼í‹°ë¥¼ ê°€ì§€ê³  ìˆì§€ëŠ” ì•Šì§€ì•Šë‹¤.

í•˜ì§€ë§Œ ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš©ìê°€ ìˆ«ì ë¦¬í„°ëŸ´ì„ ê°ì²´ì¸ê²ƒ ì²˜ëŸ¼ ì ‘ê·¼í•œë‹¤ë©´, ì¦‰ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë ¤ í•œë‹¤ë©´ ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì¦‰ì‹œ, ìˆ«ìë¥¼ Number ìƒì„±ì í•¨ìˆ˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë³€í™˜í•´ì¤€ë‹¤. ì´ë•Œ Numberì˜ í”„ë¡œí† íƒ€ì…ì— ìˆëŠ” í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

ë¬¸ìì—´ì´ë‚˜ ì •ê·œí‘œí˜„ì‹, ë¶ˆë¦¬ì–¸ ë“± ëª¨ë‘ ìƒì„±ì í•¨ìˆ˜ê°€ ì¡´ì¬í•˜ê³ , ê° ìƒì„±ì í•¨ìˆ˜ì—ëŠ” ê° ë°ì´í„° íƒ€ì…ì— ëŒ€í•œ í”„ë¡œí† íƒ€ì…ì´ ì •ì˜ë˜ì–´ ìˆê³ , ê·¸ í”„ë¡œí† íƒ€ì…ì€ Object ìƒì„±ì í•¨ìˆ˜ì˜ í”„ë¡œí†  íƒ€ì…ê³¼ ì—°ê²°ë˜ì–´ ìˆë‹¤.

![image](https://user-images.githubusercontent.com/53181778/88459297-30c52500-cecf-11ea-9e1c-b8c69c3ac727.png)

Object ìƒì„±ì í•¨ìˆ˜ì˜ prototypeì—ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì „ì²´ë¥¼ í†µê´„í•˜ëŠ” ê°ì²´ë“¤ì˜ ê³µí†µëœ ë©”ì„œë“œë“¤ì´ ë“¤ì–´ ìˆê³ , ëª¨ë“  ë°ì´í„° íƒ€ì…ì—ì„œ í”„ë¡œí† íƒ€ì… ì²´ì´ë‹ì„ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

![image](https://user-images.githubusercontent.com/53181778/88459331-8d284480-cecf-11ea-88bd-0d2de691ab52.png)

ê·¸ë ‡ê¸° ë•Œë¬¸ì—, ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ, ê°ì²´ë§Œì„ ìœ„í•œ prototypeì„ ë”°ë¡œ ì •ì˜í•´ì£¼ê¸°ê°€ í˜ë“¤ë‹¤. ë§Œì•½, ê°ì²´ë§Œì„ ìœ„í•œ prototypeì„ ì ìš©í–ˆë‹¤ í•˜ë”ë¼ë„, í”„ë¡œí† íƒ€ì… ì²´ì´ë‹ì— ì˜í•´ ëª¨ë“  ë°ì´í„° íƒ€ì…ì— ì ìš©ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

ê·¸ë˜ì„œ ìˆ˜ ë§ì€ ê°ì²´ ë©”ì„œë“œë“¤ì€ Object ê°ì²´ ìƒì„±ì í•¨ìˆ˜ì— ì§ì ‘ ë©”ì„œë“œë¥¼ ì •ì˜í•  ìˆ˜ ë°–ì— ì—†ë‹¤. ê·¸ë˜ì„œ ê°ì²´ì™€ ê´€ë ¨ëœ í•¨ìˆ˜ëŠ” `Object.` ì˜ í˜•íƒœë¡œ ë§ì´ ì‚¬ìš©ë˜ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ Object.keys()ë‚˜, Objects.assgin() ë“± í•¨ìˆ˜ê°€ ìˆë‹¤.

ì•„ë˜ ì½”ë“œë¥¼ ì‚´í´ë³´ì.

```js
var arr = [1,2,3];
console.log(arr.toString()); // 1,2,3
console.log(arr.__proto__.toString.call(arr)); // 1,2,3
console.log(arr.__proto__.__proto__.toString.call(arr)); // [Object Array]

arr.toString = function() {
    return this.join('_');
}
console.log(arr.toString()); // 1_2_3
console.log(arr.__proto__.toString.call(arr)); // 1,2,3
console.log(arr.__proto__.__proto__.toString.call(arr)); // [Object Array]


Array.prototype.toString = function() {
    return '[' + this.join(', ') + ']';
}
console.log(arr.toString()); // 1_2_3
console.log(arr.__proto__.toString.call(arr)); // [1, 2, 3]
cosole.log(Array.prototype.toString.call(arr)); // [1, 2, 3]
console.log(arr.__proto__.__proto__.toString.call(arr)); // [Object Array]
```

- ì²´ì´ë‹ ìˆœì„œ
  1. arr.toString()ì„ í•˜ë©´, ë¨¼ì € ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ìì²´ì— ì •ì˜ ë˜ì–´ ìˆëŠ” í•¨ìˆ˜ë¥¼ ê°€ì¥ë¨¼ì € í™•ì¸í•œë‹¤.
  2. ì—†ìœ¼ë©´ `__proto__`ì—ì„œ í™•ì¸í•œë‹¤.
  3. ê·¸ë˜ë„ ì—†ìœ¼ë©´ ìƒìœ„ `__proto__`ì—ì„œ í•™ì¸í•œë‹¤.

- this ë°”ì¸ë“œ

  `arr.__proto__`ì™€ ê°™ì´ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•  ë•Œ, thisë¥¼ ì¨ì•¼í•œë‹¤ë©´ callê³¼ ê°™ì€ í•¨ìˆ˜ë¡œ this ë°”ì¸ë”©ì„ í•´ì£¼ì–´ì•¼í•œë‹¤.

- `arr.__proto__.__proto__.toString` == `Array.prototype.__proto__.toString`ì´ê¸° ë•Œë¬¸ì—, Objectì˜ í”„ë¡œí† íƒ€ì…ì— ìˆëŠ” toString ë©”ì„œë“œê°€ ì˜¤ì¶œë˜ì–´ Object Arrayê°€ ì¶œë ¥ëœë‹¤.

> ê°ì²´ ë°ì´í„° íƒ€ì… ë§ˆë‹¤ ì •ì˜ë˜ì–´ ìˆëŠ” toStringì˜ ê¸°ëŠ¥ì´ ë‹¤ë¥´ë©°, Objectì˜ toStringì€ ê°ì²´ íƒ€ì…ì„ ìŠ¤íŠ¸ë§ í˜•íƒœë¡œ ë³€í™˜í•´ ë¦¬í„´í•´ì¤€ë‹¤.

ë‹¤ë¥¸ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì.

```js
var obj = {
    a: 1,
    b: {
        c: 'c'
    }
};
console.log(obj.toString()); // [object Object]
```

ê²°ê³¼ë¥¼ ë°”ê¾¸ê¸° ìœ„í•´ì„œ objì•ˆì— toString ë©”ì„œë“œë¥¼ ì¶”ê°€í•´ë³´ì.

```js
var obj = {
    a: 1,
    b: {
        c: 'c'
    },
    toString: function() {
    	var res = [];
        for(var key in this) {
            res.push(key + ': ' + this[key].toString());
        }
        return '{' + res.join(', ') + '}';
    }
};
console.log(obj.toString());
```

ì¶œë ¥ê²°ê³¼

> ```
> {a: 1, b: [object Object], toString: function() {
>     	var res = [];
>         for(var key in this) {
>             res.push(key + ': ' + this[key].toString());
>         }
>         return '{' + res.join(', ') + '}';
>     }}
> ```

ì•„ë¬´ë˜ë„ ì›í•˜ë˜ í˜•íƒœê°€ ì•„ë‹ˆë‹¤. bê°€ ì¶œë ¥ë˜ì—ˆê³ , ì›ì¹˜ì•Šì€ toString ë©”ì„œë“œê¹Œì§€ ì¶œë ¥ì´ ë˜ì—ˆë‹¤.

ì € í•¨ìˆ˜ë¥¼ prototypeìœ¼ë¡œ ë³€ê²½í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

```js
var obj = {
    a: 1,
    b: {
        c: 'c'
    }
};

Object.prototype.toString = function() {
    var res = [];
    for(var key in this) {
        res.push(key + ': ' + this[key].toString());
    }
    return '{' + res.join(', ') + '}';
}

console.log(obj.toString()); // {a: 1, b: {c: c}}
```

ê²°ê³¼ê°€ ì˜ ë‚˜ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

## 6. í´ë˜ìŠ¤(Class)

### 6.1. prototype static ë©”ì†Œë“œ ë° static í”„ë¡œí¼í‹°

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ì›ë˜ í´ë˜ìŠ¤ë¼ëŠ” ê°œë…ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìƒì„±ì í•¨ìˆ˜ê°€ í´ë˜ìŠ¤ì˜ ì—­í• ì„ í•˜ê²Œë˜ëŠ” ê²ƒì´ê³ , ES6ì—ì„œ ë‚˜ì˜¨ í´ë˜ìŠ¤ ë˜í•œ ì‹¤ì²´ëŠ” ìƒì„±ì í•¨ìˆ˜ì´ë‹¤.

![image](https://user-images.githubusercontent.com/53181778/88460967-0d07dc00-cedb-11ea-8a08-bb08e30bc533.png)

- ìœ„ ê·¸ë¦¼ì—ì„œ Arrayë¥¼ í´ë˜ìŠ¤ë¡œ ë³´ì•˜ì„ ë•Œ, Arrayë‚´ë¶€ì—ì„œ prototypeì„ ì œì™¸í•œ í”„ë¡œí¼í‹°ë“¤ì„ ë˜ë‹¤ì‹œ ë©”ì„œë“œì™€ í”„ë¡œí¼í‹°ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ”ë° ê°ê° static method, static propertyë¼ ì¹­í•œë‹¤.

- í”„ë¡œí† íƒ€ì…ì— ì†í•œ ë©”ì„œë“œë“¤ì„ (í”„ë¡œí† íƒ€ì…)ë©”ì„œë“œ ë¼ê³  ë¶€ë¥¸ë‹¤.

  ![image](https://user-images.githubusercontent.com/53181778/88461030-89022400-cedb-11ea-958b-eb07563fbe8e.png)

í´ë˜ìŠ¤ì™€ ì¸ìŠ¤í„´ìŠ¤ì™€ì˜ ê´€ê³„ë¥¼ ì‚´í´ë³´ì.

- ì¸ìŠ¤í„´ìŠ¤ì—ì„œ í”„ë¡œí† íƒ€ì… ë©”ì„œë“œì— ë‹¤ì´ë ‰íŠ¸ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.
  - arr.pop() ë“±

- ì¸ìŠ¤í„´ìŠ¤ì—ì„œ static ë©”ì„œë“œì™€ static í”„ë¡œí¼í‹°ëŠ” ë‹¤ì´ë ‰íŠ¸ë¡œ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.

êµ¬ì²´ì ì¸ ì˜ˆì‹œë¥¼ ì½”ë“œë¥¼ í†µí•´ ì‚´í´ë³´ì.

```js
function Person(name, age){
    this._name = name;
    this._age = age;
}

//static method
Person.getInformations = function(instance) {
    return {
        name: instance._name,
        age: instance._age,
    };
}

//(prototype) method
Person.prototype.getName = function() {
    return this._name;
}

Person.prototype.getAge = function() {
    return this._age;
}

var gomu = new Person('ê³ ë¬´',30);

console.log(gomu.getName());  //ê³ ë¬´
console.log(gomu.getAge());  //30

console.log(gomu.getInformations(gomu)); //ì—ëŸ¬!
console.log(Person.getInformations(gomu)); //{name: "ê³ ë¬´", age: 30}
```

- í”„ë¡œí† íƒ€ì… ì²´ì´ë‹ì€ ëŒ€ê°ì„  ë°©í–¥ë§Œì„ í™•ì¸í•œë‹¤.(í”„ë¡œí† íƒ€ì… ë§Œì„ í™•ì¸)

  ê·¸ë ‡ê¸° ë•Œë¬¸ì— `gomu.getInformations(gomu)`ëŠ” getInformationsë©”ì„œë“œë¥¼ ì°¾ê¸° ëª»í•˜ê³ , `Person.getInformations(gomu)`ì„ í˜¸ì¶œí•´ì•¼ getInformationsë©”ì„œë“œì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.

  ![image](https://user-images.githubusercontent.com/53181778/88461250-efd40d00-cedc-11ea-8bf5-44a79c2cb184.png)

### 6.2. í´ë˜ìŠ¤ ìƒì† êµ¬í˜„

ë‘ ê°œì˜ í´ë˜ìŠ¤ê°€ ì•„ë˜ì™€ ê°™ì´ ìˆë‹¤ê³  ìƒê°í•´ë³´ì.

- Person í´ë˜ìŠ¤
  - static í”„ë¡œí¼í‹°
    - name
    - age
  - í”„ë¡œí† íƒ€ì… ë©”ì„œë“œ
    - getName()
    - getAge()

```js
fucntion Person(name, age){
    this.name = name || 'ì´ë¦„ì—†ìŒ';
    this.age = age || 'ë‚˜ì´ëª¨ë¦„';
}

Person.prototype.getName = function() {
    return this.name;
}

Person.prototype.getAge = function() {
    return this.age;
}
```

- Employee í´ë˜ìŠ¤
  - static í”„ë¡œí¼í‹°
    - name
    - age
    - position
  - í”„ë¡œí† íƒ€ì… ë©”ì„œë“œ
    - getName()
    - getAge()
    - getPosition()

```js
fucntion Employee (name, age, position){
    this.name = name || 'ì´ë¦„ì—†ìŒ';
    this.age = age || 'ë‚˜ì´ëª¨ë¦„';
    this.position = position || 'ì§ì±…ëª¨ë¦„';
}

Employee .prototype.getName = function() {
    return this.name;
}

Employee .prototype.getAge = function() {
    return this.age;
}

Employee .prototype.getPosition = function() {
    return this.position;
}
```

ë‘ í´ë˜ìŠ¤ëŠ” ê²¹ì¹˜ëŠ” ë¶€ë¶„ì´ ë§ì´ ìˆë‹¤. Person í´ë˜ìŠ¤ í•˜ìœ„ì— Employee í´ë˜ìŠ¤ë¥¼ ë†“ëŠ”ë‹¤ë©´ ê²¹ì¹˜ëŠ” ë¶€ë¶„ì„ ë§ì´ ì¤„ì¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

ì–´ë–»ê²Œ ë‘ í´ë˜ìŠ¤ë¥¼ ìƒì†ê´€ê³„ë¡œ ë§Œë“¤ ìˆ˜ ìˆì„ê¹Œ? ë‹µì€ ê°„ë‹¨í•˜ë‹¤. ëŒ€ê°ì„ ì„ ì—°ê²°í•´ ì£¼ì–´ì•¼ í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— `Employee.prototype = new Person()`ì„ í•´ì£¼ë©´ ëœë‹¤. ê·¸ í›„, `Employee.prototype.constructor = Employee`constructorë¥¼ í•˜ìœ„í´ë˜ìŠ¤ì˜ constructorë¡œ ë°”ê¾¸ì–´ì£¼ë©´ ëœë‹¤.

ìƒì†ì„ ì´ìš©í•œ ì½”ë“œë¡œ ì¬ì‘ì„±í•´ë³´ì.

```js
fucntion Person(name, age){
    this.name = name || 'ì´ë¦„ì—†ìŒ';
    this.age = age || 'ë‚˜ì´ëª¨ë¦„';
}

Person.prototype.getName = function() {
    return this.name;
}

Person.prototype.getAge = function() {
    return this.age;
}

fucntion Employee (name, age, position){
    this.name = name || 'ì´ë¦„ì—†ìŒ';
    this.age = age || 'ë‚˜ì´ëª¨ë¦„';
    this.position = position || 'ì§ì±…ëª¨ë¦„';
}

Employee.prototype = new Person();
Employee.prototype.constructor = Employee;

Employee .prototype.getPosition = function() {
    return this.position;
}

var gomu = new Employee('ê³ ë¬´', 30, 'CEO');
```

- ìœ„ì˜ ìˆœì„œë¥¼ ì§€ì¼œì£¼ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.

![image](https://user-images.githubusercontent.com/53181778/88469707-42d6b000-cf2f-11ea-96cd-7cbbc52abad7.png)

- `console.dir(gomu)`ë¥¼ í•´ë³´ë©´ ìœ„ì™€ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜¬ê²ƒì´ë‹¤.
- gomuì˜` __proto__`ëŠ” Employeeì˜ prototypeê³¼ ê°™ê³ , ê·¸ ì•ˆì— ìˆëŠ” ê°’ë“¤ì€ Person ìƒì„±ì í•¨ìˆ˜ì˜ age, name, \_\_proto\_\_ê°€ ìˆê³  ì¶”ê°€ë¡œ ì„¤ì •í•´ì¤€ Employeeì˜ constructor(), getPosition()ê°€ ìˆë‹¤.
- `__proto__`ì•„ë˜ì— `__proto__`ê°€ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆëŠ”ë° ì´ê²ƒì´ ë°”ë¡œ ìƒì†ë°›ì€ ê²ƒì´ë‹¤.

ê·¸ëŸ°ë° ì—¬ê¸°ì„œ ageì™€ name ê°™ì€ ë¶ˆí•„ìš”í•œ ë¶€ë¶„ê¹Œì§€ ìƒì†ì´ ëœ ê²ƒì„ ë³¼ìˆ˜ ìˆë‹¤. ì–´ë–»ê²Œ í•˜ë©´ í”„ë¡œí† íƒ€ì… ë©”ì„œë“œë§Œì„ ìƒì† ë°›ì„ ìˆ˜ ìˆì„ê¹Œ?

ë¹„ì–´ìˆëŠ” Bridgeë¼ëŠ” ìƒì„±ìí•¨ìˆ˜ë¥¼ ë§Œë“¤ê³ , Personì˜ í”„ë¡œí† íƒ€ì…ì„Bridgeì˜ í”„ë¡œí† íƒ€ì…ì— ëŒ€ì…ì‹œí‚¨ë‹¤. ê·¸ í›„, Employeeì— Bridegeë¥¼ ìƒì†í•´ì£¼ë©´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

```js
fucntion Person(name, age){
    this.name = name || 'ì´ë¦„ì—†ìŒ';
    this.age = age || 'ë‚˜ì´ëª¨ë¦„';
}

Person.prototype.getName = function() {
    return this.name;
}

Person.prototype.getAge = function() {
    return this.age;
}

fucntion Employee (name, age, position){
    this.name = name || 'ì´ë¦„ì—†ìŒ';
    this.age = age || 'ë‚˜ì´ëª¨ë¦„';
    this.position = position || 'ì§ì±…ëª¨ë¦„';
}

fucntion Bridge (){}
Bridge.prototype = Person.prototype;
Employee.prototype = new Bridge();
Employee.prototype.constructor = Employee;

Employee .prototype.getPosition = function() {
    return this.position;
}

var gomu = new Employee('ê³ ë¬´', 30, 'CEO');
```

ë¸Œë¦¿ì§€ë¥¼ ì‚¬ìš©í•´ì„œ name, ageí”„ë¡œí¼í‹°ë¥¼ ì œì™¸í•˜ê³  ìƒì†ì„ ë°›ì•˜ê³ , ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

![image](https://user-images.githubusercontent.com/53181778/88469867-a9a89900-cf30-11ea-914b-a2c652b8693e.png)

í•˜ì§€ë§Œ, ë¸Œë¦¿ì§€ ìƒì„±ì í•¨ìˆ˜ëŠ” ì‹¤ì œë¡œ í”„ë¡œê·¸ë¨ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¶€ë¶„ì´ ì•„ë‹ˆê³ , ë˜ ìƒì†ì˜ êµ¬ì¡°ê°€ ìì£¼ ì“°ì´ê¸° ë•Œë¬¸ì— ì´ ê¸°ëŠ¥ì„ í•¨ìˆ˜í™” í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.

```js
var extendClass = (function() {
	function Bridge(){}
	return function(Parent, Child) {
        Bridge.prototype = Parent.prototype;
        Child.prototype = new Bridge();
        Child.prototype.constructor = Child;
	}
})();
```

í´ë¡œì €ë¥¼ ì‚¬ìš©í•´ì„œ, Bridgeë¥¼ ì»¨í…ìŠ¤íŠ¸ì— í•œ ë²ˆ ìƒì„±í•˜ì—¬ ê³„ì† ì¬í™œìš©ê°€ëŠ¥í•˜ê²Œ í•˜ê³  í•¨ìˆ˜í™”í•˜ì—¬ ì‚¬ìš©í•œë‹¤.

ì´ë¥¼ í™œìš©í•˜ì—¬ ìœ„ ì½”ë“œë¥¼ ì•„ë˜ì²˜ëŸ¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

```js
extendClass(Person, Employee);
Employee.prototype.getPosition = function(){
    return this.position;
}
```

ë§Œì•½, ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œì™¸ì˜ í”„ë¡œí¼í‹° ë˜í•œ ìƒì†ë°›ê³  ì‹¶ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?

```js
var extendClass = (function() {
	function Bridge(){}
	return function(Parent, Child) {
        Bridge.prototype = Parent.prototype;
        Child.prototype = new Bridge();
        Child.prototype.constructor = Child;
        Child.prototype.superClass = Parent;
	}
})();

fucntion Person(name, age){
    this.name = name || 'ì´ë¦„ì—†ìŒ';
    this.age = age || 'ë‚˜ì´ëª¨ë¦„';
}

Person.prototype.getName = function() {
    return this.name;
}

Person.prototype.getAge = function() {
    return this.age;
}

fucntion Employee (name, age, position){
    this.superClass(name, age);
    this.position = position || 'ì§ì±…ëª¨ë¦„';
}

extendClass(Person, Employee);
Employee.prototype.getPosition = function(){
    return this.position;
}
```

`Child.prototype.superClass = Parent;`ì´ ë¶€ë¶„ì„ ì‘ì„±í•´ì£¼ê³ , `this.superClass(name, age);` ì´ë ‡ê²Œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

ì´ ì˜ë¯¸ëŠ”, ìš°ì„  superClassë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´, ë¶€ëª¨í´ë˜ìŠ¤ì˜ ìƒì„±ì í•¨ìˆ˜ê°€ì‹¤í–‰ë˜ê³  ë§¤ê°œë³€ìˆ˜ë¡œ nameê³¼ ageë¥¼ ì „ë‹¬í•˜ê²Œ ëœë‹¤. ë¶€ëª¨í´ë˜ìŠ¤ì—ì„œ this.name, this.ageë¥¼ ê°ê° ì„¤ì •í•˜ê²Œ ë˜ì–´ìˆëŠ”ë°, ì´ë•Œ thisëŠ” ` this.superClass(name, age);`ì˜ thisì— í•´ë‹¹í•˜ê²Œ ë˜ê¸°ë•Œë¬¸ì—, Employeeë¥¼ ì˜ë¯¸í•˜ê²Œ ëœë‹¤. ì¦‰ nameê³¼ age í”„ë¡œí¼í‹°ëŠ” ` Employee.name`, ` Employee.age` ì²˜ëŸ¼ ë™ì‘í•˜ê²Œ ë˜ê³  ê°’ì´ ì €ì¥ì´ ë  ê²ƒì´ë‹¤.

í•˜ì§€ë§Œ, ES6ì—ì„œëŠ” Classë¥¼ ì§€ì›í•˜ì—¬ ì†ì‰½ê²Œ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

```js
class Person {
    constructor (name, age) {
        this.name = name || 'ì´ë¦„ì—†ìŒ';
        this.age = age || 'ì´ë¦„ì—†ìŒ';
    }
    getName() {
        return this.name;
    }
    getAge() {
        return this.age;
    }
}
class Employee extends Person {
    constructor (name, age, position) {
        super(name, age);
        this.position = position || 'ì§ì±…ì—†ìŒ';
    }
    getName() {
        return this.name;
    }
    getPosition() {
        return this.position;
    }
}
```

 