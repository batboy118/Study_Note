# 03. Java 심화

> 자바의 심화된 내용에 대해 학습합니다.

[🏠Home](https://github.com/batboy118/Study_Note)

[◀Previous page ](./README.md)

---

<!-- TOC -->

- 

<!-- /TOC -->

## 1.  클래스패스

```java
class Item{}

class ClasspathDemo {}
```

- 컴파일

```
javac ClasspathDemo.java
```

두 개의 클래스 파일이 생성

- ClasspathDemo.class
- Item.class

즉 클래스 하나는 하나의 클래스 파일

ClasspathDemo2.java을 만들고 내용을 아래와 같이 한다.

```java
class Item2{ 
    public void print(){
        System.out.println("Hello world");  
    }
}


class ClasspathDemo2 {
    public static void main(String[] args){
        Item2 i1 = new Item2();
        i1.print();
    }
}
```

컴파일

```
javac ClasspathDemo2.java
```

그리고 현재 디렉터리 하위에 lib 디렉토리를 만들고 여기에 Item2.class 파일을 이동한다. 현재 디렉터리에는 Item2.class 파일이 없어야 한다. 그리고 ClasspathDemo2를 실행한다.

```
java ClasspathDemo2
```

에러가 발생한다.

이것은 item.class 파일이 현재 디렉터리에 존재하지 않기 때문에 찾을 수 없다는 메시지다. 아래와 같이 실행해서 이 문제를 해결할 수 있다.

```
java -classpath ".;lib" ClasspathDemo2
```

리눅스, OSX와 같은 유닉스 계열의 시스템이라면 아래와 같이 콜론을 사용해야 한다.

```
java -classpath ".:lib" ClasspathDemo2
```

옵션 -classpath는 자바를 실행할 때 사용할 클래스들의 위치를 가상머신에게 알려주는 역할을 한다. -classpath의 값으로 사용된 ".;lib"를 살펴보자.

![img](https://s3.ap-northeast-2.amazonaws.com/opentutorials-user-file/module/516/1902.gif)

**.**

현재 디렉터리에서 클래스를 찾는다는 뜻이다.

**;**

경로와 경로를 구분해주는 구분자

**lib**

현재 디렉터리에 없다면 현재 디렉터리의 하위 디렉터리 중 lib에서 클래스를 찾는다는 의미다.

만약 .을 제외한다면 어떻게 될까? 아래와 같은 오류가 발생할 것이다.

```
F:\tmp\java>java -classpath "lib" ClasspathDemo``오류: 기본 클래스 Classpath을(를) 찾거나 로드할 수 없습니다.
```

**환경변수**

디렉터리 lib 아래에 있는 Item.class 파일을 찾았는데 정작 현재 디렉터리에 있는 ClasspathDemo.class 파일은 찾을 수 없기 때문이다.

이와 같이 클래스 패스라는 것은 자바를 실행할 때 클래스의 위치를 지정하는 역할을 하는 것이다. 클래스 패스는 자바 애플리케이션이 사용하고 있는 클래스가 여러 경로에 분산되어 있을 때 유용하게 사용할 수 있는 방법이다.

지금까지는 자바를 실행할 때 클래스 패스를 지정하는 방법을 알아봤다. 실행 할 때마다 클래스 패스를 지정하는 것이 귀찮다면 클래스 패스를 시스템의 환경변수로 지정하면 된다.

환경변수는 운영체제에 지정하는 변수로 자바 가상머신과 같은 애플리케이션들은 환경변수의 값을 참고해서 동작하게 된다. 자바는 클래스 패스로 환경변수 CLASSPATH를 사용하는데 이 값을 지정하면 실행할 때마다 -classpath 옵션을 사용하지 않아도 되기 때문에 편리하다. 하지만 운영체제를 변경하면 클래스 패스가 사라지기 때문에 이식성면에서 불리할 수 있다.

## 2. 컴파일

프로젝트 구조

- 프로젝트 디렉토리
  - bin
  - src

bin은 바이트 코드 ( JVM이 이해할 수 있는 코드 )

src는 사람이 작성한 코드

최상위 프로젝트 디렉토리에서, 

`javac src/컴파일할 패키지의 경로/소스파일이름.java`

또는

`javac src/컴파일할 패키지의 경로/*.java`

를 명령하게 되면 같은 디렉토리에 클래스 파일이 생성된다.

만약, 클래스파일이 bin아래에 생성되게 하고 싶다면?

`javac src/컴파일할 패키지의 경로/*.java -d bin`

-d bin : bin 디렉토리에 결과를 만들라는 의미



> 동일한 클래스명을 가진 패키지들을 로드하고 인스턴스를 생성하면, 어떤 패키지의 클래스를 사용하는지 알지 못하기 때문에 에러가 발생한다.
>
> 그때는 패키지명.클래스 형식으로 사용하여 어떤 패키지의 클래스인지 명확하게 해주면 된다.

## 3. API

자바는 기본으로 여러가지 API가 존재한다.

자바 시스템을 제어하기 위해서 자바에서 제공하는 여러 명령어들을 자바 API라 한다.

JDK를 설치하면 자바시스템을 제어하는 API를 기본으로 제공한다.

패키지 `java.lang.*`의 클래스들도 자바에서 제공하는 API 중의 하나라고 할 수 있다.

> 자바는 자동으로 `java.lang.*`을 로드함.
>
> 명시적으로 `import java.lang.*`을 써도 됨
>
> System 클래스도 java.lang 패키지에 포함되어 있음

**Java SE**(JAVA platform. **S**tandard **E**dition)
예전에는 J2SE로 불리었으나 버전 6.0 이후에 Java SE로 변경. 자바 플랫폼에서 가장 널리 쓰이는 자바 API의 집합체이다.

**Java EE**(Java Platform, **E**nterprise **E**dition)
자바를 이용한 서버측 개발을 위한 플랫폼이다.java EE 플랫폼은 pc에서 동작하는 표준플랫폼인 Java SE에 부가하여,웹 애플리케이션 서버에서 동작하는 장애복구 및 분산 멀티티어를 제공,자바 소프트웨어의 기능을 추가한 서버를 위한 플랫폼이다. 이전 J2EE라고 불리었으나 5.0이후로 Java EE로 개칭

**Java ME**(Java Platform, **Micro** **E**dition)
Java ME 또는 J2ME 등으로 불림 제한된 자원을 가진 휴대전화, PDA, 세트톱박스 등에서 Java프로그래밍 언어를 지원하기 위해 만들어진 플랫폼이다.

각 에디션에 맞춘 공식 문서를 확인해보면 사용가능한 API를 확인 할 수 있다.

## 4. Exception

**ArithmeticException의 상속 구조**

java.lang.Object

- java.lang.Throwable
  - java.lang.Exception
    - java.lang.RuntimeException
      - java.lang.ArithmeticException
        - checked & unchecked 

> **Throwable** 클래스에 속한 메서드
>
> - getMessage()
> - toString()
> - printStackTrace()
> - 등등

Error와 Exception은 각각 Throwable을 상속받는다.

- Error 클래스는 JVM에 문제가 발생했을 경우 발생

  (개발자가 에러를 그냥 처리할 수 없고 환경에 대한 개선(메모리의 증가 등)으로 처리해야함)

- Exception은 코드 로직상의 문제가 발생했을 경우 발생

![Is It a Bad Practice to Catch Throwable? | Baeldung](https://www.baeldung.com/wp-content/uploads/2019/11/Throwable-3.png)

 **checked와 unchecked**

- **ArithmeticException**은 런타임 예외를 상속받고, unchecked 예외이다.
- 그 외 예외는(ex, **IOException**) checked 예외이다.
  - checked 예외는 컴파일시 반드시 처리를 해주어야 한다 (try와 exception, 또는 throws)
- RuntimeException을 상속 받는 사용자 지정 예외를 사용한다면, 컴파일시 예외처리를 해주지 않아도 문제가 되지는 않는다.
- 반면에, Exception을 상속받는 사용자 지정 예외를 만들어서 사용한다면, 예외를 반드시 처리해 주어야 한다.

## 5. Object 클래스

- 모든 클래스의 부모 클래스 (최상위 클래스)

