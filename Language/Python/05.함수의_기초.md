# 05. 함수의 기초

> 파이썬의 함수의 기초 사용법에 대해서 학습

[🏠Home](https://github.com/batboy118/Study_Note)

[◀Previous page ](./README.md)

---

<!-- TOC -->

- [1. 함수의 선언](#1-함수의-선언)
- [2. 함수 독스트링](#2-함수-독스트링)
- [3. 키워드 인수](#3-키워드-인수)
- [4. 언패킹](#4-언패킹)
	- [4.1. 튜플 & 리스트 언패킹](#41-튜플--리스트-언패킹)
	- [4.2. 딕셔너리 언패킹](#42-딕셔너리-언패킹)
- [5. 튜플을 이용한 가변 인자 매개 변수](#5-튜플을-이용한-가변-인자-매개-변수)
- [6. 딕셔너리 형식의 가변 인자 매개 변수](#6-딕셔너리-형식의-가변-인자-매개-변수)
- [7. 여러 값 반환](#7-여러-값-반환)
- [8. Scope](#8-scope)
	- [8.1 네임스페이스 (namespace)](#81-네임스페이스-namespace)
- [9. 매개변수의 초기 값 지정](#9-매개변수의-초기-값-지정)

<!-- /TOC -->

## 1. 함수의 선언

```
def	함수명(매개변수) :
	명령문1
	명령문2
	return문
```

- 기본적으로, 함수의 호출보다 함수의 선언이 앞서 있어야 한다.

- 덧셈의 결과를 반환하는 함수

  ```python
  def calc_sum(x, y):
      return x + y

  a, b = 2, 3
  c = calc_sum(a, b)
  print = c
  ```

  - 결과 : 5

-  빈 함수 만들기

  ```python
  def hello():
  	pass
  ```

  - 아무것도 하지 않는 함수이다. (비어두면 에러) 보통 주석 처리 후 나중에 내용을 채워넣음

## 2. 함수 독스트링

- 파이썬에서는 함수의 :(콜론) 바로 다음 줄에 `""" """`(큰따옴표 세 개)로 문자열을 입력하면 **함수에 대한 설명**을 넣을 수 있다. 이런 방식의 문자열을 독스트링(문서화 문자열, documentation strings, docstrings)이라고 한다. 단, 독스트링의 윗줄에 다른 코드가 오면 안 된다.

```
def 함수이름(매개변수):
    """독스트링"""
    코드

def 함수이름(매개변수):
    """
    여러 줄로 된
    독스트링
    """
    코드
```

독스트링은 ' '(작은따옴표), " "(큰따옴표), ''' '''(작은따옴표 세 개)로 만들어도 되지만, 파이썬 코딩 스타일 가이드(PEP 8)에서는 **""" """(큰따옴표 세 개)를 권장**한다.

```python
def add(a, b):
    """이 함수는 a와 b를 더한 뒤 결과를 반환하는 함수입니다."""
    return a + b

x = add(10, 20)       # 함수를 호출해도 독스트링은 출력되지 않음
print(x)

print(add.__doc__)    # 함수의 __doc__로 독스트링 출력
```

실행 결과

```
30
이 함수는 a와 b를 더한 뒤 결과를 반환하는 함수입니다.
```

독스트링은 함수의 사용 방법만 기록할 뿐 add(10, 20)으로 함수를 호출해도 출력되지 않는다. 독스트링을 출력하려면 `print(add.__doc__)`와 같이 함수의 `__doc__`을 출력하면 된다.

> help(객체)
>
> - 다음과 같이 help에 함수를 넣으면 함수의 이름, 매개변수, 독스트링을 도움말 형태로 출력해준다.

```
>>> help(add)
Help on function add in module __main__:

add(a, b)
    이 함수는 a와 b를 더한 뒤 결과를 반환하는 함수입니다.
```

독스트링을 적절히 작성해두면 나중에 본인이 만든 코드를 다른 사람이 사용할 때 좀 더 편리하게 사용할 수 있다.

## 3. 키워드 인수

- 보통의 경우 함수에 인수를 순서대로 넣는 방식을 `위치 인수(positional argument)`라고 한다 즉, 인수의 위치가 정해져 있다. 반대로, `키워드 인수`는 키워드를 사용해 매개변수와 매칭 시켜주기 때문에 인수의 위치를 정해진대로 사용하지 않아도 된다.

- `함수(키워드 = 값)` 형태로 함수를 호출 할 수 있다.

- 예시

  ```python
  def personal_info(name, age, address):
  	print('이름: ', name)
      print('나이: ', age)
      print('주소: ', address)

  personal_info(age=30, address='서울시 용산구 이촌동', name='홍길동')
  ```

  - 인수의 순서가 함수에 정의된 순서와 다른것을 확인 할 수있다.

  - 결과

    > 이름:  홍길동
    > 나이:  30
    > 주소:  서울시 용산구 이촌동

- 참고, print함수에서 sep와, end도 키워드 인수이다.

  > print(10, 20, 30, sep=':', end='')

## 4. 언패킹

### 4.1. 튜플 & 리스트 언패킹

- 인수를 순서대로 넣을 때에 리스트나 튜플을 사용할 수 있다, 리스트 또는 튜플 앞에 `*`를 붙여서 함수를 호출하면 된다.

  - `함수(*리스트)` 또는 `함수(*튜플)` 형태로 호출

- `*`를 언패킹 연산자라 한다. 즉, 언팩 연산자는 말 그대로 하나로 묶여있던 리스트나 튜플을 각각의 개별 요소로 쪼개준다.

  > 예) `*(1,2,3)` 은 튜플에서 개별 요소로 쪼개져 `1`, `2`, `3`이 된다.

- 리스트나 리스트 변수, 튜플이나 튜플 변수 앞에 *을 붙여서 사용하면 된다.

- 예시

  ```python
  def print_numbers(a, b, c):
      print(a)
      print(b)
      print(c)

  x = [10, 20, 30]
  print_numbers(*x)
  ```

  - 결과

    > 10
    >
    > 20
    >
    > 30

  ```python
  print_numbers(*(1,2,3))
  ```

  - 결과

    > 1
    >
    > 2
    >
    > 3

### 4.2. 딕셔너리 언패킹

- 키워드 인수를 넣을 때에 딕셔너리를 사용할 수 있다, 딕셔너리 앞에 `**`를 붙여서 함수를 호출하면 된다.

- `**` 키워드 언팩 연산자를 이용

- 이때, key는 반드시 `문자열` 이어야 한다.

- 또한, 만약 key의 개수와 매개변수의 개수가 맞지 않으면 사용할 수 없고, 매개변수와 키가 모두 1대1 매칭(같은 이름)이어야 한다.

- 예시

  ```python
  def personal_info(name, age, address):
      print('이름: ', name)
      print('나이: ', age)
      print('주소: ', address)

  x = {'name': '홍길동', 'age': 30, 'address': '서울시 용산구 이촌동'}
  personal_info(**x)
  ```

  - 결과

    >이름:  홍길동
    >나이:  30
    >주소:  서울시 용산구 이촌동

  ```python
  personal_info(**{'name': '홍길동', 'age': 30, 'address': '서울시 용산구 이촌동'})
  ```

  결과

  >이름:  홍길동
  >나이:  30
  >주소:  서울시 용산구 이촌동

- 주의 : `**`이 아닌 `*`을 사용하면 key가 매칭된다.

  ```python
  personal_info(*x)
  ```

  - 결과

    >이름:  name
    >나이:  age
    >주소:  address

## 5. 튜플을 이용한 가변 인자 매개 변수

- 매개변수의 개수를 `가변`적으로 사용할 수 있다.

- `*` (언팩 연산자)를 사용

  ```
  def 함수이름(*매개변수):
      코드
  ```

- 매개변수에 언팩 연산자 적용 시 인자를 `튜플 형식`으로 처리 함

- 예시

  ```python
  def calc_sum(*params):
      total = 0;
      for val in params:
          total += val
      return total

  ret_val = calc_sum(1, 2)
  print("ret_val")

  ret_val = calc_sum(1, 2, 3)
  print("ret_val")

  ret_val = calc_sum(1, 2, 3, 4)
  print("ret_val")
  ```

  - 결과

    > 3
    >
    > 6
    >
    > 10

- 고정 매개변수와 가변 매개변수의 혼합사용

  - 가변 매개 변수는 가장 마지막에 위치해야 한다.

    ```python
    def cal_sum(precision, *params):
        if precision = 0:
            total = 0
        elif 0 < precision < 1:
            total =0.0

        for val in patams:
            total += val
        return total

    ret_val = cal_sum(0,1,2)
    printf(ret_val)

    ret_val = cal_sum(0.1 ,1,2)
    printf(ret_val)
    ```

    - 결과

      > 3
      >
      > 3.0

## 6. 딕셔너리 형식의 가변 인자 매개 변수

- **키워드 인자**들을 전달해 매개변수를 `딕셔너리 형식`으로 처리하여 가변인자로 사용 가능

- `**` 를 사용하여 가변 인자로 받을 수 있다.

  ```
  def 함수이름(**매개변수):
      코드
  ```

- 매개변수 이름은 원하는 대로 지어도 되지만 관례적으로 **k**ey**w**ord **arg**ument**s**를 줄여서 kwargs로 사용

  ```python
  def personal_info(**kwargs):
      for kw, arg in kwargs.items():
          print(kw, ': ', arg, sep='')
  ```

- 예시

  ```python
  personal_info(name='홍길동')
  ```

  - 결과 : name: 홍길동

  ```python
  personal_info(name='홍길동', age=30, address='서울시 용산구 이촌동')
  ```

  - 결과

  > name: 홍길동
  > age: 30
  > address: 서울시 용산구 이촌동

  ```python
  y = {'name': '임꺽정', 'age': 42, 'address': '서울시 강남구 대치동'}
  personal_info(**y)
  ```

  - 결과

  > name: 임꺽정
  > age: 42
  > address: 서울시 강남구 대치동

- **고정 인수와 가변 인수(키워드 인수)를 함께 사용하기**

  - 가변 인수는 항상 가장 마지막에 와야한다.

- 위치 가변 인수와 키워드 가변 인수 같이 사용하기

  - 함수에서 위치 인수를 받는 `*args`와 키워드 인수를 받는 `**kwargs`를 함께 사용할 수도 있다. 대표적인 함수가 **print**인데 print는 출력할 값을 위치 인수로 넣고 sep, end 등을 키워드 인수로 넣습니다. 다음과 같이 함수의 매개변수를 `*args`, `**kwargs`로 지정하면 위치 인수와 키워드 인수를 함께 사용한다.

    ```python
    def custom_print(*args, **kwargs):
        print(*args, **kwargs)

    custom_print(1, 2, 3, sep=':', end='')
    ```

    - 결과 : `1:2:3`

    단, 이때 `def custom_print(**kwargs, *args):`처럼 `**kwargs`가 `*args`보다 **앞쪽에 오면 안 된다.** 매개변수 순서에서 `**kwargs는 반드시 가장 뒤쪽`에 와야 한다.

    특히 고정 매개변수와 `*args`, `**kwargs`를 함께 사용한다면` def custom_print(a, b, *args, **kwargs):`처럼 매개변수는 `고정 매개변수, *args, **kwargs 순`으로 지정해야 한다.

## 7. 여러 값 반환

```python
def 함수이름(매개변수):
    return 반환값1, 반환값2
```

- return에 값이나 변수를 ,(콤마)로 구분해서 지정

- 반환 값은 기본적으로 튜플 자료형으로 변환됨

- 리스트 형태로 반환하고 싶다면, `return [반환값1, 반환값2]` 형태로 작성

- 예시

  ```python
  def add_sub(a, b):
      return a + b, a - b

  x, y = add_sub(10, 20)
  print(x)
  print(y)
  ```

  - 튜플이 변수 여러 개에 할당되는 특성을 이용해 x, y에 각각 값을 할당 할 수 있다.(언패킹).

  - 결과

    >30
    >
    >-10



## 8. Scope

- 파이썬에서 변수가 값을 찾을 때, Local -> Enclosed -> Global -> Built-in 순으로 일어난다. (LEGB 룰)

  - `local `- 가장 가까운 함수안 범위 입니다.
  - `Enclosed` - 파이썬은 함수 안에 함수가 정의 될수 있는데, 가장 가까운 함수가 아닌 두번째 이상의 함수 가까운 함수범위입니다.
  - `Global` - 함수 바깥의 변수 또는 import된 module
  - `Built-in` - 파이썬안에 내장되어 있는 함수 또는 속성들입니다.

- 전역 스코프와 함수 스코프

  - 전역 스코프 : 어디서나 접근이 가능
  - 함수 스코프 : 함수 내에서만 접근 가능

- 변수에 접근하는 절차(순서)

  1. 먼저 함수 스코프 내에서 가장먼저 해당 변수를 찾음
  2. 함내 스코프 내에 변수가 없을 때 전역 스코프에서 변수를 찾음

  ![image](https://user-images.githubusercontent.com/53181778/77737377-c2965180-7005-11ea-9f85-b6ab27ca4838.png)

- 지역변수와 전역변수의 이름이 같은 경우, 함수 내에서는 전역변수에 접근을 못 할 수 있음

  - 접근하고자 하는 전역변수 앞에 global을 붙여 전역변수 접근 가능

    ```python
    x = 10          # 전역 변수
    def foo():
        global x    # 이 아래에서 x는 전역 변수 x를 사용하겠다고 설정
        x = 20      # x는 전역 변수
        print(x)    # 전역 변수 출력

    foo()
    print(x)        # 전역 변수 출력
    ```

    - 결과

      > 20
      >
      > 20

  - 만약 전역 변수가 없을 때 함수 안에서 global을 사용하면 해당 변수는 전역 변수가 된다.

    ```python
    #전역 변수가 없는 상태
    def make_global_var():
    	global x
    	x = 1

    make_global_var()
    print(x)
    ```

    > 결과 : 1

### 8.1 네임스페이스 (namespace)

- 파이썬에서 변수는 네임스페이스(namespace, 이름공간)에 저장된다. 다음과 같이 locals 함수를 사용하면 현재 네임스페이스를 딕셔너리 형태로 출력할 수 있다.

  ```python
  x = 10
  locals()
  ```

  - 결과

    > ```
    > {'__name__': '__main__', '__doc__': None, '__package__': None, '__loader__': <class '_frozen_importlib.BuiltinImporter'>, '__spec__': None, '__annotations__': {}, '__builtins__': <module 'builtins' (built-in)>, 'x': 10}
    > ```
    >
    > 이 경우에는 전역 범위에서 네임스페이스를 출력했으므로, 전역 네임 스페이스를 가져오게 된다. 출력된 네임스페이스를 보면 'x': 10처럼 변수 x와 값 10이 저장되어 있다. 함수 내부에서 출력하게 되면, 함수 내부의 지역 범위의 locals()를 출력하게 된다.

- 파이선의 네임스페이스는 크게 세 가지로 분류된다.

  1. 전역 네임 스페이스 : 모듈별로 존재하며, 모듈 전체에 통용되는 이름을 사용한다.
  2. 지역 네임 스페이스 : 함수 및 메소드 별로 존재하며, 함수 내의 지역 변수들이 소속된다.
  3. 빌트인 네임 스페이스 : 기본 내장 함수 및 기본 예외들의 이름을 저장하는 곳

- 네임스페이스 구현

  파이썬의 네임스페이스는 파이썬 딕셔너리 자료형으로 구현된다. 모든 key는 문자열로 되어 있고, 각 이름은 해당 범위에서의 실제 객체를 가리킨다. 이름과 실제 객체 사이의 맵핑은 가변적(mutable)이며 새로운 이름이 실행시간에 추가되거나 삭제될 수도 있다.

## 9. 매개변수의 초기 값 지정

```python
def 함수이름(매개변수=값):
    코드
```

- 위와 같이 함수를 선언하면, 함수를 호출할 때 인수를 생략 하여 매개변수의 기본 값이 사용되게 할 수 있다.

- 이떄, 기본 값을 가지는 매개변수는 일반 매개변수 앞에 위치 할 수 없다.

- 예시

  ```python
  def personal_info(name, age, address='비공개'):
      print('이름: ', name)
      print('나이: ', age)
      print('주소: ', address)

  personal_info('홍길동', 30)
  ```

  - 결과

    >이름:  홍길동
    >나이:  30
    >주소:  비공개

