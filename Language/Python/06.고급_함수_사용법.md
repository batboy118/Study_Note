# 05. ê³ ê¸‰ í•¨ìˆ˜ ì‚¬ìš©ë²•

> íŒŒì´ì¬ì˜ í•¨ìˆ˜ì˜ ê³ ê¸‰ ì‚¬ìš©ë²•ì— ëŒ€í•´ì„œ í•™ìŠµ

[ğŸ Home](https://github.com/batboy118/Study_Note)

[â—€Previous page ](./)

---

<!-- TOC -->

- [1. ì¤‘ì²© í•¨ìˆ˜ (nested function)](#1-ì¤‘ì²©-í•¨ìˆ˜-nested-function)
- [2. í•¨ìˆ˜ ë§¤ê°œë³€ìˆ˜](#2-í•¨ìˆ˜-ë§¤ê°œë³€ìˆ˜)
- [2. ëŒë‹¤ì‹ (lambda expression)](#2-ëŒë‹¤ì‹-lambda-expression)
	- [2.1. ëŒë‹¤ì‹ì˜ í™œìš©](#21-ëŒë‹¤ì‹ì˜-í™œìš©)
- [3. í´ë¡œì € (closure)](#3-í´ë¡œì €-closure)

<!-- /TOC -->

## 1. ì¤‘ì²© í•¨ìˆ˜ (nested function)

```python
def í•¨ìˆ˜ì´ë¦„1():
    ì½”ë“œ
    def í•¨ìˆ˜ì´ë¦„2():
        ì½”ë“œ
```

- í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì„ ì–¸ í•  ìˆ˜ ìˆë‹¤.

- í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì„ ì–¸ëœ í•¨ìˆ˜ëŠ” ì´ë¥¼ í¬í•¨í•˜ëŠ” í•¨ìˆ˜ë‚´ì—ì„œë§Œ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë‹¤.

  ```python
  def print_hello():
      hello = 'Hello, world!'
      def print_message():
          print(hello)
      print_message()

  print_hello()
  ```

  - ê²°ê³¼ : Hello, world!
  - ì¤‘ì²©í•¨ìˆ˜ë¥¼ í¬í•¨í•˜ëŠ” í•¨ìˆ˜ì˜ ìŠ¤ì½”í”„ì—ë„ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.

  ![image](https://user-images.githubusercontent.com/53181778/77740385-0e97c500-700b-11ea-8daf-b2b690a484a5.png)

- nonlocal í‚¤ì›Œë“œ

  - ì§€ì—­ ë³€ìˆ˜ ë³€ê²½

    ```python
    def A():
        x = 10        # Aì˜ ì§€ì—­ ë³€ìˆ˜ x
        def B():
            x = 20    # xì— 20 í• ë‹¹

        B()
        print(x)      # Aì˜ ì§€ì—­ ë³€ìˆ˜ x ì¶œë ¥

    A()
    ```

    - ê²°ê³¼ : 10
    - 20ì´ ì•„ë‹Œ 10ì´ ì¶œë ¥ë˜ì—ˆë‹¤. ì´ëŠ” í•¨ìˆ˜ Bì—ì„œ ìƒˆë¡œìš´ ë³€ìˆ˜ xë¥¼ í•¨ìˆ˜ BìŠ¤ì½”í”„ì˜ ì§€ì—­ë³€ìˆ˜ë¡œ ìƒˆë¡œ ì„ ì–¸í–ˆê¸° ë•Œë¬¸ì´ë‹¤.
    - ì´ëŸ¬í•œ ë¬¸ì œë¥¼ nonlocal í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ê²° í•  ìˆ˜ ìˆë‹¤.

  - nonlocal í‚¤ì›Œë“œëŠ” ë°”ê¹¥ìª½ì— ìˆëŠ” ì§€ì—­ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

    ```python
    def A():
        x = 10        # Aì˜ ì§€ì—­ ë³€ìˆ˜ x
        def B():
            nonlocal x    # í˜„ì¬ í•¨ìˆ˜ì˜ ë°”ê¹¥ìª½ì— ìˆëŠ” ì§€ì—­ ë³€ìˆ˜ ì‚¬ìš©
            x = 20        # Aì˜ ì§€ì—­ ë³€ìˆ˜ xì— 20 í• ë‹¹

        B()
        print(x)      # Aì˜ ì§€ì—­ ë³€ìˆ˜ x ì¶œë ¥

    A()
    ```

    - ê²°ê³¼ : 20

  - nonlocalì€ ì „ì—­ê³¼ëŠ” ë‹¤ë¦„

    ```python
    x = 1
    def A():
        x = 10
        def B():
            x = 20
            def C():
                global x
                x = x + 30
                print(x)
            C()
        B()

    A()
    ```

    - ê²°ê³¼ : 31

  - nonlocalì€ í˜„ì¬ í•¨ìˆ˜ì˜ ë°”ê¹¥ìª½ì— ìˆëŠ” ì§€ì—­ ë³€ìˆ˜ë¥¼ ì°¾ì„ ë•Œ ê°€ì¥ ê°€ê¹Œìš´ í•¨ìˆ˜ë¶€í„° ë¨¼ì € ì°¾ëŠ”ë‹¤.

    ```python
    def A():
        x = 10
        y = 100
        def B():
            x = 20
            def C():
                nonlocal x
                nonlocal y
                x = x + 30
                y = y + 300
                print(x)
                print(y)
            C()
        B()

    A()
    ```

    - ê²°ê³¼

      > 50
      >
      > 400

## 2. í•¨ìˆ˜ ë§¤ê°œë³€ìˆ˜

- ë§¤ê°œë³€ìˆ˜ë¡œ í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ì—¬ í•¨ìˆ˜ë‚´ë¶€ì—ì„œ ë§¤ê°œë³€ìˆ˜í™”ëœ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

  ```python
  def calc(oper_fn, x, y):
  	return oper_fn(x, y)

  def plus(op1, op2):
      return op1 + op2

  def minus(op1, op2):
      return op1 - op2

  print(calc(plus, 10, 5))
  print(calc(minus, 10, 5))
  ```

  - ê²°ê³¼

    > 15
    >
    > 5

## 2. ëŒë‹¤ì‹ (lambda expression)

```python
lambda ë§¤ê°œë³€ìˆ˜ : ë°˜í™˜ê°’
```

â€‹	![image](https://user-images.githubusercontent.com/53181778/77742723-d2666380-700e-11ea-88c9-7e187a446048.png)

- ëŒë‹¤ì‹ì€ `def`ë¥¼ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ì˜ ì„ ì–¸ê³¼ëŠ” ë‹¤ë¥´ê²Œ ìµëª…í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.

- ëŒë‹¤ í‘œí˜„ì‹ì€ ì‹ í˜•íƒœë¡œ ë˜ì–´ ìˆë‹¤ê³  í•´ì„œ ëŒë‹¤ í‘œí˜„ì‹(lambda expression)ì´ë¼ê³  ë¶€ë¥¸ë‹¤. íŠ¹íˆ ëŒë‹¤ í‘œí˜„ì‹ì€ í•¨ìˆ˜ë¥¼ ê°„í¸í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆì–´ì„œ `ë‹¤ë¥¸ í•¨ìˆ˜ì˜ ì¸ìˆ˜`ë¡œ ë„£ì„ ë•Œ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.

- ëŒë‹¤ í‘œí˜„ì‹ìœ¼ë¡œ í•¨ìˆ˜ ë§Œë“¤ê¸°

  ```python
  >>> lambda x: x + 10
  ```

  - ê²°ê³¼ : `<function <lambda> at 0x02C27270>`
  - ì‹¤í–‰ ê²°ê³¼ë¡œ í•¨ìˆ˜ ê°ì²´ê°€ ë‚˜ì˜¤ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ì´ë ‡ê²Œ ì„ ì–¸ì„ í• ê²½ìš°ì—ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ëŒë‹¤ í‘œí˜„ì‹ëŠ” ì´ë¦„ì´ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.

- lambdaë¡œ ë§Œë“  í‘œí˜„ì‹ì€ ê·¸ ìì²´ë¡œ í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

  ```python
  (lambda x: x + 10)(1)
  ```

  - ê²°ê³¼ : 11

- lambdaë¡œ ë§Œë“  ìµëª… í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë˜ë‹¤ë¥¸ ë°©ë²•ì€ lambda í‘œí˜„ì‹ì„ ë³€ìˆ˜ì— í• ë‹¹í•´ì£¼ëŠ” ê²ƒì´ë‹¤.

  ```python
  plus_ten = lambda x: x + 10
  plus_ten(1)
  ```

  - ê²°ê³¼ : 11

- ëŒë‹¤ í‘œí˜„ì‹ì—ì„œëŠ” ë³€ìˆ˜ë¥¼ ë§Œë“¤ ìˆ˜ ì—†ë‹¤. ë‹¨, ë°”ê¹¥ì— ìˆëŠ” ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

  ```python
  y = 10
  (lambda x: x + y)(1)
  ```

  - ê²°ê³¼ : 11

- ëŒë‹¤ í‘œí˜„ì‹ì„ í•¨ìˆ˜ì˜ ì¸ìˆ˜ë¡œ ì‚¬ìš©í•˜ê¸°

  - ëª‡ ëª‡ í•¨ìˆ˜ëŠ” í•¨ìˆ˜ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì‚¬ìš©í•˜ëŠ”ë°, ê·¸ì¤‘ map í•¨ìˆ˜ê°€ ëŒ€í‘œì ì´ë‹¤.

      ```python
      def plus_ten(x):
          return x + 10

      list(map(plus_ten, [1, 2, 3]))
      ```

  	- ê²°ê³¼ :` [11, 12, 13]`

  - ëŒë‹¤ í‘œí˜„ì‹ì„ ì´ìš©í•˜ì—¬ í•¨ìˆ˜ì˜ ì¸ìë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

      ```python
      list(map(lambda x: x + 10, [1, 2, 3]))
      ```

      - ê²°ê³¼ : `[11, 12, 13]`

- **ëŒë‹¤ í‘œí˜„ì‹ìœ¼ë¡œ ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” í•¨ìˆ˜ ë§Œë“¤ê¸°**

  ëŒë‹¤ í‘œí˜„ì‹ìœ¼ë¡œ ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ ë•ŒëŠ” lambda ë’¤ì— ì•„ë¬´ê²ƒë„ ì§€ì •í•˜ì§€ ì•Šê³ `:(ì½œë¡ )`ì„ ë¶™ì¸ë‹¤. ë‹¨, ì½œë¡  ë’¤ì—ëŠ” ë°˜ë“œì‹œ ë°˜í™˜í•  ê°’ì´ ìˆì–´ì•¼ í•œë‹¤. ì™œëƒí•˜ë©´ `í‘œí˜„ì‹(expression)`ì€ ë°˜ë“œì‹œ ê°’ìœ¼ë¡œ í‰ê°€ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

  ```python
  (lambda : 1)()
  ```

  - ê²°ê³¼ : 1

### 2.1. ëŒë‹¤ì‹ì˜ í™œìš©

- ëŒë‹¤ì‹ì— **ì¡°ê±´ë¶€ í‘œí˜„ì‹** ì‚¬ìš©í•˜ê¸°

  ```python
  lambda ë§¤ê°œë³€ìˆ˜ë“¤: ì‹1 if ì¡°ê±´ì‹ else ì‹2
  ```

  - lambda í‘œí˜„ì‹ì—ì„œ ì¡°ê±´ë¶€ í‘œí˜„ì‹ if, elseë¥¼ ì‚¬ìš©í•  ë•Œ `:`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì— ì£¼ì˜ í•´ì•¼í•œë‹¤.

    - **lambda** **ë§¤ê°œë³€ìˆ˜ë“¤: ì‹1 if ì¡°ê±´ì‹1 else ì‹2 if ì¡°ê±´ì‹2 else ì‹3**

  - mapì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ aì—ì„œ 3ì˜ ë°°ìˆ˜ë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜

    ```python
    a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    list(map(lambda x: str(x) if x % 3 == 0 else x, a))
    ```

    - ê²°ê³¼ : `[1, 2, '3', 4, 5, '6', 7, 8, '9', 10]`

      ![image](https://user-images.githubusercontent.com/53181778/77743562-2faee480-7010-11ea-8ba5-51cb44c2e16e.png)

  - ëŒë‹¤ í‘œí˜„ì‹ ì•ˆì—ì„œëŠ” elifë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ ì¡°ê±´ë¶€ í‘œí˜„ì‹ì€ **`ì‹1 if ì¡°ê±´ì‹1 else ì‹2 if ì¡°ê±´ì‹2 else ì‹3`** í˜•ì‹ì²˜ëŸ¼ ifë¥¼ ì—°ì†ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

    ```python
    lambda ë§¤ê°œë³€ìˆ˜ë“¤: ì‹1 if ì¡°ê±´ì‹1 else ì‹2 if ì¡°ê±´ì‹2 else ì‹3
    ```

  - 1ì€ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ê³ , 2ëŠ” ì‹¤ìˆ˜ë¡œ ë³€í™˜, 3 ì´ìƒì€ 10ì„ ë”í•˜ëŠ” ì‹

    ```python
    a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    list(map(lambda x: str(x) if x == 1 else float(x) if x == 2 else x + 10, a))
    ```

    - ê²°ê³¼ : `['1', 2.0, 13, 14, 15, 16, 17, 18, 19, 20]`
    - í•˜ì§€ë§Œ, ì´ëŸ°ê²½ìš°ëŠ” ì•Œì•„ë³´ê¸° í˜ë“¤ì–´ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ì§€ ì•Šê³ , `def`í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.

- mapì— ê°ì²´ë¥¼ ì—¬ëŸ¬ ê°œ ë„£ê¸°

  - mapì€ ë¦¬ìŠ¤íŠ¸ ë“±ì˜ `ë°˜ë³µ ê°€ëŠ¥í•œ ê°ì²´`ë¥¼ ì—¬ëŸ¬ ê°œ ë„£ì„ ìˆ˜ë„ ìˆë‹¤. ë‹¤ìŒì€ ë‘ ë¦¬ìŠ¤íŠ¸ì˜ ìš”ì†Œë¥¼ ê³±í•´ì„œ ìƒˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“œëŠ” ì½”ë“œì´ë‹¤.

    ```python
    a = [1, 2, 3, 4, 5]
    b = [2, 4, 6, 8, 10]
    list(map(lambda x, y: x * y, a, b))
    ```

    - ê²°ê³¼ : `[2, 8, 18, 32, 50]`
    - ë¦¬ìŠ¤íŠ¸ ë‘ ê°œë¥¼ ì²˜ë¦¬í•  ë•ŒëŠ” `lambda x, y: x * y`ì²˜ëŸ¼ ë§¤ê°œë³€ìˆ˜ë¥¼ ë‘ ê°œë¡œ ì§€ì •í•œë‹¤. ì¦‰, ëŒë‹¤ í‘œí˜„ì‹ì˜ ë§¤ê°œë³€ìˆ˜ ê°œìˆ˜ì— ë§ê²Œ ë°˜ë³µ ê°€ëŠ¥í•œ ê°ì²´ë„ `ì½¤ë§ˆ`ë¡œ êµ¬ë¶„í•´ì„œ ë„£ì–´ì£¼ë©´ ëœë‹¤.

- filter ì‚¬ìš©í•˜ê¸°

  -  filterëŠ” ë°˜ë³µ ê°€ëŠ¥í•œ ê°ì²´ì—ì„œ íŠ¹ì • ì¡°ê±´ì— ë§ëŠ” ìš”ì†Œë§Œ ê°€ì ¸ì˜¤ëŠ”ë°, filterì— ì§€ì •í•œ í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ì´ Trueì¼ ë•Œë§Œ í•´ë‹¹ ìš”ì†Œë¥¼ ê°€ì ¸ì˜¨ë‹¤.

    `filter(í•¨ìˆ˜, ë°˜ë³µê°€ëŠ¥í•œê°ì²´)`

  - def í•¨ìˆ˜ì™€ í•„í„° ì‚¬ìš©í•˜ê¸°

    ```python
    def f(x):
        return x > 5 and x < 10

    a = [8, 3, 2, 10, 15, 7, 1, 9, 0, 11]
    list(filter(f, a))
    ```

    - ê²°ê³¼ : `[8, 7, 9]`

  - ëŒë‹¤ í‘œí˜„ì‹ê³¼ í•„í„° ì‚¬ìš©í•˜ê¸°

    ```python
    a = [8, 3, 2, 10, 15, 7, 1, 9, 0, 11]
    list(filter(lambda x: x > 5 and x < 10, a))
    ```

    - ê²°ê³¼ : `[8, 7, 9]`

- reduce ì‚¬ìš©í•˜ê¸°

  - reduceëŠ” íŒŒì´ì¬ 3ë¶€í„° ë‚´ì¥ í•¨ìˆ˜ê°€ ì•„ë‹ˆë‹¤. ë”°ë¼ì„œ functools ëª¨ë“ˆì—ì„œ reduce í•¨ìˆ˜ë¥¼ ê°€ì ¸ì™€ì•¼ í•œë‹¤.

  - ì •ëœ í•¨ìˆ˜ë¡œ ì²˜ë¦¬í•œ ë’¤ ì´ì „ ê²°ê³¼ì™€ ëˆ„ì í•´ì„œ ë°˜í™˜

    `reduce(í•¨ìˆ˜, ë°˜ë³µê°€ëŠ¥í•œê°ì²´)`

  - ì €ì¥ëœ ìš”ì†Œë¥¼ ìˆœì„œëŒ€ë¡œ ë”í•œ ë’¤ ëˆ„ì ëœ ê²°ê³¼ë¥¼ ë°˜í™˜

    ```python
    def f(x, y):
        return x + y

    a = [1, 2, 3, 4, 5]
    from functools import reduce
    reduce(f, a)
    ```

    - ê²°ê³¼ : 15

      ![image](https://user-images.githubusercontent.com/53181778/77747800-29703680-7017-11ea-8f70-eb393b5c334d.png)

  - ëŒë‹¤ í‘œí˜„ì‹ í™œìš©

    ```python
    a = [1, 2, 3, 4, 5]
    from functools import reduce
    reduce(lambda x, y: x + y, a)
    ```

    - ê²°ê³¼ : 15

> **map, filter, reduceì™€ ë¦¬ìŠ¤íŠ¸ í‘œí˜„ì‹**
>
> ë¦¬ìŠ¤íŠ¸(ë”•ì…”ë„ˆë¦¬, ì„¸íŠ¸) í‘œí˜„ì‹ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê²½ìš°ì—ëŠ” map, filterì™€ ëŒë‹¤ í‘œí˜„ì‹ ëŒ€ì‹  ë¦¬ìŠ¤íŠ¸ í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. list(filter(lambda x: x > 5 and x < 10, a))ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë¦¬ìŠ¤íŠ¸ í‘œí˜„ì‹ìœ¼ë¡œë„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
>
> ```python
> a = [8, 3, 2, 10, 15, 7, 1, 9, 0, 11]
> [i for i in a if i > 5 and i < 10]
> ```
>
> - ê²°ê³¼ :  [8, 7, 9]
>
> ë¦¬ìŠ¤íŠ¸ í‘œí˜„ì‹ì´ ì¢€ ë” ì•Œì•„ë³´ê¸° ì‰½ê³  ì†ë„ë„ ë” ë¹ ë¥´ë‹¤.
>
> ë˜í•œ, for, while ë°˜ë³µë¬¸ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê²½ìš°ì—ë„ reduce ëŒ€ì‹  for, whileì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì™œëƒí•˜ë©´ reduceëŠ” ì½”ë“œê°€ ì¡°ê¸ˆë§Œ ë³µì¡í•´ì ¸ë„ ì˜ë¯¸í•˜ëŠ” ë°”ë¥¼ í•œ ëˆˆì— ì•Œì•„ë³´ê¸°ê°€ í˜ë“¤ê¸° ë•Œë¬¸ì´ë‹¤. ì´ëŸ¬í•œ ì´ìœ ë¡œ íŒŒì´ì¬ 3ë¶€í„°ëŠ” reduceê°€ ë‚´ì¥ í•¨ìˆ˜ì—ì„œ ì œì™¸ë˜ì–´ìˆë‹¤.
>
> reduce(lambda x, y: x + y, a)ëŠ” ë‹¤ìŒê³¼ ê°™ì´ for ë°˜ë³µë¬¸ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.
>
> ```python
> a = [1, 2, 3, 4, 5]
> x = a[0]
> for i in range(len(a) - 1):
>     x = x + a[i + 1]
>
> x
> ```
>
> - ê²°ê³¼ : 15

## 3. í´ë¡œì € (closure)

- í´ë¡œì €ëŠ” í•¨ìˆ˜ë¥¼ ë‘˜ëŸ¬ì‹¼ í™˜ê²½ì„ ìœ ì§€í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì˜ë¯¸
- ì¤‘ì²©í•¨ìˆ˜ì—ì„œ ì¶©ì²©í•¨ìˆ˜ë¥¼ í¬í•¨í•˜ëŠ” í•¨ìˆ˜ì˜ scopeì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤ ì´ë•Œ `ì¤‘ì²©í•¨ìˆ˜ì˜ ì´ë¦„ ìì²´`ë¥¼ ë°˜í™˜ê°’ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤ë©´?
  1. ì •ë³´ ì€ë‹‰ ê°€ëŠ¥
  2. ì „ì—­ë³€ìˆ˜ì˜ ë‚¨ìš© ë°©ì§€
  3. ë©”ì„œë“œê°€ í•˜ë‚˜ë°–ì— ì—†ëŠ” ê°œì²´ë¥¼ ë§Œë“œëŠ” ê²ƒë³´ë‹¤ ìš°ì•„í•œ êµ¬í˜„ ê°€ëŠ¥
- ì¦‰, í•¨ìˆ˜ì˜ ë°˜í™˜ ê°’ì´ í•¨ìˆ˜ê°€ ë˜ëŠ” ê²ƒì´ë‹¤.
- í´ë¡œì €ëŠ” í•¨ìˆ˜ë¥¼ ë‘˜ëŸ¬ì‹¼ í™˜ê²½(ì§€ì—­ ë³€ìˆ˜, ì½”ë“œ ë“±)ì„ **`ê³„ì† ìœ ì§€`**í•˜ë‹¤ê°€, í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ë‹¤ì‹œ êº¼ë‚´ì„œ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ë¥¼ í´ë¡œì €(closure)ë¼ê³  í•œë‹¤. ì¦‰, ë³€ìˆ˜ì˜ ê°’ ë“±ì´ ìœ ì§€ëœë‹¤.

- a * x + bë¥¼ ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜

  ```python
  sure.py
  def calc():
      a = 3
      b = 5
      def mul_add(x):
          return a * x + b    # í•¨ìˆ˜ ë°”ê¹¥ìª½ì— ìˆëŠ” ì§€ì—­ ë³€ìˆ˜ a, bë¥¼ ì‚¬ìš©í•˜ì—¬ ê³„ì‚°
      return mul_add          # mul_add í•¨ìˆ˜ë¥¼ ë°˜í™˜

  c = calc()   # cëŠ” a = 3, b = 5ì˜ ìƒíƒœ ë³€ìˆ˜ë¥¼ ê°€ì§„, mul_add í•¨ìˆ˜ ëœë‹¤.
  print(c(1), c(2), c(3), c(4), c(5))
  ```

  - ê²°ê³¼ : `8 11 14 17 20`
  - ì´ë•Œ, cê°€ í´ë¡œì € ì´ë‹¤. cì— í•¨ìˆ˜ë¿ë§Œ ì•„ë‹ˆë¼ ì£¼ë³€ì˜ ìƒí™©ê¹Œì§€ ì €ì¥ì´ ëœ ê²ƒì´ë‹¤. (ìƒí™©ì´ ë³€ìˆ˜ì— ì €ì¥ë˜ì–´ ìˆë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤.)

- lambdaë¡œ í´ë¡œì € ë§Œë“¤ê¸°

  í´ë¡œì €ëŠ” ë‹¤ìŒê³¼ ê°™ì´ lambdaë¡œë„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

  ```python
  def calc():
      a = 3
      b = 5
      return lambda x: a * x + b    # ëŒë‹¤ í‘œí˜„ì‹ì„ ë°˜í™˜

  c = calc()
  print(c(1), c(2), c(3), c(4), c(5))
  ```

  - ê²°ê³¼ : `8 11 14 17 20`

- í´ë¡œì €ì˜ **ì§€ì—­ ë³€ìˆ˜ ë³€ê²½í•˜ê¸°**

  - í´ë¡œì €ì˜ ì§€ì—­ ë³€ìˆ˜ë¥¼ ë³€ê²½í•˜ê³  ì‹¶ë‹¤ë©´ `nonlocal`ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

  - a * x + bì˜ ê²°ê³¼ë¥¼ í•¨ìˆ˜ calcì˜ ì§€ì—­ ë³€ìˆ˜ totalì— ì €ì¥í•˜ë©´ totalì˜ ìƒíƒœë˜í•œ í´ë¡œì €ì— ì—…ë°ì´íŠ¸ ëœë‹¤.

    ```python
    def calc():
        a = 3
        b = 5
        total = 0
        def mul_add(x):
            nonlocal total     # ì™¸ë¶€ í•¨ìˆ˜ì˜ total ì‚¬ìš©
            total = total + a * x + b
            print(total)
        return mul_add

    c = calc()
    c(1)
    c(2)
    c(3)
    ```

    - ê²°ê³¼

      > 8
      > 19
      > 33
