# 02. Docker ì»¨í…Œì´ë„ˆì—ì„œ ì„œë²„ ì„¤ì¹˜í•˜ê¸°ğŸ³

> baseyou21ë‹˜ì˜ Youtube ì˜ìƒì„ ê¸°ë°˜ìœ¼ë¡œ ë‚´ìš©ì„ ì¶”ê°€í•˜ì—¬ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

[ğŸ Home](https://github.com/batboy118/Study_Note)

[â—€Previous page ](./README.md)

---

<!-- TOC -->

- [1. ë„ì»¤ì— Nginx ì„¤ì¹˜í•˜ê¸°](#1-ë„ì»¤ì—-nginx-ì„¤ì¹˜í•˜ê¸°)
	- [1.1. OS image ë‹¤ìš´ë¡œë“œ](#11-os-image-ë‹¤ìš´ë¡œë“œ)
	- [1.2. run ëª…ë ¹ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ìƒì„±í•˜ê¸°](#12-run-ëª…ë ¹ìœ¼ë¡œ-ì»¨í…Œì´ë„ˆ-ìƒì„±í•˜ê¸°)
	- [1.3. ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ì ‘ì†í•˜ê¸°](#13-ì‹¤í–‰ì¤‘ì¸-ì»¨í…Œì´ë„ˆì—-ì ‘ì†í•˜ê¸°)
	- [1.4. Nginx ì„¤ì¹˜ í•˜ê¸°](#14-nginx-ì„¤ì¹˜-í•˜ê¸°)
	- [1.5. Nginx ì„œë²„ ì‹¤í–‰í•˜ê¸°](#15-nginx-ì„œë²„-ì‹¤í–‰í•˜ê¸°)
- [2. Nginx + php ì—°ë™í•˜ê¸°](#2-nginx--php-ì—°ë™í•˜ê¸°)
	- [2.1. php ì„¤ì¹˜](#21-php-ì„¤ì¹˜)
	- [2.2. vim ì„¤ì¹˜](#22-vim-ì„¤ì¹˜)
	- [2.3. phpì™€ nginx ì—°ë™ì„ ìœ„í•œ í™˜ê²½ì„¤ì •](#23-phpì™€-nginx-ì—°ë™ì„-ìœ„í•œ-í™˜ê²½ì„¤ì •)
	- [2.4. php socket ìƒì„±](#24-php-socket-ìƒì„±)
	- [2.5. main page home ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•˜ê¸°](#25-main-page-home-ë””ë ‰í† ë¦¬ë¡œ-ì´ë™í•˜ê¸°)
	- [2.6. php ì—°ë™ í™•ì¸](#26-php-ì—°ë™-í™•ì¸)
	- [2.7. php ê´€ë ¨ íŒ¨í‚¤ì§€ ì„¤ì¹˜](#27-php-ê´€ë ¨-íŒ¨í‚¤ì§€-ì„¤ì¹˜)
- [3. MariaDB ë° phpmyadmin ì„¤ì¹˜](#3-mariadb-ë°-phpmyadmin-ì„¤ì¹˜)
	- [3.1. Maria DB ì„¤ì¹˜](#31-maria-db-ì„¤ì¹˜)
	- [3.2. Maria DB Socket íŒŒì¼ ìƒì„±](#32-maria-db-socket-íŒŒì¼-ìƒì„±)
	- [3.3. ë§ˆë¦¬ì•„ DB ì ‘ì† ëª…ë ¹](#33-ë§ˆë¦¬ì•„-db-ì ‘ì†-ëª…ë ¹)
	- [3.4. phpmyadmin ì„¤ì¹˜](#34-phpmyadmin-ì„¤ì¹˜)
	- [3.5. webìƒì—ì„œ root ê³„ì • ì´ìš©í•˜ëŠ” ë°©ë²•](#35-webìƒì—ì„œ-root-ê³„ì •-ì´ìš©í•˜ëŠ”-ë°©ë²•)
	- [3.6. MariaDB root íŒ¨ìŠ¤ì›Œë“œ ë³€ê²½](#36-mariadb-root-íŒ¨ìŠ¤ì›Œë“œ-ë³€ê²½)
	- [3.7. phpmyadmin root ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•´ë³´ê¸°](#37-phpmyadmin-root-ê³„ì •ìœ¼ë¡œ-ë¡œê·¸ì¸í•´ë³´ê¸°)
- [4. SSH ì„¤ì¹˜ ë° ì›Œë“œí”„ë ˆìŠ¤ ì„¤ì¹˜](#4-ssh-ì„¤ì¹˜-ë°-ì›Œë“œí”„ë ˆìŠ¤-ì„¤ì¹˜)
	- [4.1. ssh ì„¤ì¹˜](#41-ssh-ì„¤ì¹˜)
	- [4.1. ssh ì‹¤í–‰ ë° ê³„ì • ìƒì„±](#41-ssh-ì‹¤í–‰-ë°-ê³„ì •-ìƒì„±)
	- [4.2. sftpë¥¼ ì´ìš©í•´ ì™¸ë¶€ì—ì„œ ì ‘ì†í•˜ê¸°](#42-sftpë¥¼-ì´ìš©í•´-ì™¸ë¶€ì—ì„œ-ì ‘ì†í•˜ê¸°)
	- [4.3. Wordpress ì„¤ì¹˜](#43-wordpress-ì„¤ì¹˜)
	- [4.4. Wordpress ì„¤ì •](#44-wordpress-ì„¤ì •)
- [5. SSL í”„ë¡œí† ì½œ ì ìš©í•˜ê¸°](#5-ssl-í”„ë¡œí† ì½œ-ì ìš©í•˜ê¸°)
	- [5.1. Testìš© SSL ì¸ì¦ì„œ ìƒì„±í•˜ê¸°](#51-testìš©-ssl-ì¸ì¦ì„œ-ìƒì„±í•˜ê¸°)

<!-- /TOC -->

## 1. ë„ì»¤ì— Nginx ì„¤ì¹˜í•˜ê¸°

### 1.1. OS image ë‹¤ìš´ë¡œë“œ

`sudo docekr pull osì´ë¦„:ë²„ì „`

### 1.2. run ëª…ë ¹ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ìƒì„±í•˜ê¸°

> docker run <ì˜µì…˜> <ì´ë¯¸ì§€ ì´ë¦„> <ì‹¤í–‰í•  íŒŒì¼>

`sudo docker run -i -t --name ft_server -d -p 80:80 -p 22:22 -p 443:443 debian:buster`

### 1.3. ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ì ‘ì†í•˜ê¸°

`sudo docker attach ft_server`

>cf) ì»¨í…Œì´ë„ˆ ì¢…ë£Œ ë°©ë²•
>
>`exit`

>cf) ì»¨í…Œì´ë„ˆ ì‹¤í–‰ì‹œí‚¨ ìƒíƒœë¥¼ ìœ ì§€í•˜ê³  ë¹ ì ¸ë‚˜ì˜¤ëŠ” ë²•
>
>`ctrl+P`ë¥¼ ëˆ„ë¥´ê³  `ctrl+Q`ë¥¼ ëˆ„ë¥¸ë‹¤.

> cf) ì»¨í…Œì´ë„ˆì— ì ‘ì†í•˜ì§€ ì•Šê³  ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ ëª…ë ¹ì–´ ì‹¤í–‰í•˜ëŠ” ë°©ë²•
>
> `sudo docker exec <ì»¨í…Œì´ë„ˆ ì´ë¦„> <ëª…ë ¹ì–´>`

### 1.4. Nginx ì„¤ì¹˜ í•˜ê¸°

`apt-get update`

`apt-get upgrade`

`apt-get install -y nginx`

### 1.5. Nginx ì„œë²„ ì‹¤í–‰í•˜ê¸°

`service nginx start`

---

## 2. Nginx + php ì—°ë™í•˜ê¸°

### 2.1. php ì„¤ì¹˜

`apt-get install -y php7.3-fpm`

### 2.2. vim ì„¤ì¹˜

`apt-get install -y vim`

> cf) ì„¤ì¹˜ í™•ì¸
>
> `cd /etc`
>
> `ls -l`
>
> ë³´í†µ ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ëŠ” etcì— ìœ„ì¹˜í•´ ìˆìŒ
>
> nginx, php, vim 3ê°€ì§€ í™•ì¸

### 2.3. phpì™€ nginx ì—°ë™ì„ ìœ„í•œ í™˜ê²½ì„¤ì •

- ê¸°ë³¸ index (main page)ë¥¼ ë³€ê²½

  `vim /etc/nginx/sites-available/default` ë¡œ ì‹¤í–‰

  - `root /var/www/html;`  ë¥¼ `root /home;`ìœ¼ë¡œ ë³€ê²½ (main pageì˜ html íŒŒì¼ì„ homeì—ì„œ ì°¾ê² ë‹¤ëŠ” ì˜ë¯¸ => ì¶”í›„ì— homeì— pageë¥¼ ìƒì„±í•´ì•¼í•¨)

  - `index index.html index.htm index.nginx-debian.html;`ì— `index.php`ì¶”ê°€

    => `index index.php index.html index.htm index.nginx-debian.html;`

  - ì•„ë˜ì˜ ì£¼ì„ì„ ì œê±°í•´ php CGI ì„œë²„ë¥¼ í™œì„±í™”ë¥¼ í•´ì¤€ë‹¤.

    ![OsITEx3](https://user-images.githubusercontent.com/53181778/76634047-a55d7f80-653d-11ea-8163-ee013c96d5cb.png)

- php í™˜ê²½ì„¤ì • ë³€ê²½

  `vim /etc/php/7.3/fpm/php.ini` ë¡œ ì‹¤í–‰

  - short_open_tagë¥¼ ì¼œì„œ php êµ¬ë¬¸ì„ ìë™ìœ¼ë¡œ ì¸ì‹í•˜ê²Œ ë°”ê¿”ì¤Œ

    `/short` ë¥¼ ì¹˜ê³  ì—”í„°ë¥¼ ì¹˜ê³ , `n`ì„ ëˆŒëŸ¬ì„œ ` short_open_tag = Off`ë¥¼ ì°¾ì•„ `short_open_tag = On`ìœ¼ë¡œ ë³€ê²½í•´ ì¤€ë‹¤.

  - `/cgi.fix`ë¥¼ ì¹˜ê³  ì—”í„°ë¥¼ ì¹˜ê³ , `n`ì„ ëˆŒëŸ¬ì„œ, `cgi.fix_pathinfo = 1`ì„ ì°¾ì•„ ì£¼ì„ì„ í•´ì œí•˜ê³ `cgi.fix_pathinfo = 0`ìœ¼ë¡œ ë³€ê²½í•´ ì¤€ë‹¤.

  `vim /etc/php/7.3/cli/php.ini` ë¡œ ì‹¤í–‰

  - short_open_tagë¥¼ ì¼œì„œ php êµ¬ë¬¸ì„ ìë™ìœ¼ë¡œ ì¸ì‹í•˜ê²Œ ë°”ê¿”ì¤Œ

    `/short` ë¥¼ ì¹˜ê³  ì—”í„°ë¥¼ ì¹˜ê³ , `n`ì„ ëˆŒëŸ¬ì„œ ` short_open_tag = Off`ë¥¼ ì°¾ì•„ `short_open_tag = On`ìœ¼ë¡œ ë³€ê²½í•´ ì¤€ë‹¤.

  - `/cgi.fix`ë¥¼ ì¹˜ê³  ì—”í„°ë¥¼ ì¹˜ê³ , `n`ì„ ëˆŒëŸ¬ì„œ, `cgi.fix_pathinfo = 1`ì„ ì°¾ì•„ ì£¼ì„ì„ í•´ì œí•˜ê³ `cgi.fix_pathinfo = 0`ìœ¼ë¡œ ë³€ê²½í•´ ì¤€ë‹¤.

  >  `short_open_tag = O` ì€ \<?php ì½”ë“œ ?> ë¥¼   \<? ì½”ë“œ ?>ë¡œ ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.

  > php.ini íŒŒì¼ì˜ cgi.fix_pathinfoì˜ ê°’ì´ 1ì¼ ê²½ìš°, PHP íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ì„ ê²½ìš° ê·¼ì ‘í•œ íŒŒì¼ì„ ì°¾ì•„ì„œ ì‹¤í–‰í•˜ê²Œ ë˜ë¯€ë¡œ ë³´ì•ˆì´ ì·¨ì•½í•˜ê²Œ ëœë‹¤.

### 2.4. php socket ìƒì„±

- nginx ì¬ì‹¤í–‰ ë° php ì‹¤í–‰

  `service nginx restart`

  `service php7.3-fpm start`

  `/var/run/php/php7.3-fpm.scok` ìƒì„±í™•ì¸

### 2.5. main page home ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•˜ê¸°

- ê·¸ëƒ¥ ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì— ì ‘ì†í•´ë³´ë©´, 403 Frobidden ì—ëŸ¬ê°€ ëœ¬ë‹¤. ì´ëŠ” main pageê°€ ìœ„ì¹˜í•œ ë””ë ‰í† ë¦¬ë¥¼ homeìœ¼ë¡œ ë³€ê²½í•´ ì£¼ì—ˆëŠ”ë°, homeì—ëŠ” ì•„ë¬´ê²ƒë„ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.

- `cp /var/www/html/*.* /home` : ê¸°ì¡´ì— ë©”ì¸í˜ì´ì§€ë¥¼ homeìœ¼ë¡œ ë³µì‚¬

- ë§Œì•½, ê³„ì†í•´ì„œ 403 Forbidden ì—ëŸ¬ê°€ ëœ¬ë‹¤ë©´,

  `service nginx restart`

  `service php7.3-fpm restart`

  ë¥¼ í•´ì£¼ê³  ì¬í™•ì¸ í•´ë³¸ë‹¤.

### 2.6. php ì—°ë™ í™•ì¸

- home directoryì—ì„œ `vim info.php`ì„ ì¹˜ê³  ì•„ë˜ë¥¼ ì…ë ¥í•˜ì—¬ íŒŒì¼ì„ ì €ì¥

  > `short_open_tag` ì˜µì…˜ì„ í™œì„±í™”í•˜ë©´ php ì½”ë“œë¥¼ ì‹œì‘í•˜ê¸° ìœ„í•´ ``ë¼ê³  ì“°ì§€ ì•Šê³  ``ë¼ê³  ì¨ë„ ëœë‹¤. `php`ë¼ëŠ” ê¸€ìë¥¼ ëœ ì¹  ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‚˜ ë‹¹ì—°í•œ ë§ì´ì§€ë§Œ ê·¸ ì½”ë“œëŠ” `short_open_tag`ë¥¼ í™œì„±í™”í•˜ì§€ ì•Šì€ ì„œë²„ì—ì„œëŠ” ëŒì•„ê°€ì§€ ì•Šì„ ê²ƒì´ë‹¤.
  >
  > ë§Œì•½ `short_open_tag` ë¥¼ ì¼œì£¼ì§€ ì•Šì•˜ë‹¤ë©´, \<?php phpinfo(); ?>ë¡œ ì‹¤í–‰í•´ì•¼ í•œë‹¤.

  ```php
  <?
  phpinfo();
  ?>
  ```

- http://localhost/info.php ë¥¼ ì‹¤í–‰ì‹œì¼œ phpì˜ ì •ë³´ë¥¼ í™•ì¸í•œë‹¤.

### 2.7. php ê´€ë ¨ íŒ¨í‚¤ì§€ ì„¤ì¹˜

- gd ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ (php ì´ë¯¸ì§€ ì²˜ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬)

  `apt-get install -y php7.3-gd`

- phpìš© MySQL ì„¤ì¹˜

  - `apt-get install -y php-mysql`

- mbstring ì„¤ì¹˜ (php ë¬¸ìì—´ í•¨ìˆ˜)

  - `apt-get install -y php7.3-mbstring`

- curlì„¤ì¹˜ (ë‹¤ì–‘í•œ í”„ë¡œí† ì½œë¡œ ë°ì´í„° ì „ì†¡ì´ ê°€ëŠ¥í•œ Command line tool)

  - `apt-get install -y php7.3-curl`

- ì„œë¹„ìŠ¤ë¥¼ ì¬ì‹œì‘ í•´ì£¼ê³ 

  `service nginx restart`

  `service php7.3-fpm restart`

  http://localhost/info.php ë¥¼ ì‹¤í–‰ì‹œì¼œ phpì˜ ì •ë³´ì— ì¶”ê°€ëœ ë‚´ìš©ì„ í™•ì¸í•œë‹¤.

---

## 3. MariaDB ë° phpmyadmin ì„¤ì¹˜

### 3.1. Maria DB ì„¤ì¹˜

Maria DBë¥¼ ì„¤ì¹˜í•¨ìœ¼ë¡œ Nginx+php+MariaDBê°€ êµ¬ì„±ë˜ì–´ ëŠ¥ë™í˜• ì›¹ Page ì œì‘ì´ ê°€ëŠ¥í•´ì§„ë‹¤.

`apt-get install -y mariadb-server`

### 3.2. Maria DB Socket íŒŒì¼ ìƒì„±

`service mysql start`ë¥¼ ì‹¤í–‰ í›„ `/var/run/mysqld/mysqld.sock` íŒŒì¼ì´ ìƒì„¤ëœ ê²ƒì„ í™•ì¸

### 3.3. ë§ˆë¦¬ì•„ DB ì ‘ì† ëª…ë ¹

- root ê¶Œí•œìœ¼ë¡œ mysql ì„œë²„ì— ì ‘ì†

  `mysql -u root -p`

  íŒ¨ìŠ¤ì›Œë“œ ì…ë ¥ (ì„¤ì • ì•ˆí–ˆìœ¼ë©´ ê·¸ëƒ¥ ì—”í„°)

  `quit` ë˜ëŠ” `exit`  ë¡œ ë¹ ì ¸ë‚˜ì˜¨ë‹¤.

### 3.4. phpmyadmin ì„¤ì¹˜

phpmyadminì€ ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œ DB ì„¤ì •ì„ í•´ì¤„ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í”„ë¡œê·¸ë¨

â€‹	`apt-get install -y phpmyadmin`

â€‹	home diretoryì— ë§í¬ë§Œë“¤ì–´ ì£¼ê¸°

â€‹	`ln -s /user/share/phpmyadmin /home/phpmyadmin`

> ë§Œì•½ ìœ„ì˜ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜ê°€ ì•ˆëœë‹¤ë©´, ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ì—¬ ì„¤ì¹˜
>
> â€‹	`apt-get -y install wget`
>
> â€‹	`cd /home`
>
> â€‹	`wget https://files.phpmyadmin.net/phpMyAdmin/4.9.1/phpMyAdmin-4.9.1-english.tar.gz`
>
> â€‹	`tar xf phpMyAdmin-4.9.1-english.tar.gz && rm -rf phpMyAdmin-4.9.1-english.tar.gz`
>
> â€‹	`mv phpMyAdmin-4.9.1-english phpmyadmin`

### 3.5. webìƒì—ì„œ root ê³„ì • ì´ìš©í•˜ëŠ” ë°©ë²•

MariaDBì— ì ‘ì†

â€‹	`mysql -u root -p`

ì•„ë˜ë¥¼ ì°¨ë¡€ëŒ€ë¡œ ì…ë ¥

â€‹	`use mysql;`   : ë§ˆë¦¬ì•„ dbë¥¼ ì„¤ì¹˜í•˜ê²Œ ë˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ 3ê°€ì§€ì˜ DBê°€ ì¡´ì¬í•˜ëŠ”ë° ê·¸ ì¤‘ mysqlì„ ì‚¬ìš©í•˜ê² ë‹¤ëŠ” ì˜ë¯¸

> cf) `show databases;` ëª…ë ¹ì–´ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ëª©ë¡ì„ ë³¼ ìˆ˜ ìˆìŒ

â€‹	`update user set plugin='' where user='root';`  : ì›¹ì—ì„œ rootê³„ì •ì„ ì‚¬ìš©í•˜ë„ë¡ ë§Œë“¤ì–´ ì¤Œ

â€‹	`flush privileges;` : ë³€ê²½ë‚´ìš© ì ìš©

â€‹	`quit;`

### 3.6. MariaDB root íŒ¨ìŠ¤ì›Œë“œ ë³€ê²½

`mysql_secure_installation`

### 3.7. phpmyadmin root ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•´ë³´ê¸°

http://localhost/phpmyadmin/

ID : root ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì—¬ ë¡œê·¸ì¸

## 4. SSH ì„¤ì¹˜ ë° ì›Œë“œí”„ë ˆìŠ¤ ì„¤ì¹˜

### 4.1. ssh ì„¤ì¹˜

sshëŠ” 22ë²ˆ portë¥¼ ì´ìš©í•¨, í„°ë¯¸ë„ ë° sftp ì—°ê²°ì— ì‚¬ìš©

ì„¤ì¹˜

â€‹	`apt-get install -y ssh`

### 4.1. ssh ì‹¤í–‰ ë° ê³„ì • ìƒì„±

ì‹¤í–‰

â€‹	`service ssh restart`

ê³„ì • ì¶”ê°€

â€‹	`adduser ê³„ì •ëª…`

homeì— ê³„ì •ì´ ìƒì„±ë˜ê³ , ìë™ìœ¼ë¡œ ê·¸ë£¹ë„ ì¶”ê°€ë¨

ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ê³  ëª‡ê°€ì§€ ì •ë³´ë¥¼ ì…ë ¥í•¨

> adduserì™€ useradd ì°¨ì´
>
> â€‹	`adduser` : ê³„ì • ìë™ ì„¤ì •
>
> â€‹	`useradd` : ê³„ì • ìˆ˜ë™ ì„¤ì •

### 4.2. sftpë¥¼ ì´ìš©í•´ ì™¸ë¶€ì—ì„œ ì ‘ì†í•˜ê¸°

- í”„ë¡œê·¸ë¨ì„ ì´ìš©í•œ ì ‘ê·¼ ë°©ë²•

  sftpë¥¼ ì§€ì›í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì„¤ì¹˜ (ex ì•Œë“œë¼ì´ë¸Œ)

  í˜¸ìŠ¤íŠ¸ IPì™€ í¬íŠ¸ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ê³  ìƒì„±í•œ ê³„ì •ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì„œ ë¡œê·¸ì¸ í•  ìˆ˜ ìˆë‹¤.

- ë¦¬ëˆ…ìŠ¤ ì‰˜ì—ì„œ ì ‘ê·¼í•˜ëŠ” ë°©ë²•

  - `sftp ê³„ì •@í˜¸ìŠ¤íŠ¸IP` ë˜ëŠ” `sftp -oPort=22 ê³„ì •@í˜¸ìŠ¤íŠ¸IP`

  > íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ í•˜ëŠ” ë²•
  >
  > `get íŒŒì¼ì´ë¦„`
  >
  > íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ëŠ” ë²•
  >
  > `put íŒŒì¼ì´ë¦„`
  >
  > ê·¸ì™¸ ëª…ë ¹ì–´
  >
  > `mget`, `mput` : ë‹¤ìˆ˜ì˜ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•˜ê³  ë‹¤ìˆ˜ì˜ íŒŒì¼ì„ ì—…ë¡œë“œ
  >
  > `ls` : sftpì˜ íŒŒì¼ ëª©ë¡ ì¶œë ¥
  >
  > `!ls` : ë¡œì»¬ ì„œë²„ì˜ íŒŒì¼ ëª©ë¡ ì¶œë ¥
  >
  > `!{ëª…ë ¹ì–´}` : ë¡œì»¬ ì„œë²„ì—ì„œ ì‹¤í–‰

### 4.3. Wordpress ì„¤ì¹˜

- sftpë¥¼ ì´ìš©í•´ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•
  - https://wordpress.org/download/ ì—ì„œ ì›Œë“œí”„ë ˆìŠ¤ë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ìŒ
  - ì••ì¶•ì„ í’€ê³  í´ë”ëª…ì´ wordpressì¸ì§€ í™•ì¸
  - ë¡œì»¬ì—ì„œ sftp ì ‘ì†
    - `sftp ê³„ì •@í˜¸ìŠ¤íŠ¸IP` ë˜ëŠ” `sftp -oPort=22 ê³„ì •@í˜¸ìŠ¤íŠ¸IP`
    - `put -r /home/ê³„ì •ëª…/wordpress`
- wgetì„ ì´ìš©í•´ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•
  - `sudo wget "http://wordpress.org/latest.tar.gz"`
  - `tar -xvzf latest.tar.gz -C /home/ê³„ì •ëª…/wordpress`
  - `rm -f latest.tar.gz`

### 4.4. Wordpress ì„¤ì •

- `/home/ê³„ì •ëª…/wordpress`ì— ìœ„ì¹˜í•œ  ` wp-config-sample.php`íŒŒì¼ì„  ` wp-config.php`íŒŒì¼ë¡œ ë™ì¼í•œ ê²½ë¡œì— ë³µì‚¬í•¨

- `cp /home/ê³„ì •ëª…/wordpress/wp-config-sample.php /home/ê³„ì •ëª…/wordpress/wp-config.php`

- config íŒŒì¼ ë‚´ë¶€ DB ì •ë³´ ìˆ˜ì •

  - `vi /home/ê³„ì •ëª…/wordpress/wp-config.php` ë¥¼ ì‹¤í–‰ì‹œì¼œ ì„¸ ê°€ì§€ ì •ë³´ë¥¼ ê°ì ì›í•˜ëŠ”ëŒ€ë¡œ ë°”ê¿”ì¤€ë‹¤.

  ![pF4A8YM](https://user-images.githubusercontent.com/53181778/76634073-ae4e5100-653d-11ea-9be5-f9a6d1122505.png)

- http://localhost/phpmyadmin/ ì— ì ‘ì†í•´ì„œ, DBë¥¼ ìƒì„±í•˜ê³ , ì‚¬ìš©ì ê³„ì •ì„ ë“±ë¡í•´ì¤€ë‹¤.

  ![FxOz4C1](https://user-images.githubusercontent.com/53181778/76634094-b6a68c00-653d-11ea-934b-18400fd0b07e.png)

- http://localhost/ê³„ì •ëª…/wordpress ì— ì ‘ì†í•´ ê¸°ë³¸ì„¤ì •ì„ í•´ì¤€ë’¤ publishë²„íŠ¼ì„ ëˆŒëŸ¬ì¤€ë‹¤.

## 5. SSL í”„ë¡œí† ì½œ ì ìš©í•˜ê¸°

https://localhost/jjo/wordpress/ ë¡œ ì ‘ì†í•˜ë©´ ì ‘ì†ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤. `https`í”„ë¡œí† ì½œì„ ì´ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” SSL í‚¤ë¥¼ ì¸ì¦ì„œë¥¼ ë°›ì•„ì•¼ í•œë‹¤.

### 5.1. Testìš© SSL ì¸ì¦ì„œ ìƒì„±í•˜ê¸°

- openssl ì„¤ì¹˜

â€‹	`apt-get install openssl`

- SSL ì¸ì¦ì„œ ìƒì„±

  ```bash
  openssl req -newkey rsa:4096 \
              -x509 \
              -sha256 \
              -days 3650 \
              -nodes \
              -out example.crt \
              -keyout example.key
  ```

  >- `-newkey rsa:4096` - Creates a new certificate request and 4096 bit RSA key. The default one is 2048 bits.
  >- `-x509` - Creates a X.509 Certificate.
  >- `-sha256` - Use 265-bit SHA (Secure Hash Algorithm).
  >- `-days 3650` - The number of days to certify the certificate for. 3650 is 10 years. You can use any positive integer.
  >- `-nodes` - Creates a key without a passphrase.
  >- `-out example.crt` - Specifies the filename to write the newly created certificate to. You can specify any file name.
  >- `-keyout example.key` - Specifies the filename to write the newly created private key to. You can specify any file name.

  `ls` ëª…ë ¹ì„ ì´ìš©í•´ `example.crt`ê³¼  `example.key`ê°€ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•œë‹¤.

- defalut íŒŒì¼ìˆ˜ì •

  - `vi /etc/nginx/sites-available/default`

  - ì•„ë˜ì™€ ê°™ì´ í¸ì§‘

    ![image-20200312183416634](https://user-images.githubusercontent.com/53181778/76634149-c9b95c00-653d-11ea-8b22-d843fb276276.png)

- `service nginx restart`
- https://localhost/ê³„ì •ëª…/wordpress/  ì— ì ‘ì†í•˜ì—¬ í™•ì¸
