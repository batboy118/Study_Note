# 01. ìŠ¤í”„ë§ ì…ë¬¸

>ì¸í”„ëŸ° ê°•ì˜
>
>ê°•ì˜ : ìŠ¤í”„ë§ ì…ë¬¸ - ì½”ë“œë¡œ ë°°ìš°ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸, ì›¹ MVC, DB ì ‘ê·¼ ê¸°ìˆ 
>
>ê°•ì‚¬ : ê¹€ì˜í•œ

[ğŸ Home](https://github.com/batboy118/Study_Note)

[â—€Previous page ](./README.md)

---

<!-- TOC -->



<!-- /TOC -->

## 1.  í”„ë¡œì íŠ¸ ìƒì„±

#### **ì‚¬ì „ ì„¤ì¹˜**

- Java11
- IntelliJ

#### **ìŠ¤í”„ë§ ë¶€íŠ¸ ìŠ¤íƒ€í„°**

[Spring Initializr](https://start.spring.io/)

**í”„ë¡œì íŠ¸ ì„ íƒ**

- Project: Gradle 

- Spring Boot: 2.3.x 
  - ìŠ¤ëƒ…ìƒµ : ì•„ì§ ë§Œë“¤ê³  ìˆëŠ” ë²„ì „
  - M1   : ì •ì‹ ë¦´ë¦¬ì¦ˆ ë²„ì „ ì•„ë‹˜

- Language: Java 

- Packaging: Jar 

- Java: 11 

**Project Metadata** 

- group(íšŒì‚¬ ì´ë¦„): hello 

- artifact(ë¹Œë“œ ê²°ê³¼ë¬¼): hello-spring 

**Dependencies**

- Spring Web
- Thymeleaf : í…œí”Œë¦¿ ì—”ì§„

### ê¸°ë³¸ í”„ë¡œì íŠ¸ ë‹¤ìš´ë¡œë“œ

ì„¤ì • í›„ Generate ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ìš´ë¡œë“œ ë°›ì€ í›„ ì¸í…”ë¦¬ì œì´ì—ì„œ ì˜¤í”ˆ

`build.gradle` íŒŒì¼ì„ ì˜¤í”ˆí•´ì•¼ í•¨

### êµ¬ì¡°

- src : ì†ŒìŠ¤íŒŒì¼
  - main : ì‹¤ì œ ë™ì‘í•  ì½”ë“œ
    - java : javaì½”ë“œ
    - resources : ìë°”ë¥¼ ì œì™¸í•œ ê²ƒ(XML, config, HTML ë“±)
  - test : í…ŒìŠ¤íŠ¸ ì½”ë“œ
- build.gradle : í”„ë¡œì íŠ¸ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆìŒ
  - í”ŒëŸ¬ê·¸ì¸
  - ì •ë³´
  - ë””íœë˜ì‹œ

### ì„œë²„ ì‹¤í–‰í•˜ê¸°

HelloSpringApplicationì„ ì‹¤í–‰ì‹œí‚¨ í›„ localhost:8080ìœ¼ë¡œ ì ‘ì†í•˜ë©´ ëœë‹¤.

> ì„œë²„ë¥¼ ì‹¤í–‰í•  ë•Œ Gradleë¡œ í• ì§€, IntelliJë¡œ í• ì§€ ê²°ì •í•  ìˆ˜ ìˆë‹¤.
>
> IntelliJë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤. (ê·¸ë ˆì´ë“¤ì€ ëŠë¦°ê²½ìš°ê°€ ìˆìŒ)
>
> preference => gradle ê²€ìƒ‰ => build Tools í•˜ìœ„ì˜ Gradle ì„ íƒ =>build and run usingì„ ì¸í…”ë¦¬ì œì´ë¡œ ë³€ê²½, Run test usingë„ ì¸í…”ë¦¬ì œì´ë¡œ ë³€ê²½

## 2. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚´í´ë³´ê¸°

`build.gradle` ì—ëŠ” ëª‡ê°œ ì—†ì§€ë§Œ, `External Libraries`ë¥¼ ì—´ì–´ë³´ë©´ ì—„ì²­ ë§ì´ ìˆë‹¤.

> ì§ì ‘ ì„¤ì •í•œ ì˜ì¡´ì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ ê°€ì§€ëŠ” ë˜ ë‹¤ë¥¸ ì˜ì¡´ì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ ì²´ì¸ì²˜ëŸ¼ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ (ìš°ì¸¡ Gradleì—ì„œ ë””íœë˜ì‹œ=>CompileClassPathë¥¼ ì—´ì–´ë³´ë©´ ì–´ë–¤ ì˜ì¡´ê´€ê³„ë¥¼ ê°€ì§€ëŠ”ë”” í™•ì¸ì´ ê°€ëŠ¥í•¨)

**ìŠ¤í”„ë§ ë¶€íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬**

- spring-boot-starter-web

  - í†°ìº£
  - ì›¹ MVC

- spring-boot-starter-thymeleaf

- spring-boot-starter(ê³µí†µ) : ìŠ¤í”„ë§ë¶€íŠ¸ + ìŠ¤í”„ë§ ì½”ì–´ + ë¡œê¹…

  - spring-boot

    - spring-core

  - spring-boot-starter-logging

    ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ : ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì“°ë©´, ìë™ìœ¼ë¡œ `logback`ê³¼ `slf4j` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•´ì¤€ë‹¤. ë‘˜ì¤‘ì— í•˜ë‚˜ë¥¼ ì„ íƒí•´ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

**í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬** : ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì“°ë©´, JUnitì´ ìë™ìœ¼ë¡œ ì„¤ì¹˜ë¨

- spring-boot-starter-test
  - junit:í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
  - mockito : ëª© ë¼ì´ë¸ŒëŸ¬ë¦¬
  - assertj : í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì¢€ ë” í¸í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
  - spring-test : ìŠ¤í”„ë§ í†µí•© í…ŒìŠ¤íŠ¸ ì§€ì›

## 3. View í™˜ê²½ì„¤ì •

- `src/main/resources/static` ë””ë ‰í† ë¦¬ í•˜ìœ„ì— `index.html` íŒŒì¼ì„ ì‘ì„±
- í…œí”Œë¦¿ ì—”ì§„ì„ ì´ìš©í•  ìˆ˜ë„ ìˆë‹¤. (ex. thymeleaf)

### ì»¨íŠ¸ë¡¤ëŸ¬ ì‘ì„±

- hello.hellospring.controller íŒ¨í‚¤ì§€ ìƒì„±

- HelloController.java ìƒì„±

  ```java
  package hello.hellospring.controller;
  
  import org.springframework.stereotype.Controller;
  import org.springframework.ui.Model;
  import org.springframework.web.bind.annotation.GetMapping;
  
  @Controller
  public class HelloController {
  
      @GetMapping("hello")
      public String hello(Model model){
          model.addAttribute("data", "Hello!");
          return "hello";
      }
  }
  
  ```

  - `@Controller` : ì»¨íŠ¸ë¡¤ëŸ¬ ì• ë…¸í…Œì´ì…˜
  - ` @GetMapping("hello")` : GET /hello ë§¤í•‘ ì• ë…¸í…Œì´ì…˜
  - `model.addAttribute("data", "Hello!");` : ëª¨ë¸ì— data : Hello! ê°’ì„ ë„£ì–´ë‘”ë‹¤.
  - `return "hello";` : í…œí”Œë¦¿ íŒŒì¼ `hello.html`ì„ ì‹¤í–‰ì‹œí‚¤ë¼ëŠ” ì˜ë¯¸
    - ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë¬¸ìì—´ì„ ë°˜í™˜í•˜ë©´ `viewResolver`ê°€ í…œí”Œë¦¿ ë””ë ‰í† ë¦¬ í•˜ìœ„ì˜ ìŠ¤íŠ¸ë§ì— í•´ë‹¹í•˜ëŠ” ì´ë¦„ì˜ íŒŒì¼ì„ ì°¾ì•„ì„œ ë Œë”ë§í•´ì¤Œ
    - ìŠ¤í”„ë§ ë¶€íŠ¸ í…œí”Œë¦¿ì—”ì§„ ê¸°ë³¸ viewName ë§¤í•‘ì„ ì§€ì›í•´ì¤Œ
    - `resouces:templates/`+{ViewName}+`.html`

- resuouces/templates í•˜ìœ„ì— `hello.html` ìƒì„±

  ```html
  <!DOCTYPE HTML>
  <html xmlns:th="http://www.thymeleaf.org">
  <head>
   <title>Hello</title>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  </head>
  <body>
  <p th:text="'ì•ˆë…•í•˜ì„¸ìš”. ' + ${data}" >ì•ˆë…•í•˜ì„¸ìš”. ì†ë‹˜</p>
  </body>
  </html>
  ```

  - `<html xmlns:th="http://www.thymeleaf.org">`
    - thymeleafë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„í¬íŠ¸
  - `th` : thymeleaf ë¬¸ë²•ì„ ì‚¬ìš©
  - ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ `model.addAttribute("data", "Hello!");`ë¶€ë¶„ì„ ë³´ë©´, dataë³€ìˆ˜ì— Hello!ë¥¼ ë‹´ìœ¼ë¼ëŠ” ì˜ë¯¸ì´ë‹¤.

> ì°¸ê³  : `spring-boot-devtools`ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•˜ë©´, `html` íŒŒì¼ì„ ì»´íŒŒì¼ë§Œ í•´ì£¼ë©´ ì„œë²„ ì¬ì‹œì‘ ì—†ì´ ViewíŒŒì¼ ë³€ê²½ì´ ê°€ëŠ¥í•˜ë‹¤.
>
> ì¸í…”ë¦¬J ì»´íŒŒì¼ ë°©ë²• : ë©”ë‰´ build => Recompile

## 4. ë¹Œë“œí•˜ê³  ì‹¤í–‰í•˜ê¸°

- ë¹Œë“œë¥¼ í•´ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” íŒŒì¼ì„ ìƒì„±

> ì£¼ì˜) ë§Œì•½ ì„œë²„ê°€ ì‹¤í–‰ì¤‘ì´ë¼ë©´ ë„ê³  ì§„í–‰í•´ì•¼í•œë‹¤.

**ë¹Œë“œ**

-  `./gradlew build`

  ë¹Œë“œë¥¼ í•˜ê²Œë˜ë©´ `build/libs`ë””ë ‰í† ë¦¬ê°€ ìƒì„±ì´ ë˜ê³ , ë‚´ë¶€ì— `.jar`íŒŒì¼ì´ ìƒì„±ì´ ëœë‹¤.

  ì´ íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ë©´ ì„œë²„ê°€ ì‹¤í–‰ì´ ëœë‹¤.

**ì‹¤í–‰**

- `java -jar íŒŒì¼ëª….jar`

- ê³¼ê±°ì—ëŠ” ë§¤ìš° ë³µì¡í–ˆëŠ”ë°, ìš”ì¦˜ì—ëŠ” jaríŒŒì¼ í•˜ë‚˜ë¡œ ëª¨ë‘ ê°€ëŠ¥í•˜ë‹¤.

**ë¹Œë“œ ê²°ê³¼ ì‚­ì œ**

-  `./gradlew clean` : ë¹Œë“œ í´ë” ìì²´ê°€ ì‚¬ë¼ì§

  `./gradlew clean build` : í´ë” ì‚­ì œ í›„ ë‹¤ì‹œ ë¹Œë“œí•¨

## 5. ì •ì  ì»¨í…ì¸ 

- ìŠ¤í”„ë§ ë¶€íŠ¸ ì •ì  ì»¨í…ì¸  ê¸°ëŠ¥
  - static ë””ë ‰í† ë¦¬ì—ì„œ ì°¾ì•„ì„œ ì •ì  íŒŒì¼ì„ ì œê³µí•œë‹¤.
  - urlì—ì„œ íŒŒì¼ëª…(ex. `/~.html`, `/~.jpg` ë“±)ì„ ìš”ì²­í•˜ë©´, í•´ë‹¹ íŒŒì¼ì„ static ë””ë ‰í† ë¦¬ì—ì„œ ì°¾ì•„ì„œ ì‘ë‹µí•´ì¤€ë‹¤.

> ìŠ¤í”„ë§ì€ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë¨¼ì € ì°¾ì•„ë³¸ í›„, í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì—†ë‹¤ë©´ ì •ì  íŒŒì¼ì—ì„œ ì°¾ëŠ”ë‹¤.
>
> 1. Controller => 2. Static

## 6. MVCì™€ í…œí”Œë¦¿ ì—”ì§„

JSPì—ì„œëŠ” Viewì—ì„œ ëª¨ë“ ê±¸ ë‹¤í–ˆìŒ (Model 1 ë°©ì‹)

í˜„ì¬ëŠ” **Model. View, Controller ë¥¼ ë¶„ë¦¬**í•´ì„œ ì‚¬ìš©

**Cntroller** : ë’·ë‹¨, ë¹„ì§€ë‹ˆìŠ¤ë¡œì§(ë”°ë¡œ ëº´ëŠ” ê²½ìš°ë„ ìˆìŒ)

```java
@Controller
public class HelloController {
    @GetMapping("hello-mvc")
    public String helloMvc(@RequestParam("name") String name, Model model) {
        model.addAttribute("name", name);
        return "hello-template";
    }
}
```

- `@RequestParam("name")` : íŒŒë¼ë¯¸í„°ë¥¼ ë°›ëŠ” ì• ë…¸í…Œì´ì…˜

  - `http://localhost:8080/hello-mvc`ë¡œ ì ‘ê·¼í•˜ë©´ `name`íŒŒë¼ë¯¸í„°ê°€ ì´ ì—†ë‹¤ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

  - `http://localhost:8080/hello-mvc?name=Jason`ê³¼ ê°™ì´ íŒŒë¼ë¯¸í„°ë¥¼ ë„˜ê¸°ë©´ ì—ëŸ¬ê°€ ì—†ë‹¤.

    - `@RequestParam(value = "name", required = false)`ì²˜ëŸ¼ requiredë¥¼ falseë¡œ ë‘ë©´ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì§€ë§Œ, ê¸°ë³¸ ê°’ì€ trueì´ë‹¤.

    ```java
    @GetMapping("hello-mvc")
    public String helloMvc(@RequestParam(value = "name", required = false) String name, Model model) {
        model.addAttribute("name", name);
        return "hello-template";
    }
    ```

**View** : í™”ë©´

- `resources/template/hello-template.html`

```html
<html xmlns:th="http://www.thymeleaf.org">
    <body>
        <p th:text="'hello ' + ${name}">hello! empty</p>
    </body>
</html>
```

**Model** : í™”ë©´ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ë·°ì— ë„˜ê²¨ì£¼ëŠ” ë¡œì§

## 7. API

```java
@Controller
public class HelloController {
    @GetMapping("hello-string")
    @ResponseBody
    public String helloString(@RequestParam("name") String name) {
        return "hello " + name;
    }
}
```

- `@ResponseBody` 
  - @ResponseBody ë¥¼ ì‚¬ìš©í•˜ë©´ ë·° ë¦¬ì¡¸ë²„( viewResolver )ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ 
  - ëŒ€ì‹ ì— HTTPì˜ **BODYì— ë¬¸ì ë‚´ìš©ì„ ì§ì ‘ ë°˜í™˜**(HTML BODY TAGë¥¼ ë§í•˜ëŠ” ê²ƒì´ ì•„ë‹˜)

**JSON ì‘ë‹µ**

```java
@Controller
public class HelloController {
    @GetMapping("hello-api")
    @ResponseBody
    public Hello helloApi(@RequestParam("name") String name) {
        Hello hello = new Hello();
        hello.setName(name);
        return hello;
    }
    
    static class Hello {
        private String name;
        
        public String getName() {
            return name;
        }
        
        public void setName(String name) {
            this.name = name;
        }
    }
}
```

- `@ResponseBody` ë¥¼ ì‚¬ìš©í•˜ê³ , **ê°ì²´ë¥¼ ë°˜í™˜í•˜ë©´ ê°ì²´ê°€ JSON**ìœ¼ë¡œ ë³€í™˜ë¨
- í´ë˜ìŠ¤ ë‚´ë¶€ì— static í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ë©´ ë°”ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.

> **HttpMessageConverter**
>
> @ResponseBody ê°€ ìˆìœ¼ë©´ ViewResolverê°€ ì•„ë‹Œ `HttpMessageConverter`ê°€ ë™ì‘í•˜ê²Œ ëœë‹¤.
>
> ì´ë•Œ, `HttpMessageConverter`ê°€ ë¦¬í„´ë˜ëŠ” ë°ì´í„°ì˜ ì¢…ë¥˜ë¥¼ ë³´ê³  ì–´ë–¤ì‹ìœ¼ë¡œ ì‘ë‹µí•  ì§€ ê²°ì •í•œë‹¤.
>
> - ì¼ë°˜ ê°ì²´ : MappingJackson2HttpMessageConverter
>   - MappingJackson : JSONìœ¼ë¡œ ë³€ê²½í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ (ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë³€ê²½ë„ ê°€ëŠ¥)
> - Stringê°ì²´ : StringHttpMessageConverter
> - ì´ì™¸ì—ë„, byte ì²˜ë¦¬ ë“±ë“± ê°€ëŠ¥

## 8. íšŒì› ê´€ë¦¬ ì˜ˆì œ

### ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ ì •ë¦¬

> ë°ì´í„° : íšŒì›ID, ì´ë¦„
>
> ê¸°ëŠ¥ : íšŒì› ë“±ë¡, ì¡°íšŒ
>
> DB ì„ ì •X (ì¶”í›„ ì„ ì •)

**ì¼ë°˜ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ êµ¬ì¡°**

- **ì»¨íŠ¸ë¡¤ëŸ¬**: ì›¹ MVCì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ì—­í•  

- **ì„œë¹„ìŠ¤**: í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„ 

- **ë¦¬í¬ì§€í† ë¦¬**: ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼, ë„ë©”ì¸ ê°ì²´ë¥¼ DBì— ì €ì¥í•˜ê³  ê´€ë¦¬ 

- **ë„ë©”ì¸**: ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ ê°ì²´, ì˜ˆ) íšŒì›, ì£¼ë¬¸, ì¿ í° ë“±ë“± ì£¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ê³  ê´€ë¦¬ë¨

**í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„**

- ì•„ì§ ë°ì´í„° ì €ì¥ì†Œê°€ ì„ ì •ë˜ì§€ ì•Šì•„ì„œ, ìš°ì„  ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„
- ë°ì´í„° ì €ì¥ì†ŒëŠ” RDB, NoSQL ë“±ë“± ë‹¤ì–‘í•œ ì €ì¥ì†Œë¥¼ ê³ ë¯¼ì¤‘ì¸ ìƒí™©ìœ¼ë¡œ ê°€ì •
- ê°œë°œì„ ì§„í–‰í•˜ê¸° ìœ„í•´ì„œ ì´ˆê¸° ê°œë°œ ë‹¨ê³„ì—ì„œëŠ” êµ¬í˜„ì²´ë¡œ ê°€ë²¼ìš´ ë©”ëª¨ë¦¬ ê¸°ë°˜ì˜ ë°ì´í„° ì €ì¥ì†Œ ì‚¬ìš©

### íšŒì› ë„ë©”ì¸ê³¼ ë¦¬í¬ì§€í† ë¦¬ ë§Œë“¤ê¸°

**ë„ë©”ì¸**

- íšŒì› ê°ì²´

  ```java
  package hello.hellospring.domain;
  
  public class Member {
  
      private Long id;
      private String name;
      
      public Long getId() {
          return id;
      }
      
      public void setId(Long id) {
          this.id = id;
      }
      
      public String getName() {
          return name;
      }
      
      public void setName(String name) {
          this.name = name;
      }
      
  }
  ```

  - ê¸°ë³¸ì ì¸ Member ê°ì²´ë¥¼ ìœ„í•œ í´ë˜ìŠ¤

**ë¦¬í¬ì§€í† ë¦¬**

- íšŒì› ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤

  ```java
  package hello.hellospring.repository;
  
  import hello.hellospring.domain.Member;
  import java.util.List;
  import java.util.Optional;
  
  public interface MemberRepository {
      Member save(Member member);
      Optional<Member> findById(Long id);
      Optional<Member> findByName(String name);
      List<Member> findAll();
  }
  ```

  - `Optional`ìë°” 8ì—ì„œ ì§€ì›í•˜ëŠ” ë¬¸ë²•
  - êµ¬í˜„í•´ì•¼í•  ë©”ì„œë“œë¥¼ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ ì •ì˜

- íšŒì› ë¦¬í¬ì§€í† ë¦¬ ë©”ëª¨ë¦¬ êµ¬í˜„ì²´

  ```java
  package hello.hellospring.repository;
  
  import hello.hellospring.domain.Member;
  import java.util.*;
  /**
   * ë™ì‹œì„± ë¬¸ì œê°€ ê³ ë ¤ë˜ì–´ ìˆì§€ ì•ŠìŒ, ì‹¤ë¬´ì—ì„œëŠ” ConcurrentHashMap, AtomicLong ì‚¬ìš© ê³ ë ¤
   */
  
  public class MemoryMemberRepository implements MemberRepository {
      private static Map<Long, Member> store = new HashMap<>();
      private static long sequence = 0L;
      
      @Override
      public Member save(Member member) {
          member.setId(++sequence);
          store.put(member.getId(), member);
          return member;
      }
      @Override
      public Optional<Member> findById(Long id) {
          return Optional.ofNullable(store.get(id));
      }
      @Override
      public List<Member> findAll() {
          return new ArrayList<>(store.values());
      }
      @Override
      public Optional<Member> findByName(String name) {
          return store.values().stream()
              .filter(member -> member.getName().equals(name))
              .findAny();
      }
      public void clearStore() {
          store.clear();
      }
  }
  ```

  - ì—°ìŠµì´ê¸° ë•Œë¬¸ì— ë©€í‹°ìŠ¤ë ˆë“œì˜ ë™ì‹œì„± ë¬¸ì œê°€ ê³ ë ¤ë˜ì–´ ìˆì§€ ì•ŠìŒ
    - storeì˜ í•´ì‹œë§µì€ ì—¬ëŸ¬ê°œì˜ ìŠ¤ë ˆë“œê°€ ê³µìœ í•˜ê¸° ë•Œë¬¸ì— ConcurrentHashMapì„ ì‚¬ìš©í•´ì•¼ í•¨, sequenceë„ ë§ˆì°¬ê°€ì§€ë¡œ AtomicLong ì‚¬ìš© ê³ ë ¤
  - `Optional.ofNullable(store.get(id));`  :ë¹ˆ ê°ì²´ì—¬ë„ í”„ë¡ íŠ¸ì—ì„œ ì²˜ë¦¬í•˜ê¸° ì‰½ê²Œ í•´ì¤Œ

### íšŒì› ë¦¬í¬ì§€í† ë¦¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±

í…ŒìŠ¤íŠ¸ í•  ë•Œ **main ë©”ì„œë“œ**ë¥¼ í†µí•´ì„œ ì‹¤í–‰í•˜ê±°ë‚˜, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ **ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í†µí•´ì„œ í•´ë‹¹ ê¸°ëŠ¥ì„ ì‹¤í–‰** => ì´ëŸ¬í•œ ë°©ë²•ì€ ì¤€ë¹„í•˜ê³  ì‹¤í–‰í•˜ëŠ”ë° ì˜¤ë˜ ê±¸ë¦¬ê³ , ë°˜ë³µ ì‹¤í–‰í•˜ê¸° ì–´ë µê³  ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ í•œë²ˆì— ì‹¤í–‰í•˜ê¸° ì–´ë µë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. 

ìë°”ëŠ” **JUnit**ì´ë¼ëŠ” í”„ë ˆì„ì›Œí¬ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ì„œ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°

**íšŒì› ë¦¬í¬ì§€í† ë¦¬ ë©”ëª¨ë¦¬ êµ¬í˜„ì²´ í…ŒìŠ¤íŠ¸** 

`src/test/java` 

```java
package hello.hellospring.repository;

import hello.hellospring.domain.Member;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.Test;

import java.util.List;
import java.util.Optional;

import static org.assertj.core.api.Assertions.*; //Assertions ë¥¼ staticìœ¼ë¡œ importí•¨ (Assertionsì˜ ëª¨ë“  ë©”ì„œë“œë¥¼ ë°”ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•¨)

class MemoryMemberRepositoryTest {
    MemoryMemberRepository repository = new MemoryMemberRepository();
    
    @AfterEach //ê° í…ŒìŠ¤íŠ¸ê°€ ëë‚˜ê³  í˜¸ì¶œë¨
    public void afterEach() {
        repository.clearStore();
    }
    
    @Test
    public void save() {
        //given
        Member member = new Member();
        member.setName("spring");
        //when
        repository.save(member);
        //then
        Member result = repository.findById(member.getId()).get();
        assertThat(member).isEqualTo(result);
    }
    
    @Test
    public void findByName() {
        //given
        Member member1 = new Member();
        member1.setName("spring1");
        repository.save(member1);
        Member member2 = new Member();
        member2.setName("spring2");
        repository.save(member2);
        //when
        Member result = repository.findByName("spring1").get();
        //then
    }
    
    @Test
    public void findAll() {
        //given
        Member member1 = new Member();
        member1.setName("spring1");
        repository.save(member1);
        Member member2 = new Member();
        member2.setName("spring2");
        repository.save(member2);
        //when
        List<Member> result = repository.findAll();
        //then
        assertThat(result.size()).isEqualTo(2);
    }
}
```

- `@AfterEach` : í•œë²ˆì— ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ ë©”ëª¨ë¦¬ DBì— ì§ì „ í…ŒìŠ¤íŠ¸ì˜ ê²°ê³¼ê°€ ë‚¨ì„ ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ ë˜ë©´ ë‹¤ìŒ ì´ì „ í…ŒìŠ¤íŠ¸ ë•Œë¬¸ì— ë‹¤ìŒ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•  ê°€ëŠ¥ì„±ì´ ìˆë‹¤. @AfterEach ë¥¼ ì‚¬ìš©í•˜ë©´ ê° í…ŒìŠ¤íŠ¸ê°€ ì¢…ë£Œë  ë•Œ ë§ˆë‹¤ ì´ ê¸°ëŠ¥ì„ ì‹¤í–‰í•œë‹¤. ì—¬ê¸°ì„œëŠ” ë©”ëª¨ë¦¬ DBì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ì‚­ì œí•œë‹¤.
- í…ŒìŠ¤íŠ¸ëŠ” ê°ê° ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•œë‹¤. í…ŒìŠ¤íŠ¸ ìˆœì„œì— ì˜ì¡´ê´€ê³„ê°€ ìˆëŠ” ê²ƒì€ ì¢‹ì€ í…ŒìŠ¤íŠ¸ê°€ ì•„ë‹ˆë‹¤.

### íšŒì› ì„œë¹„ìŠ¤ ê°œë°œ

```java
package hello.hellospring.service;

import hello.hellospring.domain.Member;
import hello.hellospring.repository.MemoryMemberRepository;
import java.util.List;
import java.util.Optional;

public class MemberService {
    private final MemoryMemberRepository memberRepository = new MemoryMemberRepository();
    
    /**
     * íšŒì›ê°€ì…
     */
    public Long join(Member member) {
        validateDuplicateMember(member); //ì¤‘ë³µ íšŒì› ê²€ì¦
        memberRepository.save(member);
        return member.getId();
    }
    
    private void validateDuplicateMember(Member member) {
        memberRepository.findByName(member.getName())
                .ifPresent(m -> {
                    throw new IllegalStateException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
                });
    }
    //.ifPresenëŠ” Optionalì— ìˆëŠ” ë©”ì„œë“œì´ë‹¤. Optionalì— ê°ì‹¸ì„œ Nullì„ ì²´í¬í•  ìˆ˜ ìˆë‹¤.
    
    /**
     * ì „ì²´ íšŒì› ì¡°íšŒ
     */
    public List<Member> findMembers() {
        return memberRepository.findAll();
    }
    
    public Optional<Member> findOne(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

- ì„œë¹„ìŠ¤ ë©”ì„œë“œ ë„¤ì´ë°ì€ ì‹¤ì œ ë¹„ì§€ë‹ˆìŠ¤ìš©ì–´ë¡œ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤
- ë ˆí¬ì§€í† ë¦¬ ìš©ì–´ëŠ” ê¸°ìˆ ì ì¸ ìš©ì–´ë¡œ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.2020

### íšŒì› ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸

í…ŒìŠ¤íŠ¸ëŠ” `//given, //when, //then` íŒ¨í„´ì„ ì´ìš©í•˜ë©´ í¸í•˜ë‹¤.

- ì»¤ë§¨ë“œ+ì‰¬í”„íŠ¸+T (ìœˆë„ìš° : ì»¨íŠ¸ë¡¤ ì‰¬í”„íŠ¸ T) ë¥¼ ì´ìš©í•˜ë©´ í•´ë‹¹ í´ë˜ìŠ¤ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œ ê¸°ë³¸ ë¼ˆëŒ€ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.

```java
package hello.hellospring.service;

import hello.hellospring.domain.Member;
import hello.hellospring.repository.MemoryMemberRepository;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import static org.assertj.core.api.Assertions.*;
import static org.junit.jupiter.api.Assertions.*;

class MemberServiceTest {
    MemberService memberService;
    MemoryMemberRepository memberRepository;

    @BeforeEach
    public void beforeEach() {
        memberRepository = new MemoryMemberRepository();
        memberService = new MemberService(memberRepository);
    }

    @AfterEach
    public void afterEach() {
        memberRepository.clearStore();
    }

    @Test
    public void íšŒì›ê°€ì…() throws Exception {
        //Given
        Member member = new Member();
        member.setName("hello");

        //When
        Long saveId = memberService.join(member);

        //Then
        Member findMember = memberRepository.findById(saveId).get();
        assertEquals(member.getName(), findMember.getName());
    }

    @Test
    public void ì¤‘ë³µ_íšŒì›_ì˜ˆì™¸() throws Exception {
        //Given
        Member member1 = new Member();
        member1.setName("spring");
        Member member2 = new Member();
        member2.setName("spring");

        //When
        memberService.join(member1);
        IllegalStateException e = assertThrows(IllegalStateException.class,
                () -> memberService.join(member2));//ì˜ˆì™¸ê°€ ë°œìƒí•´ì•¼ í•œë‹¤.

        //then
        assertThat(e.getMessage()).isEqualTo("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
    }
}
```

- `@BeforeEach` : ê° í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ì— í˜¸ì¶œëœë‹¤. í…ŒìŠ¤íŠ¸ê°€ ì„œë¡œ ì˜í–¥ì´ ì—†ë„ë¡ í•­ìƒ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ë„ ìƒˆë¡œ ë§ºì–´ì¤€ë‹¤.

## 8. ìŠ¤í”„ë§ ë¹ˆê³¼ ì˜ì¡´ ê´€ê³„

- ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ëŠ” ë‘ê°€ì§€ ë°©ë²•
  1. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ë°©ë²• : ì• ë…¸í…Œì´ì…˜ì„ ì´ìš©
  2. ìë°” ì½”ë“œë¡œ ì§ì ‘ ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡í•˜ê¸°

> ê³¼ê±°ì—ëŠ” XMLì´ë¼ëŠ” ë¬¸ì„œë¡œ ì„¤ì •ì„ í–ˆì§€ë§Œ, ìš”ì¦˜ì—ëŠ” ìë°” ì½”ë“œì—ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ë°”ë¡œ ì„¤ì •í•œë‹¤.

### ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ìë™ ì˜ì¡´ê´€ê³„ ì„¤ì •

**íšŒì› ì»¨íŠ¸ë¡¤ëŸ¬ì— ì˜ì¡´ê´€ê³„ ì¶”ê°€**

```java
package hello.hellospring.controller;

import hello.hellospring.service.MemberService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;

@Controller
public class MemberController {
    private final MemberService memberService;

    @Autowired
    public MemberController(MemberService memberService) {
        this.memberService = memberService;
    }
}
```

- `@Controller` : Spring MVCì—ì„œ í•˜ìœ„ íŒ¨í‚¤ì§€ë“¤ì„ ìŠ¤ìº”í•˜ì—¬ @Controllerë¥¼ ë°œê²¬í•˜ë©´ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•œë‹¤.
- ìƒì„±ìì— `@Autowired` ê°€ ìˆìœ¼ë©´ ìŠ¤í”„ë§ì´ ì—°ê´€ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ì°¾ì•„ì„œ ë„£ì–´ì¤€ë‹¤. ì´ë ‡ê²Œ ê°ì²´ ì˜ì¡´ê´€ê³„ë¥¼ ì™¸ë¶€ì—ì„œ ë„£ì–´ì£¼ëŠ” ê²ƒì„ DI (Dependency Injection), ì˜ì¡´ì„± ì£¼ì…ì´ë¼ í•œë‹¤.
- ì´ì „ í…ŒìŠ¤íŠ¸ì—ì„œëŠ” ê°œë°œìê°€ ì§ì ‘ ì£¼ì…í–ˆê³ , ì—¬ê¸°ì„œëŠ” @Autowiredì— ì˜í•´ ìŠ¤í”„ë§ì´ ì£¼ì…í•´ì¤€ë‹¤

> ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ”ë°, ì´ëŠ” Service ì½”ë“œì— ëŒ€í•œ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì´ ì•ˆë˜ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.
>
> `memberServiceê°€ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆì§€ ì•Šë‹¤.`
>
> > ì°¸ê³ : helloControllerëŠ” ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì—¬ì„œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡ëœë‹¤.
> >
> > `@Controller` ê°€ ìˆìœ¼ë©´ ìë™ ë“±ë¡ë¨

**ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ì›ë¦¬**

`@Component` : ì´ ì• ë…¸í…Œì´ì…˜ì´ ìˆìœ¼ë©´ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡ëœë‹¤.

`@Controller` : ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡ëœ ì´ìœ ë„ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ë•Œë¬¸ì´ë‹¤.

ë‹¤ìŒ ì• ë…¸í…Œì´ì…˜ë„ `@Component` ë¥¼ í¬í•¨í•˜ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡ëœë‹¤. 

- `@Controller`

- `@Service` 

- `@Repository`

**íšŒì› ì„œë¹„ìŠ¤ ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡**

```java
@Service
public class MemberService {
    private final MemberRepository memberRepository;

    @Autowired
    public MemberService(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
}
```

> ì°¸ê³ : ìƒì„±ìì— `@Autowired` ë¥¼ ì‚¬ìš©í•˜ë©´ **ê°ì²´ ìƒì„± ì‹œì ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ í•´ë‹¹ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ì„œ ì£¼ì…**í•œë‹¤. 
>
> ìƒì„±ìê°€ 1ê°œë§Œ ìˆìœ¼ë©´ `@Autowired` ëŠ” **ìƒëµ**í•  ìˆ˜ ìˆë‹¤.

**íšŒì› ë¦¬í¬ì§€í† ë¦¬ ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡**

```java
@Repository
public class MemoryMemberRepository implements MemberRepository {}
```

`memberService` ì™€ `memberRepository` ê°€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì—ˆë‹¤.

> ì°¸ê³ 
>
> ìŠ¤í”„ë§ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•  ë•Œ, ê¸°ë³¸ìœ¼ë¡œ ì‹±ê¸€í†¤ìœ¼ë¡œ ë“±ë¡(ìœ ì¼í•˜ê²Œ í•˜ë‚˜ë§Œ ë“±ë¡í•´ì„œ ê³µìœ í•œë‹¤) 
>
> ì¦‰, **ê°™ì€ ìŠ¤í”„ë§ ë¹ˆ**ì´ë©´ ëª¨ë‘ **ê°™ì€ ì¸ìŠ¤í„´ìŠ¤**ë‹¤. 
>
> ì„¤ì •ìœ¼ë¡œ ì‹±ê¸€í†¤ì´ ì•„ë‹ˆê²Œ ì„¤ì •í•  ìˆ˜ ìˆì§€ë§Œ, íŠ¹ë³„í•œ ê²½ìš°ë¥¼ ì œì™¸í•˜ë©´ **ëŒ€ë¶€ë¶„ ì‹±ê¸€í†¤ì„ ì‚¬ìš©**í•œë‹¤.

### ìë°” ì½”ë“œë¡œ ì§ì ‘ ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡í•˜ê¸°

> ìë°” ì½”ë“œë¡œ ì§ì ‘ ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡í•˜ê¸°
>
> íšŒì› ì„œë¹„ìŠ¤ì™€ íšŒì› ë¦¬í¬ì§€í† ë¦¬ì˜ @Service, @Repository, @Autowired ì• ë…¸í…Œì´ì…˜ì„ ì œê±°í•˜ê³  ì§„í–‰í•´ì•¼ í•¨

```java
package hello.hellospring;

import hello.hellospring.repository.MemberRepository;
import hello.hellospring.repository.MemoryMemberRepository;
import hello.hellospring.service.MemberService;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class SpringConfig {
    
 @Bean
 public MemberService memberService() {
 return new MemberService(memberRepository());
 }
    
 @Bean
 public MemberRepository memberRepository() {
return new MemoryMemberRepository();
 }
    
}
```

- `SpringConfig` íŒŒì¼(ì´ë¦„ ë¬´ê´€)ì„ ë§Œë“¤ì–´ ì¤€ë’¤ `@Configuration`(ì¤‘ìš”) ë¶™ì´ê³  @Beanì„ ì´ìš©í•´ì„œ ë¹ˆì„ ìƒì„±í•´ì¤€ë‹¤.
- ë©”ëª¨ë¦¬ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ë‹¤ë¥¸ ë¦¬í¬ì§€í† ë¦¬ë¡œ ë³€ê²½í•  ì˜ˆì •ì´ë¯€ë¡œ, ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ë°©ì‹ ëŒ€ì‹ ì— ìë°” ì½”ë“œë¡œ ìŠ¤í”„ë§ ë¹ˆì„ ì„¤ì •í•˜ê² ë‹¤.

> ì°¸ê³ 
>
> - DIì—ëŠ” `í•„ë“œ ì£¼ì…`, `setter ì£¼ì…`, `ìƒì„±ì ì£¼ì…` ì´ë ‡ê²Œ 3ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤. ì˜ì¡´ê´€ê³„ê°€ ì‹¤í–‰ì¤‘ì— ë™ì ìœ¼ë¡œ ë³€í•˜ëŠ” ê²½ìš°ëŠ” ê±°ì˜ ì—†ìœ¼ë¯€ë¡œ **ìƒì„±ì ì£¼ì…ì„ ê¶Œì¥**í•œë‹¤.
>
>   - í•„ë“œ ì£¼ì…
>
>     í•„ë“œì— ë°”ë¡œ `@Autowired`ë¥¼ ë¶™ì„ (ì¶”ì²œí•˜ì§€ ì•ŠìŒ)
>
>     ```java
>     @Service
>     public class MemberService {
>         @Autowired private final MemberRepository memberRepository;
>     }
>     ```
>
>   - **ìƒì„±ì ì£¼ì…**
>
>     ìƒì„±ìì— `@Autowired`ë¥¼ ë¶™ì„ (ì¶”ì²œ)
>
>     ```java
>     @Service
>     public class MemberService {
>         private final MemberRepository memberRepository;
>     
>         @Autowired
>         public MemberService(MemberRepository memberRepository) {
>             this.memberRepository = memberRepository;
>         }
>     }
>     ```
>
>   - setter ì£¼ì…
>
>     setterë¥¼ ì‚¬ìš©í•˜ì—¬ ì£¼ì… (ì¶”ì²œí•˜ì§€ ì•ŠìŒ => ë‹¤ë¥¸ ê°œë°œìê°€ ì˜ëª» ì‚¬ìš©í•  ê°€ëŠ¥ì„±ì´ ìˆìŒ)
>
>     ```java
>     @Service
>     public class MemberService {
>         private final MemberRepository memberRepository;
>     
>         @Autowired
>         public setMemberRepository(MemberRepository memberRepository) {
>             this.memberRepository = memberRepository;
>         }
>     }
>     ```
>
> - ì‹¤ë¬´ì—ì„œëŠ” ì£¼ë¡œ **ì •í˜•í™”ëœ ì»¨íŠ¸ë¡¤ëŸ¬, ì„œë¹„ìŠ¤, ë¦¬í¬ì§€í† ë¦¬ ê°™ì€ ì½”ë“œëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”**ì„ ì‚¬ìš©í•œë‹¤. 
>
> - ì •í˜•í™” ë˜ì§€ ì•Šê±°ë‚˜, **ìƒí™©ì— ë”°ë¼ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ë³€ê²½í•´ì•¼ í•˜ë©´ ì„¤ì •ì„ í†µí•´ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡**í•œë‹¤.
>
> - `@Autowired` ë¥¼ í†µí•œ DIëŠ” memberConroller , memberService ë“±ê³¼ ê°™ì´ **ìŠ¤í”„ë§ì´ ê´€ë¦¬í•˜ëŠ” ê°ì²´**ì—ì„œë§Œ ë™ì‘í•œë‹¤. **ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ì§€ ì•Šê³  ë‚´ê°€ ì§ì ‘ ìƒì„±í•œ ê°ì²´ì—ì„œëŠ” ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.**

## 9. ì›¹ MVC ê°œë°œ ì˜ˆì œ

### íšŒì› ì›¹ ê¸°ëŠ¥ - í™ˆ í™”ë©´ ì¶”ê°€

**í™ˆì»¨íŠ¸ë¡¤ëŸ¬ ì¶”ê°€**

```java
package hello.hellospring.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class HomeController {
    
    @GetMapping("/")
    public String home() {
        return "home";
    }
    
}
```

`index.html`

```html
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
    <body>
        <div class="container">
            <div>
                <h1>Hello Spring</h1>
                <p>íšŒì› ê¸°ëŠ¥</p>
                <p>
                    <a href="/members/new">íšŒì› ê°€ì…</a>
                    <a href="/members">íšŒì› ëª©ë¡</a>
                </p>
            </div>
        </div> <!-- /container -->
    </body>
</html>
```

> ì°¸ê³ : ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì •ì  íŒŒì¼ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤.

### íšŒì› ì›¹ ê¸°ëŠ¥ - ë“±ë¡

**íšŒì› ë“±ë¡ í¼ ì»¨íŠ¸ë¡¤ëŸ¬** (**get**)

```java
@Controller
public class MemberController {
    
    private final MemberService memberService;

    @Autowired
    public MemberController(MemberService memberService) {
        this.memberService = memberService;
    }

    @GetMapping(value = "/members/new")
    public String createForm() {
        return "members/createMemberForm";
    }
}
```

**íšŒì› ë“±ë¡ í¼ HTML ( resources/templates/members/createMemberForm )**

```html
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
    <body>
        <div class="container">
            <form action="/members/new" method="post">
                <div class="form-group">
                    <label for="name">ì´ë¦„</label>
                    <input type="text" id="name" name="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>
                <button type="submit">ë“±ë¡</button>
            </form>
        </div> <!-- /container -->
    </body>
</html>
```

**íšŒì› ë“±ë¡ ì»¨íŠ¸ë¡¤ëŸ¬**

```java
package hello.hellospring.controller;

public class MemberForm {
    
    private String name;
    
    public String getName() {
        return name;
    }
    
    public void setName(String name) {
        this.name = name;
    }
}
```

- ì•„ë˜ ìˆëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë§¤ê°œë³€ìˆ˜ë¡œ ì´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°›ê²Œ ë˜ëŠ”ë°,

  `<input type="text" id="name" name="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">` ì—ì„œ name = `"name"`ê³¼ ë™ì¼í•œ ë³€ìˆ˜ì´ë¦„ì¸ `private String name;`ì— ê°’ì´ í• ë‹¹ë¨

**íšŒì› ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ íšŒì›ì„ ì‹¤ì œ ë“±ë¡í•˜ëŠ” ê¸°ëŠ¥** (MemberControllerì— ì¶”ê°€ : **post**)

```java
@PostMapping(value = "/members/new")
public String create(MemberForm form) {
    Member member = new Member();
    member.setName(form.getName());
    
    memberService.join(member);
    
    return "redirect:/"; //í™ˆí™”ë©´ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
}
```

### íšŒì› ì›¹ ê¸°ëŠ¥ - ì¡°íšŒ

**íšŒì› ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì¡°íšŒ ê¸°ëŠ¥**

```java
@GetMapping(value = "/members")
public String list(Model model) {
    List<Member> members = memberService.findMembers();
    model.addAttribute("members", members);
    
    return "members/memberList";
}
```

**íšŒì› ë¦¬ìŠ¤íŠ¸ HTML**

```html
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
    <body>
        <div class="container">
            <div>
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>ì´ë¦„</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="member : ${members}">
                            <td th:text="${member.id}"></td>
                            <td th:text="${member.name}"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div> <!-- /container -->
    </body>
</html>
```

## 10. ìŠ¤í”„ë§ DB ì ‘ê·¼ ê¸°ìˆ 

### H2 ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì¹˜

```sql
drop table if exists member CASCADE;
create table member
(
 id bigint generated by default as identity,
 name varchar(255),
 primary key (id)
);
```

### ìˆœìˆ˜ JDBC

### ìŠ¤í”„ë§ í†µí•© í…ŒìŠ¤íŠ¸

### ìŠ¤í”„ë§ JdbcTemplate

### JPA

### ìŠ¤í”„ë§ ë°ì´í„° JPA

## 11.
