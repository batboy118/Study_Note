# 02. Request,Response ì²˜ë¦¬ ê¸°ë³¸

>Request,Response ì²˜ë¦¬ ê¸°ë³¸

[ğŸ Home](https://github.com/batboy118/Study_Note)

[â—€Previous page ](./README.md)

---

<!-- TOC -->

- [1. POST ìš”ì²­ì²˜ë¦¬](#1-post-ìš”ì²­ì²˜ë¦¬)

<!-- /TOC -->

## 1. POST ìš”ì²­ì²˜ë¦¬

```html
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>email form</title>
</head>
<body>
	<form action="/email_post" method="post">
		email : <input type="text" name="email"><br/>
		<input type="submit">
	</form>

</body>
</html>
```

- formíƒœê·¸ë¥¼ ì´ìš©í•˜ì—¬ ì„œë²„ì— ìš”ì²­ì„ í•  ìˆ˜ ìˆë‹¤.
- `<form action="/email_post" method="post"></form>`
  - action : ì„œë²„ì—ì„œ ì–´ë””ë¡œ ê°ˆ ê²ƒì¸ì§€
  - method : ì–´ë–¤ ìš”ì²­ì„ í•  ê²ƒì¸ì§€
    - get ë©”ì†Œë“œëŠ” URLì„ ê¸°ë°˜ìœ¼ë¡œ ì–´ë– í•œ íŒŒì¼(ê¸°ë³¸ì ìœ¼ë¡œëŠ” í˜ì´ì§€)ì„ ìš”ì²­í•˜ëŠ” ê²ƒì´ë‹¤. í˜ì´ì§€ ë‚´ì˜ ì •ì  íŒŒì¼ì„ ìš”ì²­í•  ë•ŒëŠ” `URL`ê³¼ `?` ì™€ `key`ë¥¼ í•¨ê»˜ ë³´ë‚´ì–´ íŠ¹ì • íŒŒì¼ì„ ìš”ì²­í•œë‹¤. getì€ ë°ì´í„°ë¥¼ ë³´ë‚¼ë•Œ URLì„ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— ë°ì´í„°(=URL)ì˜ ê¸¸ì´ ì œí•œ ë“±ì´ ì¡´ì¬í•œë‹¤. ë˜í•œ, ì¤‘ìš”í•œ ì •ë³´ë¥¼ getìœ¼ë¡œ ìš”ì²­í•˜ê²Œ ë˜ë©´ ì •ë³´ê°€ urlë¡œ ë…¸ì¶œë  ìˆ˜ ìˆë‹¤.
    - post ë©”ì†Œë“œëŠ” URLì„ ì´ìš©í•œ ë°©ì‹ì´ ì•„ë‹ˆë‹¤. ì„œë²„ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•ŒëŠ” post ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

- ì´ì „ì— ì‘ì„±ëë˜ ì½”ë“œì—ì„œ `main.html`ì„ ìœ„ ì½”ë“œë¡œ ìˆ˜ì •í•˜ê³  ì„œë²„ë¥¼ ì‘ë™ì‹œì¼œë³¸ ë’¤ ì´ë©”ì¼ì„ ì…ë ¥í•˜ê³  ì œì¶œì„ ëˆŒëŸ¬ë³´ë©´ `Cannot POST /email_post` ì˜¤ë¥˜ê°€ ë‚  ê²ƒì´ë‹¤. ì´ëŠ” ì•„ì§, ì„œë²„ì—ì„œ `/email_post`ë¶€ë¶„ì— ëŒ€í•´ ë¼ìš°íŒ… ì²˜ë¦¬ë¥¼ í•´ì£¼ì§€ ì•Šì•„ì„œ ìƒê¸°ëŠ” ë¬¸ì œì´ë‹¤. ì•„ë˜ì™€ ê°™ì´ app.jsì— `post` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¼ìš°íŒ… ì²˜ë¦¬ë¥¼ í•´ì£¼ë©´ ëœë‹¤.

```javascript
//app.js
const express = require('express');
const app = express()
const port = 3000

app.listen(port, function() {
	console.log("start express server on port 3000");
})

app.get('/',(req,res)=>{
	res.sendFile(__dirname + '/public/main.html');
})

app.use(express.static("public"))

app.post("/email_post", function(req,res){
	res.send("post response")
})
```

- ì´ë ‡ê²Œ í•œ í›„ ì´ë©”ì¼ì„ ì ì–´ ì œì¶œí•˜ë©´ `post response`ë¼ëŠ” ê¸€ìê°€ ì°íŒ í™”ë©´ì´ ë‚˜ì˜¬ ê²ƒì´ë‹¤. ì¦‰, ì œì¶œë²„íŠ¼ì„ ëˆ„ë¥´ë©´ `/email_post`URLê³¼ í•¨ê»˜ POST ë©”ì„œë“œë¥¼ ì„œë²„ë¡œ ë³´ë‚´ê²Œ ë˜ê³ , ì„œë²„ì—ì„œëŠ” ê·¸ì— ë§ëŠ” ê²°ê³¼ë¥¼ ë³´ë‚´ì£¼ê³  ì‘ì—…ì„ ì²˜ë¦¬í•œë‹¤. ìœ„ ì½”ë“œì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì œì¶œë²„íŠ¼ì„ ëˆ„ë¥´ë©´ `/email_post`ì— ëŒ€í•œ url ìš”ì²­ê³¼ í•¨ê»˜ POST ë©”ì†Œë“œë¥¼ ë³´ë‚´ê²Œ ë˜ê³ , ì„œë²„ëŠ” ê·¸ì— ëŒ€í•´ `post response`ë¼ëŠ” í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ë‹¤.

í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë³´ë‚¸ ì´ë©”ì¼ ì£¼ì†ŒëŠ” ì„œë²„ì—ì„œ ì–´ë–»ê²Œ ë°›ì„ ìˆ˜ ìˆì„ê¹Œ?

get ë©”ì„œë“œë¼ë©´, `req.param('email')`í•¨ìˆ˜ë¥¼ ì¨ì„œ íŠ¹ì • íŒŒë¼ë¯¸í„°ë¥¼ URLì—ì„œ ë°›ì•„ ì˜¬ ìˆ˜ìˆì§€ë§Œ, postëŠ” ë‹¤ë¥¸ ë°©ì‹ì„ ì´ìš©í•´ì•¼ í•œë‹¤. postëŠ” `body Parser`ë¼ëŠ” ë³„ë„ì˜ ëª¨ë“ˆì„ ì‚¬ìš©í•´ì•¼ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

body parser ì„¤ì¹˜ : `npm install body-parser --save`

```javascript
//app.js
const express = require('express');
const app = express()
const port = 3000
const bodyParser = require('body-parser');

app.use(express.static("public"))
app.use(bodyParser.json())
app.use(bodyParser.urlencoded({extended:true}))

app.listen(port, function() {
	console.log("start express server on port 3000");
})

app.get('/',(req,res)=>{
	res.sendFile(__dirname + '/public/main.html');
})

app.post("/email_post", function(req,res){
	console.log(req.body)
	console.log(req.body.email)
    res.send(`<h1>Welcome ${req.body.email} </h1>`)
})
```

- `const bodyParser = require('body-parser');` : body-parserë¥¼ ì„¤ì¹˜í–ˆê¸° ë•Œë¬¸ì— í•´ë‹¹ ëª¨ë“ˆì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ requireí•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ body-parser ê°ì²´ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤.

- ë°”ë””íŒŒì„œë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë°”ë””íŒŒì„œë¥¼ ì´ìš©í•œë‹¤ëŠ” ê²ƒì„ expressì—ê²Œ ì•Œë ¤ì£¼ì–´ì•¼ í•œë‹¤.`app.use(bodyParser.json())` & `app.use(bodyParser.urlencoded({extended:true}))`

  í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì˜¤ëŠ” ë°ì´í„°ê°€ `json`í˜•ì‹ì¼ ìˆ˜ë„ ìˆê³ , jsonì´ ì•„ë‹Œí˜•íƒœë¡œ `ì¸ì½”ë”©ëœ í˜•íƒœ`ë¡œ ì˜¬ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë‘ê°€ì§€ì˜ ê²½ìš°ì— ëŒ€í•´ì„œ use ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ ì£¼ì—ˆë‹¤.

- `console.log(req.body)`ë¥¼ ì°ì–´ë³´ë©´, Objectí˜•ì‹ìœ¼ë¡œ bodyê°€ íŒŒì‹±ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆê³ , `console.log(req.body.email)`ë©´ Object ë‚´ë¶€ì˜ emailì— í•´ë‹¹í•˜ëŠ” keyì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.
-  `res.send(``<h1>Welcome ${req.body.email} </h1>``)` ì„ ì´ìš©í•˜ì—¬ ë°”ë¡œ ë°›ì€ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ìœ ì €ì—ê²Œ ì‘ë‹µí• ìˆ˜ë„ ìˆë‹¤.
