# OBJECTS on RAILS

> By AVDI GRIMM

[🏠Home](https://github.com/batboy118/Study_Note)

[◀Previous page ](./README.md)

---

<!-- TOC -->

- 

<!-- /TOC -->

## 1. Yet another frickin’ blog app

새 블로그 어플리케이션을 만들어보자. 

```
rails new bloog --skip-test-unit --skip-prototype
```

> 프로젝트 이름을 blog라고 하지않은 이유는, Class 이름 중 Blog를 사용할 계획이기 때문이다. 만약 이름이 같다면 충돌이 발생할 것이다. 

홈페이지의 첫 화면부터 시작하는 것이 좋을 것 같다. route를 설정해 주자.

```ruby
root to: "blog#index"
```

라우트가 동작하도록 컨트롤러를 만든다.

```
rails g controller blog index
```

> 이렇게 만들면 blog 컨트롤러를 만들어 주며 내부에 index 메서드를 자동으로 만들어 준다.

이제 뷰와 컨트롤러를 작성하자.

뷰에서는 @blog의 타이틀과 서브타이블을 화면에 출력한다.

```erb
<!-- app/views/blog/index.html.erb -->
<h1><%= @blog.title %></h1>
<h2><%= @blog.subtitle %></h2>
```

뷰에서 @blog객체를 필요로 하기 때문에 컨트롤러에서 생성해준다.

```ruby
# app/controllers/blog_controller.rb
class BlogController < ApplicationController
  def index
    @blog = Blog.new
  end
end
```

Blog라는 클래스의 인스턴스를 생성하기 떄문에, Blog모델이 필요하다는 것을 알 수 있다.

```ruby
# app/models/blog.rb
class Blog
  def title
    "Watching Paint Dry"
  end
  def subtitle
    "The trusted source for drying paint news & opinion"
  end
end
```

서버를 돌리면 기본적인 페이지가 보이게 된다.

## 2. Adding blog entries

엔트리가 없는 블로그는 유용하지 않다. 블로그 포스트들을 app에 추가하자. 단순한 정적 문자열보다 복잡한 것을 추가하기 때문에, TDD를 할 것이다. 테스트 프레임워크는 MiniTest/Spce 을 이용한다.

```ruby
# spec/models/blog_spec.rb
require 'minitest/autorun'
require_relative '../../app/models/blog'
describe Blog do
  before do
    @it = Blog.new
  end
  it "has no entries" do
    @it.entries.must_be_empty
  end
end
```



















